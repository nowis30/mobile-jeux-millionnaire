(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931,468],{3657:function(e,t,a){Promise.resolve().then(a.bind(a,4359))},4359:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var r=a(7821),l=a(4233),n=a(4328),s=a(8078),i=a(168),o=a(2705),c=a(1468),d=a(3175);let u=(0,d.Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),m=(0,d.Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);function x(e){let{title:t,children:a,defaultOpen:l=!1,maxHeight:n="500px",itemCount:i}=e,[o,c]=(0,s.useState)(l);return(0,r.jsxs)("div",{className:"w-full mb-6",children:[(0,r.jsxs)("button",{onClick:()=>c(!o),className:"w-full flex items-center justify-between p-4 bg-gradient-to-r from-purple-900/50 to-blue-900/50 rounded-t-lg hover:from-purple-800/60 hover:to-blue-800/60 transition-all duration-200","aria-expanded":o,children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-white",children:t}),void 0!==i&&(0,r.jsx)("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm text-white/90 font-semibold",children:i})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-white/70",children:o?"Masquer":"Afficher"}),o?(0,r.jsx)(u,{className:"w-6 h-6 text-white"}):(0,r.jsx)(m,{className:"w-6 h-6 text-white"})]})]}),(0,r.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(o?"max-h-screen opacity-100":"max-h-0 opacity-0"),children:(0,r.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-b-lg border-t-0 overflow-y-auto custom-scrollbar",style:{maxHeight:o?n:"0"},children:a})})]})}var h=a(9513),p=a(2044),g=a(6325);let b="lobby";function f(){let e=(0,i.useRouter)(),[t,a]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[m,f]=(0,s.useState)(""),[y,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=!0;return(async()=>{try{console.log("[Auth] Tentative /api/auth/me ...");let t=await (0,h.SC)("/api/auth/me");console.log("[Auth] Succ\xe8s /api/auth/me",t),e&&(a(!0),u(!!t.isAdmin),f(t.email),N(null));try{window.dispatchEvent(new Event("hm-music/resume")),window.dispatchEvent(new Event("hm-music/play-now"))}catch(e){}}catch(t){e&&(a(!1),u(!1),f(""),N("Non connect\xe9."))}})(),()=>{e=!1}},[e]);let[w,S]=(0,s.useState)([]),[k,C]=(0,s.useState)(""),[P,A]=(0,s.useState)(""),[I,M]=(0,s.useState)(""),[E,T]=(0,s.useState)(b),[D,R]=(0,s.useState)([]),[q,L]=(0,s.useState)(null),[O,z]=(0,s.useState)(null),[B,F]=(0,s.useState)(""),[Q,V]=(0,s.useState)([]),[G,U]=(0,s.useState)(""),[$,J]=(0,s.useState)(null),[W,_]=(0,s.useState)(null),[H,X]=(0,s.useState)([]),[Z,Y]=(0,s.useState)([]),[K,ee]=(0,s.useState)({}),[et,ea]=(0,s.useState)(null),[er,el]=(0,s.useState)([]),[en,es]=(0,s.useState)(!1),[ei,eo]=(0,s.useState)(!1),[ec,ed]=(0,s.useState)(!1),[eu,em]=(0,s.useState)(null),[ex,eh]=(0,s.useState)(!1),[ep,eg]=(0,s.useState)(null),[eb,ef]=(0,s.useState)([]),[ev,ej]=(0,s.useState)(null),[ey,eN]=(0,s.useState)(1e6),[ew,eS]=(0,s.useState)(0),[ek,eC]=(0,s.useState)(!1),[eP,eA]=(0,s.useState)(!1),[eI,eM]=(0,s.useState)(null),[eE,eT]=(0,s.useState)(null),[eD,eR]=(0,s.useState)(!1),[eq,eL]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=(0,o.dF)();if(e){var t;C(e.gameId),A(null!==(t=e.playerId)&&void 0!==t?t:""),e.nickname&&U(e.nickname)}},[]),(0,s.useEffect)(()=>{try{var e,t;eL(!!(null===(t=window.Capacitor)||void 0===t?void 0:null===(e=t.isNativePlatform)||void 0===e?void 0:e.call(t)))}catch(e){eL(!1)}},[]),(0,s.useEffect)(()=>{try{localStorage.getItem("hm-tutorial-home")||eh(!0)}catch(e){}},[]),(0,s.useEffect)(()=>{if(k&&P)try{let e=new URLSearchParams(window.location.search).get("invite");if(!e||localStorage.getItem("hm-invite-accepted-".concat(e)))return;(async()=>{try{await (0,h.SC)("/api/games/".concat(k,"/referrals/accept"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})}),localStorage.setItem("hm-invite-accepted-".concat(e),"1"),eg(e)}catch(e){}})()}catch(e){}},[k,P]);let eO=(0,s.useCallback)(e=>{var t,a,r;let l={gameId:null!==(t=null==e?void 0:e.gameId)&&void 0!==t?t:k,playerId:null!==(a=null==e?void 0:e.playerId)&&void 0!==a?a:P,nickname:null!==(r=null==e?void 0:e.nickname)&&void 0!==r?r:G};l.gameId&&(0,o.Aj)(l)},[k,P,G]),ez=(0,s.useCallback)(async()=>{if(k)try{var e,t;console.log("[Home] Fetch state gameId=",k);let a=await (0,h.SC)("/api/games/".concat(k,"/state"));console.log("[Home] State re\xe7u:",a),T(a.status),R(null!==(e=a.players)&&void 0!==e?e:[]),M(null!==(t=a.code)&&void 0!==t?t:""),L(null)}catch(e){console.warn("[Home] \xc9chec state",e),L(e instanceof Error?e.message:"\xc9chec de r\xe9cup\xe9ration de l'\xe9tat")}},[k]),eB=(0,s.useCallback)(async()=>{if(k&&P)try{var e;let t=await (0,h.SC)("/api/games/".concat(k,"/bonus/status"));eC(!!t.available),eS(Math.max(0,Number(null!==(e=t.secondsUntilAvailable)&&void 0!==e?e:0))),"number"!=typeof t.rewardAmount||Number.isNaN(t.rewardAmount)||eN(t.rewardAmount),eT(null)}catch(e){if((null==e?void 0:e.status)===404)return;(null==e?void 0:e.message)?eT(e.message):eT("Impossible de r\xe9cup\xe9rer le bonus.")}},[k,P]),eF=(0,s.useCallback)(e=>{let t=Math.max(0,Math.floor(e)),a=Math.floor(t/60),r=t%60;return a>0?"".concat(a,"min ").concat(r,"s"):"".concat(r,"s")},[]),eQ=(0,s.useCallback)(async()=>{if(!ec&&t&&!k){ed(!0),console.log("[Home] AutoJoin d\xe9clench\xe9 isLoggedIn=",t,"gameId=",k);try{var e;let t=await (0,h.SC)("/api/games");console.log("[Home] Liste des games:",t);let a=null===(e=t.games)||void 0===e?void 0:e[0];if(!a)throw Error("Partie introuvable");let r=await (0,h.SC)("/api/games/".concat(a.id,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});console.log("[Home] Join OK:",r),C(a.id),A(r.playerId),M(a.code),U(m),eO({gameId:a.id,playerId:r.playerId,nickname:m}),L(null),z("Vous avez rejoint la partie mondiale en tant que ".concat(m)),ez()}catch(e){console.error("[AutoJoin] Erreur join:",(null==e?void 0:e.message)||e)}}},[ec,t,k,m,eO,ez]),eV=(0,s.useCallback)(async()=>{if(!k||!P){eT("Rejoignez la partie mondiale pour d\xe9bloquer le bonus.");return}if(!eP){eA(!0),eT(null),eM(null);try{var e,t;if(!await (0,g.fL)((e,t)=>{console.log("[Bonus] Reward callback ".concat(e," ").concat(t))})){eT("La publicit\xe9 n'est pas pr\xeate. R\xe9essayez dans quelques instants.");return}let a=await (0,h.SC)("/api/games/".concat(k,"/bonus/redeem"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),r=Number(null!==(e=null==a?void 0:a.rewardAmount)&&void 0!==e?e:ey);eN(r),eM("+".concat((0,p.l)(r)));let l=Number(null!==(t=null==a?void 0:a.secondsUntilNext)&&void 0!==t?t:0),n=(0,g.Ie)();eS(Math.max(l,n)),eC(!1),eB(),ez()}catch(e){(null==e?void 0:e.status)===429&&eB(),eT((null==e?void 0:e.message)||"Impossible de cr\xe9diter le bonus.")}finally{eA(!1)}}},[k,P,eP,ey,eB,ez]);(0,s.useEffect)(()=>{eQ()},[eQ]),(0,s.useEffect)(()=>{if(k&&m)try{let e=(0,n.io)(h.Sg,{path:"/socket.io",transports:["websocket"],withCredentials:!0,query:{gameId:k,nickname:m}});ej(e);let t=async()=>{try{let e=await fetch("".concat(h.Sg,"/api/games/").concat(k,"/online"),{credentials:"include"});if(!e.ok)return;let t=await e.json();ef(Array.isArray(t.users)?t.users:[])}catch(e){}};t();let a=setInterval(t,15e3);return()=>{try{clearInterval(a)}catch(e){}e.close(),ej(null)}}catch(e){}},[k,m]);let eG=(0,s.useCallback)(async e=>{if(k){_(e);try{var t,a,r,l,n,s;let[i,o,c,d,u]=await Promise.all([fetch("".concat(h.Sg,"/api/games/").concat(k,"/properties/holdings/").concat(e.id),{credentials:"include"}),fetch("".concat(h.Sg,"/api/games/").concat(k,"/markets/holdings/").concat(e.id),{credentials:"include"}),fetch("".concat(h.Sg,"/api/games/").concat(k,"/markets/latest"),{credentials:"include"}),fetch("".concat(h.Sg,"/api/games/").concat(k,"/economy"),{credentials:"include"}),fetch("".concat(h.Sg,"/api/quiz/public-stats"),{credentials:"include"})]),m=i.ok?await i.json():{holdings:[]},x=o.ok?await o.json():{holdings:[]},p=c.ok?await c.json():{prices:[]},g=d.ok?await d.json():null,b=u.ok?await u.json():null;X(null!==(t=m.holdings)&&void 0!==t?t:[]),Y(null!==(a=x.holdings)&&void 0!==a?a:[]);let f={};for(let e of null!==(r=p.prices)&&void 0!==r?r:[])f[e.symbol]=e.price;if(ee(f),g&&ea({baseMortgageRate:Number(null!==(l=g.baseMortgageRate)&&void 0!==l?l:.05),appreciationAnnual:Number(null!==(n=g.appreciationAnnual)&&void 0!==n?n:.02),schedule:Array.isArray(g.schedule)?g.schedule:[]}),b){let e=Array.isArray(b.categories)?b.categories.map(e=>{var t,a,r,l;return{category:String(null!==(t=e.category)&&void 0!==t?t:"autre"),total:Number(null!==(a=e.total)&&void 0!==a?a:0),used:Number(null!==(r=e.used)&&void 0!==r?r:0),remaining:Number(null!==(l=e.remaining)&&void 0!==l?l:0)}}):void 0;em({remaining:Number(null!==(s=b.remaining)&&void 0!==s?s:0),remainingByDifficulty:b.remainingByDifficulty,remainingByCategory:b.remainingByCategory,categories:e})}}catch(e){}}},[k]),eU=(0,s.useCallback)(()=>{var e,t,a;if(!W){el([]);return}let r=((null==et?void 0:et.schedule)&&et.schedule.length?et.schedule:Array.from({length:10},()=>.02)).slice(0,10),l=null!==(e=null==et?void 0:et.baseMortgageRate)&&void 0!==e?e:.05,n=(H||[]).map(e=>{var t,a,r;let n=Number(null!==(t=e.currentValue)&&void 0!==t?t:0),s=Number(null!==(a=e.mortgageDebt)&&void 0!==a?a:0),i=Number(null!==(r=e.weeklyPayment)&&void 0!==r?r:0)||function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,r=Math.max(1,Math.round(52*a)),l=t/52;return e<=0?0:l<=0?e/r:l*e/(1-Math.pow(1+l,-r))}(s,l,25);return{value:n,debt:s,rate:l,payW:i}}),s=(Z||[]).map(e=>{var t,a,r;let l=null!==(a=K[e.symbol])&&void 0!==a?a:Number(null!==(t=e.avgPrice)&&void 0!==t?t:0);return{value:Number(null!==(r=e.quantity)&&void 0!==r?r:0)*Number(null!=l?l:0),er:function(e){switch(e){case"SP500":case"VFV":case"XLF":case"XLE":case"IWM":return .06;case"QQQ":case"AAPL":case"MSFT":case"AMZN":case"META":case"GOOGL":case"NVDA":case"TSLA":case"COST":return .08;case"TSX":case"VDY":default:return .05;case"UPRO":return .18;case"TQQQ":return .24;case"GLD":return .02;case"TLT":return .03}}(String(e.symbol))}}),i=Number(null!==(t=W.cash)&&void 0!==t?t:0),o=[],c=n.reduce((e,t)=>e+(t.value-t.debt),0)+s.reduce((e,t)=>e+t.value,0)+i;o.push({year:0,net:c});let d=n.map(e=>({...e})),u=s.map(e=>({...e}));for(let e=1;e<=10;e++){for(let t of d){let l=Math.max(0,52*t.payW-t.debt*t.rate);t.debt=Math.max(0,t.debt-l),t.value=t.value*(1+(null!==(a=r[e-1])&&void 0!==a?a:.02))}for(let e of u)e.value=e.value*(1+e.er);let t=d.reduce((e,t)=>e+(t.value-t.debt),0)+u.reduce((e,t)=>e+t.value,0)+i;o.push({year:e,net:t})}el(o)},[W,H,Z,K,et]);(0,s.useEffect)(()=>{if(!ei){el([]);return}es(!0);try{eU()}finally{es(!1)}},[ei,W,H,Z,K,et]),(0,s.useCallback)(async()=>{try{var e;let t=await (0,h.SC)("/api/games"),a=null===(e=t.games)||void 0===e?void 0:e[0];if(!a)throw Error("Partie introuvable");let r=await (0,h.SC)("/api/games/".concat(a.id,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});C(a.id),A(r.playerId),M(a.code),eO({gameId:a.id,playerId:r.playerId}),L(null),z("Rejoint la partie ".concat(a.code)),ez()}catch(e){z(null),L(e instanceof Error?e.message:"Impossible de rejoindre la partie")}},[eO,ez]);let e$=(0,s.useCallback)(async()=>{try{let r=k;if(!r){var e,t,a;let l=await (0,h.SC)("/api/games");if(!(r=null!==(a=null===(t=l.games)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id)&&void 0!==a?a:""))throw Error("Partie introuvable");C(r)}await (0,h.SC)("/api/games/".concat(r,"/start"),{method:"POST"}),z("Partie d\xe9marr\xe9e"),ez()}catch(e){L(e instanceof Error?e.message:"\xc9chec du d\xe9marrage")}},[k,ez]),eJ=(0,s.useCallback)(async()=>{try{if(!window.confirm("Red\xe9marrer la partie effacera joueurs, annonces, positions et historique. Continuer ?"))return;let r=k;if(!r){var e,t,a;let l=await (0,h.SC)("/api/games");if(!(r=null!==(a=null===(t=l.games)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id)&&void 0!==a?a:""))throw Error("Partie introuvable");C(r)}console.log("[DEBUG] Calling restart for game ".concat(r)),await (0,h.SC)("/api/games/".concat(r,"/restart"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})}),console.log("[DEBUG] Restart successful"),z("Partie red\xe9marr\xe9e avec succ\xe8s!"),L(null),(0,o.Ov)(),C(""),A(""),U(""),ez()}catch(e){console.error("[DEBUG] Restart error:",e),L(e instanceof Error?e.message:"\xc9chec du red\xe9marrage")}},[k,ez]);(0,s.useCallback)(()=>{(0,o.Ov)(),C(""),A(""),U(""),M(""),R([]),S([]),T(b),z("Session effac\xe9e")},[]);let eW=window.location.origin,[e_,eH]=(0,s.useState)(""),[eX,eZ]=(0,s.useState)(null),eY=(0,s.useCallback)(async()=>{try{navigator.share?(await navigator.share({title:"Rejoins le jeu du Millionnaire",text:"Clique pour te connecter et rejoindre la partie globale.",url:eW}),J("Lien partag\xe9")):navigator.clipboard?(await navigator.clipboard.writeText(eW),J("Lien copi\xe9 dans le presse-papiers")):J("Partage non support\xe9. Copiez l'URL du navigateur.")}catch(e){J("Partage annul\xe9")}},[eW]),eK=(0,s.useCallback)(async()=>{try{if(!k)throw Error("Partie introuvable");let e=await (0,h.SC)("/api/games/".concat(k,"/referrals/create"),{method:"POST"});eH(e.url),eZ("Lien g\xe9n\xe9r\xe9. R\xe9compense: ".concat((0,p.l)(e.reward||1e6))),navigator.share?await navigator.share({title:"Rejoins le Millionnaire",text:"Accepte mon invitation et commen\xe7ons !",url:e.url}):navigator.clipboard&&(await navigator.clipboard.writeText(e.url),eZ(e=>e?e+" — Lien copi\xe9":"Lien copi\xe9"))}catch(e){eZ((null==e?void 0:e.message)||"\xc9chec de cr\xe9ation du lien")}},[k]);(0,s.useEffect)(()=>{k&&ez()},[k,ez]),(0,s.useEffect)(()=>{eB()},[eB]),(0,s.useEffect)(()=>{if(ew<=0)return;let e=setTimeout(()=>{eS(e=>Math.max(0,e-1))},1e3);return()=>clearTimeout(e)},[ew]),(0,s.useEffect)(()=>{let e=!0,t=async()=>{try{let t=await (0,g.yk)();e&&eR(t)}catch(t){e&&eR(!1)}};t();let a=setInterval(t,5e3);return()=>{e=!1,clearInterval(a)}},[]),(0,s.useEffect)(()=>{if(!eq)return;let e=()=>{let e=(0,g.Ie)();e>0&&eS(t=>e>t?e:t)};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[eq]),(0,s.useEffect)(()=>{k&&!P&&(async()=>{try{try{let e=await (0,h.SC)("/api/games/".concat(k,"/me"));A(e.player.id),e.player.nickname&&U(e.player.nickname),eO({gameId:k,playerId:e.player.id,nickname:e.player.nickname})}catch(e){}}catch(e){}})()},[k,P,eO]);let e0=(0,s.useMemo)(()=>w.length>0?w:D.map(e=>({playerId:e.id,nickname:e.nickname,netWorth:e.netWorth})).sort((e,t)=>t.netWorth-e.netWorth),[w,D]),e2=!k||!P||eP||ew>0||!eD,e1=k&&P?eP?"Chargement de la publicit\xe9...":ew>0?"Disponible dans ".concat(eF(ew)):eD?"Regarder la publicit\xe9 pour ".concat((0,p.l)(ey)):eq?"Chargement de la publicit\xe9...":"Disponible dans l'app mobile":"Connexion en cours...";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("main",{className:"space-y-6 overflow-x-hidden",children:[(0,r.jsxs)("div",{className:"text-xs opacity-60",children:["DEBUG API_BASE: ",h.Sg]}),(0,r.jsx)(()=>y?(0,r.jsxs)("div",{className:"p-3 mb-4 rounded bg-red-900/40 border border-red-700 text-sm",children:[(0,r.jsxs)("p",{className:"font-semibold",children:["Auth: ",y]}),(0,r.jsx)("p",{className:"mt-1 text-xs opacity-75",children:"Si cela persiste, ouvrez la page /debug-auth pour plus de d\xe9tails (token, cookies)."})]}):null,{}),(0,r.jsxs)("div",{className:"rounded-lg border border-indigo-600 bg-gradient-to-r from-indigo-700/60 to-purple-700/50 p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2 shadow",children:[(0,r.jsx)("div",{className:"text-sm md:text-base font-semibold text-indigo-100 flex items-center gap-2",children:(0,r.jsx)("span",{children:"✨ Nouveaut\xe9s: Difficult\xe9 Quiz r\xe9\xe9quilibr\xe9e, cat\xe9gorie Anatomy (biologie), tutoriel complet."})}),(0,r.jsxs)("div",{className:"text-xs flex items-center gap-3",children:[(0,r.jsx)(l.default,{href:"/tutoriel",className:"px-3 py-1 rounded bg-indigo-500 hover:bg-indigo-400 text-black font-medium text-xs",children:"Voir le tutoriel"}),(0,r.jsx)(l.default,{href:"/quiz",className:"px-3 py-1 rounded bg-purple-500 hover:bg-purple-400 text-black font-medium text-xs",children:"Jouer au Quiz"}),(0,r.jsx)(l.default,{href:"/telecharger",className:"px-3 py-1 rounded bg-emerald-500 hover:bg-emerald-400 text-black font-medium text-xs",children:"T\xe9l\xe9charger l'app"})]})]}),(0,r.jsx)(j,{}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"rounded-xl border border-emerald-600/60 bg-gradient-to-r from-emerald-900/70 to-green-800/60 p-4 shadow-lg space-y-3",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1 text-sm text-emerald-100",children:[(0,r.jsxs)("p",{className:"text-lg md:text-xl font-semibold text-white",children:["Bonus pub : ",(0,p.l)(ey)]}),(0,r.jsxs)("p",{className:"text-emerald-100/80 text-sm",children:["Regardez une publicit\xe9 pour cr\xe9diter instantan\xe9ment ",(0,p.l)(ey)," sur votre compte."]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full md:w-auto",children:[(0,r.jsx)("button",{onClick:eV,disabled:e2,className:"px-4 py-2 rounded-lg font-semibold transition-all w-full sm:w-auto ".concat(e2?"bg-emerald-700/40 text-emerald-200/70 cursor-not-allowed":"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 text-black shadow-lg shadow-emerald-900/40"),children:e1}),(0,r.jsx)(l.default,{href:"/bonus",className:"text-xs text-emerald-100/80 underline text-center",children:"En savoir plus"})]})]}),!eq&&(0,r.jsx)("p",{className:"text-xs text-emerald-100/70 text-center md:text-right",children:"Disponible dans l'application mobile. T\xe9l\xe9chargez-la via l'onglet T\xe9l\xe9charger."}),eI&&(0,r.jsxs)("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/15 px-3 py-2 text-sm text-emerald-100 text-center",children:[eI," cr\xe9dit\xe9 sur votre compte !"]}),eE&&(0,r.jsx)("div",{className:"rounded-lg border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-100 text-center",children:eE})]}),(0,r.jsxs)("section",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Partie Mondiale du Millionnaire"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[m&&(0,r.jsxs)("p",{className:"text-sm text-neutral-400 flex items-center gap-2",children:["Connect\xe9: ",(0,r.jsxs)("span",{className:"text-emerald-400 flex items-center gap-1",children:[eb.includes(m)&&(0,r.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),m]})]}),d&&(0,r.jsx)("span",{className:"px-2 py-1 rounded bg-red-700 text-xs font-semibold",children:"ADMIN"})]})]}),k&&P&&(0,r.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-700/50 rounded-lg p-3",children:[(0,r.jsx)("p",{className:"text-emerald-300 text-sm",children:"✅ Vous \xeates automatiquement inscrit \xe0 la partie mondiale !"}),(0,r.jsxs)("p",{className:"text-neutral-400 text-xs mt-1",children:["Pseudo: ",G||m]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full",children:[(0,r.jsx)("button",{onClick:async()=>{try{await (0,h.SC)("/api/auth/logout",{method:"POST"})}catch(e){}try{if("undefined"!=typeof document){let e="Thu, 01 Jan 1970 00:00:00 GMT";document.cookie="hm_auth=; expires="+e+"; path=/",document.cookie="hm_csrf=; expires="+e+"; path=/",document.cookie="hm_guest=; expires="+e+"; path=/"}}catch(e){}try{window.localStorage.removeItem("HM_TOKEN")}catch(e){}try{window.localStorage.removeItem("hm-session")}catch(e){}(0,o.Ov)(),a(!1),u(!1),f(""),e.replace("/login")},className:"px-4 py-2 rounded bg-rose-700 hover:bg-rose-600 w-full sm:w-auto",children:"Se d\xe9connecter"}),(0,r.jsx)("button",{onClick:eK,className:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500 w-full sm:w-auto",children:"Inviter un ami (gagne 1M$)"}),(0,r.jsx)("button",{onClick:eY,className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 w-full sm:w-auto",children:"Partager le jeu"}),(0,r.jsx)("a",{href:"mailto:?subject=".concat(encodeURIComponent("Rejoins le jeu du Millionnaire"),"&body=").concat(encodeURIComponent("Rejoins-moi: "+eW)),className:"px-4 py-2 rounded bg-indigo-700 hover:bg-indigo-600 text-center w-full sm:w-auto",children:"Inviter par email"})]}),e_&&(0,r.jsxs)("div",{className:"text-xs text-neutral-300",children:["Lien d'invitation: ",(0,r.jsx)("a",{href:e_,className:"underline break-all",children:e_})]}),(eX||$)&&(0,r.jsx)("p",{className:"text-xs text-neutral-400",children:eX||$}),ep&&(0,r.jsx)("p",{className:"text-xs text-emerald-400",children:"Invitation appliqu\xe9e. Merci !"}),O&&(0,r.jsx)("p",{className:"text-sm text-emerald-400",children:O}),q&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:q})]})]}):(0,r.jsxs)("section",{className:"space-y-3",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Connexion requise"}),(0,r.jsx)("p",{className:"text-neutral-300",children:"Veuillez vous connecter pour cr\xe9er ou rejoindre une partie."}),(0,r.jsx)(l.default,{href:"/login",className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 inline-block",children:"Aller \xe0 la page de connexion"})]}),(0,r.jsx)(x,{title:"Tableau de bord",defaultOpen:!0,maxHeight:"500px",itemCount:e0.length,children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("p",{className:"text-sm text-neutral-300 mb-2",children:["Classement (rafra\xeechissement manuel) — statut: ",E]}),(0,r.jsx)("div",{className:"flex gap-2 mb-4",children:(0,r.jsx)("button",{onClick:ez,className:"px-3 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-sm",children:"Actualiser"})}),(0,r.jsx)("div",{className:"bg-neutral-900 rounded border border-neutral-800 overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left",children:[(0,r.jsx)("th",{className:"p-2",children:"#"}),(0,r.jsx)("th",{className:"p-2",children:"Joueur"}),(0,r.jsx)("th",{className:"p-2",children:"Valeur nette"})]})}),(0,r.jsx)("tbody",{children:e0.map((e,t)=>(0,r.jsxs)("tr",{className:"border-t border-neutral-800",children:[(0,r.jsx)("td",{className:"p-2",children:t+1}),(0,r.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[eb.includes(e.nickname)&&(0,r.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),e.nickname]}),(0,r.jsx)("td",{className:"p-2",children:(0,p.l)(e.netWorth)})]},e.playerId))})]})})]})}),D.length>0&&(0,r.jsx)(x,{title:"Joueurs",defaultOpen:!1,maxHeight:"600px",itemCount:D.length,children:(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("ul",{className:"space-y-2 text-sm text-neutral-300",children:D.map(e=>(0,r.jsxs)("li",{className:"border border-neutral-800 rounded px-3 py-2 bg-neutral-900",children:[(0,r.jsxs)("div",{className:"text-base font-medium mb-2 flex items-center gap-2",children:[eb.includes(e.nickname)&&(0,r.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),e.nickname]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsxs)("span",{children:["Cash: ",(0,p.l)(e.cash)," | Net: ",(0,p.l)(e.netWorth)]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{title:"Voir le portefeuille",onClick:()=>eG(e),className:"px-2 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-xs",children:"Voir portefeuille"}),d&&(0,r.jsx)("button",{title:"Supprimer ce joueur",onClick:async()=>{if(k&&window.confirm("Supprimer ".concat(e.nickname," ? Tous ses biens, annonces et positions seront effac\xe9s.")))try{await (0,h.SC)("/api/games/".concat(k,"/players/").concat(e.id),{method:"DELETE"}),z("Joueur supprim\xe9: ".concat(e.nickname)),ez()}catch(e){L(e instanceof Error?e.message:"\xc9chec de suppression")}},className:"px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Poubelle"})]})]})]},e.id))})})}),d&&(0,r.jsxs)("section",{className:"space-y-2 border border-red-900/40 bg-red-950/20 rounded p-3",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-300",children:"Admin"}),(0,r.jsx)("p",{className:"text-sm text-red-200/80",children:"Contr\xf4les r\xe9serv\xe9s \xe0 l'administrateur. Le red\xe9marrage efface toutes les donn\xe9es de la partie."}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:e$,className:"px-3 py-2 rounded bg-orange-600 hover:bg-orange-500 text-sm",children:"D\xe9marrer"}),(0,r.jsx)("button",{onClick:eJ,className:"px-3 py-2 rounded bg-red-700 hover:bg-red-600 text-sm",children:"Red\xe9marrer (destructif)"})]}),(0,r.jsx)(v,{gameId:k,onAdvanced:()=>{ez()}})]}),(0,r.jsxs)("section",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 w-full",children:[(0,r.jsx)(l.default,{href:"/immobilier",className:"px-4 py-2 rounded bg-sky-600 hover:bg-sky-500 text-center w-full",children:"Immobilier"}),(0,r.jsx)(l.default,{href:"/bourse",className:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500 text-center w-full",children:"Bourse"}),(0,r.jsx)(l.default,{href:"/listings",className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-center w-full",children:"Annonces"}),(0,r.jsx)(l.default,{href:"/summary",className:"px-4 py-2 rounded bg-amber-600 hover:bg-amber-500 text-center w-full",children:"R\xe9sum\xe9"}),(0,r.jsx)(l.default,{href:"/drag",className:"px-4 py-2 rounded bg-rose-600 hover:bg-rose-500 text-center w-full",children:"\uD83C\uDFC1 Drag Racing"}),(0,r.jsx)(l.default,{href:"/quiz",className:"px-4 py-2 rounded bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 font-bold text-center w-full",children:"\uD83D\uDCB0 Quiz"})]}),(0,r.jsxs)("section",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3 w-full",children:[(0,r.jsx)(l.default,{href:"/confidentialite",className:"px-4 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-center w-full",children:"Politique de confidentialit\xe9"}),(0,r.jsx)(l.default,{href:"/suppression-compte",className:"px-4 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-center w-full",children:"Suppression de compte"})]}),(0,r.jsx)("section",{className:"mt-4 w-full",children:(0,r.jsx)(l.default,{href:"/parametres",className:"block px-4 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-center w-full",children:"Param\xe8tres"})}),(0,r.jsx)("section",{className:"w-full",children:(0,r.jsx)(l.default,{href:"/bonus",className:"block px-6 py-3 rounded-lg bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 font-bold text-center w-full text-lg shadow-lg transition-all hover:scale-105",children:"\uD83D\uDCFA Bonus Gratuit - Gagnez $1,000,000 !"})}),W&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-start justify-center p-4",onClick:()=>_(null),children:(0,r.jsxs)("div",{className:"w-full max-w-4xl bg-neutral-900 border border-neutral-800 rounded-lg flex flex-col max-h-[85vh]",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-800",children:[(0,r.jsxs)("h4",{className:"font-semibold",children:["Portefeuille — ",W.nickname]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["number"==typeof(null==eu?void 0:eu.remaining)&&(0,r.jsxs)("span",{className:"text-xs px-2 py-1 rounded bg-emerald-800/50 border border-emerald-700 text-emerald-200",children:["Questions en banque: ",eu.remaining]}),(null==eu?void 0:eu.categories)&&eu.categories.length>0?(0,r.jsxs)("div",{className:"flex items-center gap-1 flex-wrap max-w-[60vw]",children:[eu.categories.slice(0,5).map(e=>(0,r.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:[e.category," ",e.remaining]},e.category)),eu.categories.length>5&&(0,r.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:["+",eu.categories.length-5," autres"]})]}):(null==eu?void 0:eu.remainingByCategory)&&(0,r.jsx)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:"Finance ".concat(eu.remainingByCategory.finance," \xb7 \xc9conomie ").concat(eu.remainingByCategory.economy," \xb7 Immo ").concat(eu.remainingByCategory.realEstate)})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-semibold mb-2",children:"Immobilier"}),0===H.length?(0,r.jsx)("p",{className:"text-sm text-neutral-400",children:"Aucun bien."}):(0,r.jsxs)("table",{className:"w-full text-sm bg-neutral-950 border border-neutral-800 rounded",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left",children:[(0,r.jsx)("th",{className:"p-2",children:"Bien"}),(0,r.jsx)("th",{className:"p-2",children:"Valeur"}),(0,r.jsx)("th",{className:"p-2",children:"Dette"})]})}),(0,r.jsx)("tbody",{children:H.map(e=>{var t,a,l,n,s,i;return(0,r.jsxs)("tr",{className:"border-t border-neutral-800",children:[(0,r.jsxs)("td",{className:"p-2",children:[null!==(l=null===(t=e.template)||void 0===t?void 0:t.name)&&void 0!==l?l:"Bien",(0,r.jsx)("div",{className:"text-xs text-neutral-500",children:null!==(n=null===(a=e.template)||void 0===a?void 0:a.city)&&void 0!==n?n:""})]}),(0,r.jsx)("td",{className:"p-2",children:(0,p.l)(Number(null!==(s=e.currentValue)&&void 0!==s?s:0))}),(0,r.jsx)("td",{className:"p-2",children:(0,p.l)(Number(null!==(i=e.mortgageDebt)&&void 0!==i?i:0))})]},e.id)})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-semibold mb-2",children:"Bourse"}),0===Z.length?(0,r.jsx)("p",{className:"text-sm text-neutral-400",children:"Aucune position."}):(0,r.jsxs)("table",{className:"w-full text-sm bg-neutral-950 border border-neutral-800 rounded",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left",children:[(0,r.jsx)("th",{className:"p-2",children:"Actif"}),(0,r.jsx)("th",{className:"p-2",children:"Qt\xe9"}),(0,r.jsx)("th",{className:"p-2",children:"Prix moy."}),(0,r.jsx)("th",{className:"p-2",children:"Valeur"}),(0,r.jsx)("th",{className:"p-2",children:"Gain %"})]})}),(0,r.jsx)("tbody",{children:Z.map(e=>{var t,a,l,n,s;let i=null!==(t=K[e.symbol])&&void 0!==t?t:e.avgPrice,o=Number(null!==(a=e.quantity)&&void 0!==a?a:0)*Number(null!=i?i:0),c=Number(null!==(l=e.avgPrice)&&void 0!==l?l:0)||0,d=c>0?(Number(null!=i?i:0)-c)/c*100:0;return(0,r.jsxs)("tr",{className:"border-t border-neutral-800",children:[(0,r.jsx)("td",{className:"p-2",children:e.symbol}),(0,r.jsx)("td",{className:"p-2",children:Number(null!==(n=e.quantity)&&void 0!==n?n:0).toFixed(2)}),(0,r.jsxs)("td",{className:"p-2",children:["$",Number(null!==(s=e.avgPrice)&&void 0!==s?s:0).toFixed(2)]}),(0,r.jsxs)("td",{className:"p-2",children:["$",o.toFixed(2)]}),(0,r.jsx)("td",{className:"p-2",children:(0,r.jsxs)("span",{className:d>=0?"text-emerald-400":"text-red-400",children:[d.toFixed(2),"%"]})})]},e.id)})})]})]})]}),(0,r.jsx)("div",{className:"px-4 pb-4",children:(0,r.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,r.jsx)("button",{className:"px-3 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-sm",onClick:()=>eo(!0),disabled:ei&&en,children:ei?en?"Calcul en cours…":"Recalculer la projection":"Afficher la projection 10 ans"}),ei&&er.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,r.jsx)("h5",{className:"font-semibold",children:"Projection 10 ans (valeur nette totale)"}),(0,r.jsxs)("span",{className:"text-xs text-neutral-400",children:["de ",(0,p.l)(Math.round(er[0].net))," \xe0 ",(0,p.l)(Math.round(er[er.length-1].net))]})]}),(0,r.jsx)(function(e){let{data:t}=e;if(!t||0===t.length)return null;let a=Math.min(...t.map(e=>e.net)),l=Math.max(...t.map(e=>e.net)),n=a===l?.95*a:.98*a,s=a===l?1.05*l:1.02*l,i=e=>28+744*e/Math.max(1,t.length-1),o=e=>172-(e-n)*144/Math.max(1,s-n),c=t.map((e,t)=>"".concat(i(t),",").concat(o(e.net))).join(" "),d=e=>e>=1e6?"".concat((e/1e6).toFixed(2)," M$"):e>=1e3?"".concat((e/1e3).toFixed(1)," k$"):"$".concat(Math.round(e));return(0,r.jsx)("div",{className:"w-full overflow-x-auto",children:(0,r.jsxs)("svg",{viewBox:"0 0 ".concat(800," ").concat(200),className:"w-full h-48 bg-neutral-950 border border-neutral-800 rounded",children:[(0,r.jsx)("line",{x1:28,y1:172,x2:772,y2:172,stroke:"#333"}),(0,r.jsx)("line",{x1:28,y1:28,x2:28,y2:172,stroke:"#333"}),(0,r.jsx)("text",{x:28,y:20,fill:"#9ca3af",fontSize:"10",textAnchor:"start",children:d(s)}),(0,r.jsx)("text",{x:28,y:184,fill:"#9ca3af",fontSize:"10",textAnchor:"start",children:d(n)}),(0,r.jsx)("polyline",{fill:"none",stroke:"#22c55e",strokeWidth:2,points:c})]})})},{data:er})]})]})})]}),(0,r.jsx)("div",{className:"px-4 py-3 border-t border-neutral-800 flex justify-center",children:(0,r.jsx)("button",{onClick:()=>_(null),className:"px-4 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-sm",children:"Fermer"})})]})})]}),ex&&(0,r.jsx)(c.default,{onClose:()=>eh(!1)})]})}function v(e){let{gameId:t,onAdvanced:a}=e,[l,n]=(0,s.useState)(4),[i,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null),u=(0,s.useCallback)(async()=>{if(!t){d("GameId manquant");return}o(!0),d(null);try{let e=Math.max(1,Math.min(520,l)),r=await (0,h.SC)("/api/games/".concat(t,"/advance-weeks?weeks=").concat(e),{method:"POST"});d("Avanc\xe9 de ".concat(r.weeksApplied," semaines en ").concat(r.durationMs,"ms.")),a&&a()}catch(e){d((null==e?void 0:e.message)||"\xc9chec avance")}finally{o(!1)}},[t,l,a]);return(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-400",children:"Avancer le temps de jeu (ticks hebdomadaires). 1h serveur = 1 semaine simul\xe9e."}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"number",min:1,max:520,value:l,onChange:e=>n(Number(e.target.value)||1),className:"w-20 px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-sm"}),(0,r.jsx)("button",{disabled:i,onClick:u,className:"px-3 py-1.5 rounded bg-purple-700 hover:bg-purple-600 disabled:opacity-50 text-sm",children:i?"Avance…":"Avancer ".concat(l," semaine").concat(l>1?"s":"")})]}),c&&(0,r.jsx)("p",{className:"text-xs text-neutral-300",children:c})]})}function j(){let e=new Date("2025-12-31T23:00:00-05:00"),[t,a]=(0,s.useState)(()=>new Date);if((0,s.useEffect)(()=>{let e=setInterval(()=>a(new Date),6e4);return()=>clearInterval(e)},[]),t>e)return null;let n=Math.max(0,Math.floor((e.getTime()-t.getTime())/864e5));return(0,r.jsxs)("div",{className:"rounded-lg border border-amber-600 bg-gradient-to-r from-amber-700/60 to-yellow-700/50 p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2 shadow",children:[(0,r.jsx)("div",{className:"text-sm md:text-base font-semibold text-amber-100 flex items-center gap-2",children:(0,r.jsx)("span",{children:"\uD83C\uDFC6 Prix sp\xe9cial: Carte cadeau Amazon 20$ attribu\xe9e le 31 d\xe9cembre 2025 au joueur #1 (valeur nette)."})}),(0,r.jsxs)("div",{className:"text-xs text-amber-200 flex items-center gap-3",children:[(0,r.jsxs)("span",{children:["Compte \xe0 rebours: ",n," jour",1!==n?"s":""]}),(0,r.jsx)(l.default,{href:"/quiz",className:"px-3 py-1 rounded bg-amber-500 hover:bg-amber-400 text-black font-medium text-xs",children:"Booster ton net"})]})]})}},1468:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return n}});var r=a(7821),l=a(8078);function n(e){let{onClose:t,storageKey:a="hm-tutorial-home"}=e,n=[{title:"Objectif Global",content:"Fais cro\xeetre ta valeur nette en combinant 4 moteurs: Immobilier (cashflow & appr\xe9ciation), Bourse (diversification & dividendes), Quiz (acc\xe9l\xe9rateur de capital), Pari (risque contr\xf4l\xe9). Garde toujours un coussin de liquidit\xe9s pour saisir les opportunit\xe9s et \xe9viter de bloquer ton jeu."},{title:"Immobilier — Achat & Stocks",content:"Dans ‘Immobilier’, choisis un bien (ex: six‑plex, tour 50, tour 100). V\xe9rifie loyer, taux et charges. Les boutons ‘refill’ et ‘+10’ maintiennent l’offre (6‑plex→10, tours50→10, tours100→5). Diversifie entre flux de loyers et valeur pour refinancements futurs."},{title:"Bourse — Positions & Dividendes",content:"Dans ‘Bourse’, s\xe9lectionne un symbole (SP500, TSX, QQQ, TLT, GLD). Les dividendes tombent p\xe9riodiquement et renforcent ton cash. M\xe9lange actifs cycliques (croissance) et d\xe9fensifs (obligations/or) pour lisser la volatilit\xe9 immobili\xe8re."},{title:"Quiz — Session de 10 Questions",content:"Consomme 1 token pour lancer: Q1-2 faciles, Q3-5 moyennes, Q6-10 difficiles. Chaque bonne r\xe9ponse double ta somme de session (5k→10k→20k...). Tu peux encaisser \xe0 tout moment avant une erreur. Cat\xe9gories vari\xe9es (anatomy, finance, g\xe9n\xe9ral). Optimise en s\xe9curisant apr\xe8s une bonne s\xe9rie."},{title:"Pari — 3 D\xe9s \xe0 Risque",content:"Mise (≥5 000$) puis lance 3 d\xe9s: double = x2, triple ou suite = x3, sinon perte de la mise. Ne sur‑expose pas ton capital avant un achat immobilier cl\xe9. Le volet Pari est un acc\xe9l\xe9rateur ponctuel, pas un moteur principal durable."},{title:"Strat\xe9gies Rapides",content:"D\xe9marrage: 1–2 six‑plex + quiz pour booster le cash. Milieu: entr\xe9e en bourse, viser tour 50 pour masse critique. Fin: grandes structures + quiz difficile avec encaissement prudent. Toujours anticiper p\xe9nurie: utiliser refill avant manque de stock."},{title:"D\xe9pannage & V\xe9rifications",content:"Probl\xe8me quiz? V\xe9rifie: tokens >0, endpoint /api/games/<id>/quiz/status = 200 (console r\xe9seau). Proxy /api/* corrige CORS. Besoin d’aide: lien contact dans la page ‘Contact’. Garde tes logs propres avant de reporter un bug."},{title:"Invitations Bonus",content:"Utilise ‘Inviter un ami’ sur l’accueil: quand valid\xe9 tu re\xe7ois 1 000 000$. Profite-en pour cr\xe9er un mini r\xe9seau et comparer vos strat\xe9gies de portefeuille."}],[s,i]=(0,l.useState)(0),o=(0,l.useRef)(null),c=(0,l.useRef)(null),d=(0,l.useRef)(null),u=(0,l.useRef)(null),[m,x]=(0,l.useState)(!1);function h(e,t,a,r){if(null===a||null===r)return;let l=e-a;Math.abs(l)>Math.abs(t-r)&&Math.abs(l)>40&&(l<0&&s<n.length-1?i(e=>Math.min(n.length-1,e+1)):l>0&&s>0&&i(e=>Math.max(0,e-1)))}function p(e){if(0===e.changedTouches.length){o.current=null,c.current=null;return}let t=e.changedTouches[0];h(t.clientX,t.clientY,o.current,c.current),o.current=null,c.current=null}return(0,r.jsx)("div",{className:"fixed inset-0 z-[9999] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-xl w-full bg-white rounded-2xl shadow-2xl text-gray-900",onTouchStart:function(e){let t=e.touches[0];o.current=t.clientX,c.current=t.clientY},onTouchEnd:p,onTouchCancel:p,onPointerDown:function(e){"mouse"!==e.pointerType&&(d.current=e.clientX,u.current=e.clientY)},onPointerUp:function(e){"mouse"!==e.pointerType&&(h(e.clientX,e.clientY,d.current,u.current),d.current=null,u.current=null)},onPointerCancel:()=>{d.current=null,u.current=null},children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"text-xl font-bold mb-2",children:n[s].title}),(0,r.jsx)("div",{className:"text-sm text-gray-700 mb-6",children:n[s].content}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{className:"text-xs text-gray-600 flex items-center gap-2 select-none",children:[(0,r.jsx)("input",{type:"checkbox",checked:m,onChange:e=>x(e.target.checked)}),"Ne plus afficher automatiquement"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[s>0&&(0,r.jsx)("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>i(e=>Math.max(0,e-1)),children:"← Pr\xe9c\xe9dent"}),s<n.length-1?(0,r.jsx)("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>i(e=>Math.min(n.length-1,e+1)),children:"Suivant →"}):(0,r.jsx)("button",{className:"px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:function(){try{m&&localStorage.setItem(a,"1")}catch(e){}t()},children:"C’est parti"})]})]})]}),(0,r.jsx)("div",{className:"px-6 pb-4 text-center",children:(0,r.jsx)("div",{className:"inline-flex gap-1",children:n.map((e,t)=>(0,r.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(t===s?"bg-indigo-600":"bg-gray-300")},t))})})]})})}},2044:function(e,t,a){"use strict";function r(e){let t=Number(e);return isFinite(t)?"$".concat(Math.round(t).toLocaleString()):"$0"}function l(e){return 52*Number(e||0)/12}a.d(t,{P:function(){return l},l:function(){return r}})},3175:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var r=a(8078);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),s=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:d="",children:u,iconNode:m,...x}=e;return(0,r.createElement)("svg",{ref:t,...c,width:l,height:l,stroke:a,strokeWidth:s?24*Number(n)/Number(l):n,className:i("lucide",d),...!u&&!o(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let a=(0,r.forwardRef)((a,n)=>{let{className:o,...c}=a;return(0,r.createElement)(d,{ref:n,iconNode:t,className:i("lucide-".concat(l(s(e))),"lucide-".concat(e),o),...c})});return a.displayName=s(e),a}},168:function(e,t,a){"use strict";var r=a(7462);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[233,640,320,115,205,744],function(){return e(e.s=3657)}),_N_E=e.O()}]);