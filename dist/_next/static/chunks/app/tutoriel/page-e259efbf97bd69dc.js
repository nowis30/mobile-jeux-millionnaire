(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{4222:function(e,t,n){Promise.resolve().then(n.bind(n,3837))},3837:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(7821),o=n(8078),l=n(4233),s=n(9513),a=n(2475);let i=n.n(a)()(()=>n.e(468).then(n.bind(n,1468)),{loadableGenerated:{webpack:()=>[1468]},ssr:!1});function c(){var e;let[t,n]=(0,o.useState)(null),[a,c]=(0,o.useState)(null),[u,d]=(0,o.useState)(null),[f,h]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!1);(0,o.useEffect)(()=>{try{let e=localStorage.getItem("hm-session");if(!e)return;let t=JSON.parse(e);(null==t?void 0:t.gameId)&&n(t.gameId),(null==t?void 0:t.playerId)&&c(t.playerId)}catch(e){}},[]),(0,o.useEffect)(()=>{t&&(async()=>{try{h(!0);let e={"X-CSRF":"1"};a&&(e["X-Player-ID"]=a);let n=await fetch("".concat(s.Sg,"/api/games/").concat(t,"/quiz/status"),{credentials:"include",headers:e});if(!n.ok)return;let r=await n.json();d(r)}catch(e){}finally{h(!1)}})()},[t,a]);let x=(0,o.useMemo)(()=>{var e;let t=null!==(e=null==u?void 0:u.secondsUntilNextToken)&&void 0!==e?e:0;return!t||t<=0?null:"".concat(Math.floor(t/60)," min ").concat(t%60," sec")},[null==u?void 0:u.secondsUntilNextToken]);return(0,r.jsxs)("main",{className:"max-w-none",children:[(0,r.jsx)("section",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"prose prose-invert max-w-none",children:[(0,r.jsx)("h2",{className:"mb-1",children:"Tutoriel Interactif — H\xe9ritier Millionnaire"}),(0,r.jsx)("p",{className:"m-0 text-neutral-300",children:"D\xe9couvre le jeu pas \xe0 pas avec de petites bulles guid\xe9es."})]}),(0,r.jsx)("button",{type:"button",onClick:()=>p(!0),className:"px-4 py-2 rounded-md bg-indigo-600 hover:bg-indigo-500 text-white font-semibold shadow",children:"Lancer le tutoriel"})]})}),(0,r.jsx)("section",{className:"mb-10",children:(0,r.jsxs)("div",{className:"rounded-xl border border-yellow-600/40 bg-gradient-to-r from-yellow-700/30 to-orange-700/30 p-5 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-6",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-sm text-yellow-200/90 font-medium",children:"Vos Tokens Quiz"}),(0,r.jsx)("div",{className:"text-4xl font-extrabold tracking-tight text-yellow-300",children:f?"…":null!==(e=null==u?void 0:u.tokens)&&void 0!==e?e:0}),x&&(0,r.jsxs)("div",{className:"text-xs text-yellow-200/80",children:["Prochain token dans ",x]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[(0,r.jsx)(l.default,{href:"/quiz",className:"".concat((null==u?void 0:u.tokens)&&u.tokens>0?"bg-yellow-500 hover:bg-yellow-400 text-black":"bg-neutral-700 text-neutral-300 cursor-not-allowed"," flex-1 sm:flex-none px-4 py-2 rounded font-semibold text-sm shadow"),"aria-disabled":!(null==u?void 0:u.tokens)||u.tokens<=0,children:"\uD83C\uDFAE D\xe9marrer"}),(0,r.jsx)(l.default,{href:"/quiz",className:"px-4 py-2 rounded bg-neutral-800 hover:bg-neutral-700 border border-neutral-700 text-sm",children:"R\xe8gles"})]})]})}),(0,r.jsxs)("section",{className:"mb-16",children:[(0,r.jsxs)("div",{className:"rounded-lg border border-neutral-800 bg-neutral-900 p-5 text-sm",children:[(0,r.jsx)("p",{className:"text-neutral-300 mb-2",children:"Tu pr\xe9f\xe8res lire? Retrouve les r\xe8gles essentielles sur la page Quiz."}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(l.default,{href:"/quiz",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 border border-neutral-700 text-sm",children:"R\xe8gles du Quiz"}),(0,r.jsx)(l.default,{href:"/contact",className:"px-3 py-2 rounded bg-neutral-800 hover:bg-neutral-700 border border-neutral-700 text-sm",children:"Contact"})]})]}),(0,r.jsx)("p",{className:"mt-4 text-xs text-neutral-500",children:"Derni\xe8re mise \xe0 jour: 8 novembre 2025"})]}),m&&(0,r.jsx)(i,{onClose:()=>p(!1),storageKey:"hm-tutoriel-page"})]})}},9513:function(e,t,n){"use strict";n.d(t,{MS:function(){return c},SC:function(){return h},Sg:function(){return i}});var r=n(5050);let o="https://server-jeux-millionnaire.onrender.com",l=!!window.Capacitor,s=/localhost:3000$/.test(window.location.host),a="1"===r.env.NEXT_PUBLIC_FORCE_ABS,i=l||a||!s?o:"";console.log("[API] ABS_BACKEND:",o),console.log("[API] isCapacitor:",l),console.log("[API] isLocalDev:",s),console.log("[API] forceAbs:",a),console.log("[API] API_BASE:",i);class c extends Error{constructor(e,t){super(t),this.name="ApiError",this.status=e,Object.setPrototypeOf(this,c.prototype)}}let u=null,d="HM_TOKEN";async function f(){try{var e;if(u)return u;let t=await fetch("".concat(i,"/api/auth/csrf"),{credentials:"include"});if(!t.ok)return null;let n=await t.json();return u=null!==(e=null==n?void 0:n.csrf)&&void 0!==e?e:null}catch(e){return null}}async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.method||"GET").toUpperCase(),r={...t.headers};if(console.log("[API] ".concat(n," ").concat(i).concat(e)),["POST","PUT","PATCH","DELETE"].includes(n)){let e=await f();e&&(r["x-csrf-token"]=e)}let o=function(){try{return window.localStorage.getItem(d)}catch(e){return null}}();o&&(r.Authorization="Bearer ".concat(o));let l=function(){try{let e=window.localStorage.getItem("hm-session");if(!e)return null;return JSON.parse(e).playerId||null}catch(e){return null}}();l&&(r["X-Player-ID"]=l);try{let n=await fetch("".concat(i).concat(e),{credentials:"include",...t,headers:r});if(console.log("[API] Response ".concat(n.status," ").concat(n.statusText)),401===n.status)try{if(o){let n=await fetch("".concat(i,"/api/auth/refresh"),{credentials:"include",headers:{Authorization:"Bearer ".concat(o)}});if(n.ok){let o=await n.json().catch(()=>({}));if(null==o?void 0:o.token){try{window.localStorage.setItem(d,o.token)}catch(e){}r.Authorization="Bearer ".concat(o.token)}let l=await fetch("".concat(i).concat(e),{credentials:"include",...t,headers:r});if(!l.ok)throw new c(l.status,l.statusText);if(204===l.status)return;return await l.json()}}}catch(e){}if(!n.ok)try{if((n.headers.get("content-type")||"").includes("application/json")){let e=await n.json(),t=e&&(e.error||e.message)?String(e.error||e.message):"Erreur ".concat(n.status);throw new c(n.status,t)}{let e=(await n.text()||"").trim(),t=e.length?e:n.statusText?"".concat(n.status," ").concat(n.statusText):"Erreur ".concat(n.status);throw new c(n.status,t)}}catch(t){let e=n.statusText?"".concat(n.status," ").concat(n.statusText):"Erreur ".concat(n.status);if(t instanceof c)throw t;throw new c(n.status,e)}if(204===n.status)return;return await n.json()}catch(e){throw console.error("[API] Fetch error:",e),new c(0,"Erreur r\xe9seau: ".concat(e.message||"Failed to fetch"))}}},5050:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(9295)},9295:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function l(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var i=[],c=!1,u=-1;function d(){c&&r&&(c=!1,r.length?i=r.concat(i):u=-1,i.length&&f())}function f(){if(!c){var e=a(d);c=!0;for(var t=i.length;t;){for(r=i,i=[];++u<t;)r&&r[u].run();u=-1,t=i.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new h(e,t)),1!==i.length||c||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var l=n[e]={exports:{}},s=!0;try{t[e](l,l.exports,r),s=!1}finally{s&&delete n[e]}return l.exports}r.ab="//";var o=r(229);e.exports=o}()},2475:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let r=n(3641);n(7821),n(8078);let o=r._(n(2078));function l(e,t){var n;let r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let l={...r,...t};return(0,o.default)({...l,modules:null==(n=l.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2209:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return o}});let r=n(1905);function o(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return n}},2078:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let r=n(7821),o=n(8078),l=n(2209),s=n(3178);function a(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(a(()=>null)),loading:null,ssr:!0},c=function(e){let t={...i,...e},n=(0,o.lazy)(()=>t.loader().then(a)),c=t.loading;function u(e){let a=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(s.PreloadCss,{moduleIds:t.modules}):null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(o.Suspense,{fallback:a,children:i})}return u.displayName="LoadableComponent",u}},3178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let r=n(7821),o=n(4116);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,o.getExpectedRequestStore)("next/dynamic css"),l=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,r.jsx)(r.Fragment,{children:l.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[233,115,205,744],function(){return e(e.s=4222)}),_N_E=e.O()}]);