(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{3897:function(e,t,s){Promise.resolve().then(s.bind(s,8866))},8866:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var n=s(7821),a=s(8078),r=s(4233),l=s(168),i=s(5343),c=s(9513),o=s(2044);function d(){let[e,t]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"rounded-xl border border-indigo-600/60 bg-indigo-900/20 p-4",children:[(0,n.jsxs)("button",{onClick:()=>t(!e),className:"w-full flex items-center justify-between text-left",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-indigo-200",children:"\uD83D\uDCA1 C'est quoi une hypoth\xe8que ? (pour les enfants)"}),(0,n.jsx)("span",{className:"text-2xl text-indigo-300",children:e?"âˆ’":"+"})]}),e&&(0,n.jsxs)("div",{className:"mt-4 space-y-4 text-sm text-neutral-200 animate-fade-in",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h4",{className:"font-semibold text-indigo-300 text-base",children:"C'est quoi une hypoth\xe8que ?"}),(0,n.jsxs)("p",{className:"leading-relaxed",children:["Quand tu veux acheter un immeuble, tu n'as presque jamais tout l'argent tout de suite. Tu donnes une partie de l'argent au d\xe9but, par exemple ",(0,n.jsx)("strong",{children:"20%"}),". Cette partie-l\xe0 s'appelle la ",(0,n.jsx)("strong",{className:"text-emerald-300",children:"mise de fonds"}),"."]}),(0,n.jsxs)("p",{className:"leading-relaxed",children:["Le reste de l'argent, la banque te le pr\xeate : c'est \xe7a, l'",(0,n.jsx)("strong",{className:"text-amber-300",children:"hypoth\xe8que"}),". Tu dois ensuite rembourser l'hypoth\xe8que un peu chaque mois, avec des ",(0,n.jsx)("strong",{children:"int\xe9r\xeats"}),"(c'est l'argent que tu dois payer en plus \xe0 la banque pour te remercier de t'avoir pr\xeat\xe9 l'argent)."]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h4",{className:"font-semibold text-indigo-300 text-base",children:"Pourquoi 20% ?"}),(0,n.jsxs)("p",{className:"leading-relaxed",children:["Si tu mets 20% de mise de fonds, \xe7a veut dire que tu paies une partie de l'immeuble avec ton argent, et seulement ",(0,n.jsx)("strong",{children:"80%"})," est emprunt\xe9 \xe0 la banque."]}),(0,n.jsxs)("p",{className:"leading-relaxed",children:["Plus ta mise de fonds est grande, moins tu as d'hypoth\xe8que \xe0 rembourser et",(0,n.jsx)("strong",{className:"text-emerald-300",children:" moins tu paies d'int\xe9r\xeats au total"}),". C'est pour \xe7a que c'est bien d'\xe9conomiser !"]})]}),(0,n.jsxs)("div",{className:"rounded bg-neutral-900/50 border border-neutral-700 p-3 space-y-2",children:[(0,n.jsx)("h4",{className:"font-semibold text-amber-300 text-base",children:"\uD83D\uDCCA Exemple simple :"}),(0,n.jsxs)("ul",{className:"space-y-1 list-disc list-inside text-sm",children:[(0,n.jsxs)("li",{children:["Prix de l'immeuble : ",(0,n.jsx)("strong",{children:"100 000 $"})]}),(0,n.jsxs)("li",{children:["Mise de fonds (20%) : ",(0,n.jsx)("strong",{className:"text-emerald-300",children:"20 000 $"}),(0,n.jsx)("span",{className:"text-neutral-400",children:" (ton argent)"})]}),(0,n.jsxs)("li",{children:["Hypoth\xe8que (80%) : ",(0,n.jsx)("strong",{className:"text-amber-300",children:"80 000 $"}),(0,n.jsx)("span",{className:"text-neutral-400",children:" (pr\xeat de la banque)"})]})]}),(0,n.jsx)("p",{className:"text-xs text-neutral-400 mt-2",children:"Chaque mois, tu rembourses un peu de l'hypoth\xe8que + les int\xe9r\xeats. Au bout de plusieurs ann\xe9es, tu auras rembours\xe9 toute l'hypoth\xe8que et l'immeuble sera enti\xe8rement \xe0 toi !"})]}),(0,n.jsx)("div",{className:"bg-sky-900/30 border border-sky-700 rounded p-3",children:(0,n.jsxs)("p",{className:"text-sm",children:[(0,n.jsx)("strong",{className:"text-sky-300",children:"\uD83D\uDCAA Conseil :"})," Dans le jeu, commence avec des petits immeubles (comme des 6-plex) pour apprendre. Puis, quand tu as plus d'argent, ach\xe8te des tours et des gratte-ciel !"]})})]})]})}function u(e){let{loanAmount:t,interestRate:s,amortizationYears:r,monthlyPayment:l}=e,[i,c]=(0,a.useState)(!1),d=(()=>{let e=[],n=s/100/12,a=t;for(let t=1;t<=r;t++){let s=a,r=0,i=0;for(let e=1;e<=12&&!(a<=0);e++){let e=a*n,t=l-e;i+=e,r+=t,a=Math.max(0,a-t)}if(e.push({year:t,beginningBalance:s,totalPayment:12*l,principalPaid:r,interestPaid:i,endingBalance:a}),a<=0)break}return e})(),u=i?d:d.slice(0,5),m=d.reduce((e,t)=>e+t.interestPaid,0),x=d.reduce((e,t)=>e+t.principalPaid,0);return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"border border-sky-700/30 rounded-lg bg-sky-900/20 p-6",children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-sky-200 mb-4",children:"\uD83D\uDCCA Tableau d'amortissement"}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"bg-neutral-800/50 rounded p-3",children:[(0,n.jsx)("p",{className:"text-xs text-neutral-400 mb-1",children:"Capital emprunt\xe9"}),(0,n.jsx)("p",{className:"font-semibold text-white",children:(0,o.l)(t)})]}),(0,n.jsxs)("div",{className:"bg-neutral-800/50 rounded p-3",children:[(0,n.jsx)("p",{className:"text-xs text-neutral-400 mb-1",children:"Int\xe9r\xeats totaux"}),(0,n.jsx)("p",{className:"font-semibold text-amber-400",children:(0,o.l)(m)})]}),(0,n.jsxs)("div",{className:"bg-neutral-800/50 rounded p-3",children:[(0,n.jsx)("p",{className:"text-xs text-neutral-400 mb-1",children:"Co\xfbt total"}),(0,n.jsx)("p",{className:"font-semibold text-red-400",children:(0,o.l)(x+m)})]})]}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b border-sky-700/30 text-sky-300",children:[(0,n.jsx)("th",{className:"text-left py-2 px-2",children:"Ann\xe9e"}),(0,n.jsx)("th",{className:"text-right py-2 px-2",children:"Solde d\xe9but"}),(0,n.jsx)("th",{className:"text-right py-2 px-2",children:"Capital"}),(0,n.jsx)("th",{className:"text-right py-2 px-2",children:"Int\xe9r\xeats"}),(0,n.jsx)("th",{className:"text-right py-2 px-2",children:"Solde fin"})]})}),(0,n.jsx)("tbody",{children:u.map(e=>(0,n.jsxs)("tr",{className:"border-b border-neutral-800 hover:bg-sky-900/10",children:[(0,n.jsx)("td",{className:"py-2 px-2 text-neutral-300",children:e.year}),(0,n.jsx)("td",{className:"py-2 px-2 text-right text-neutral-300",children:(0,o.l)(e.beginningBalance)}),(0,n.jsx)("td",{className:"py-2 px-2 text-right text-emerald-400",children:(0,o.l)(e.principalPaid)}),(0,n.jsx)("td",{className:"py-2 px-2 text-right text-amber-400",children:(0,o.l)(e.interestPaid)}),(0,n.jsx)("td",{className:"py-2 px-2 text-right font-semibold text-white",children:(0,o.l)(e.endingBalance)})]},e.year))})]})}),d.length>5&&(0,n.jsx)("div",{className:"text-center mt-4",children:(0,n.jsx)("button",{onClick:()=>c(!i),className:"px-4 py-2 rounded bg-sky-800/50 hover:bg-sky-700/50 text-sky-200 text-sm font-medium transition-colors",children:i?"Voir moins":"Voir toutes les ".concat(d.length," ann\xe9es")})}),(0,n.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs text-neutral-400",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full bg-emerald-400"}),(0,n.jsx)("span",{children:"Capital : remboursement du pr\xeat"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full bg-amber-400"}),(0,n.jsx)("span",{children:"Int\xe9r\xeats : co\xfbt du financement"})]})]})]})})}function m(){let e=(0,l.useSearchParams)(),t=(0,l.useRouter)(),[s,m]=(0,a.useState)([]),[x,h]=(0,a.useState)(null),[p,f]=(0,a.useState)(!0),[j,b]=(0,a.useState)(null),[g,N]=(0,a.useState)(""),[y,v]=(0,a.useState)(""),[w,C]=(0,a.useState)(20),[P,k]=(0,a.useState)(5.5),[A,S]=(0,a.useState)(25),[T,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=localStorage.getItem("hm-session");if(e)try{let t=JSON.parse(e);t.gameId&&N(t.gameId),t.playerId&&v(t.playerId)}catch(e){}},[]);let I=(0,a.useCallback)(async()=>{try{var t;f(!0);let s=g?"?gameId=".concat(encodeURIComponent(g)):"",n=await (0,c.SC)("/api/properties/templates".concat(s));m(null!==(t=n.templates)&&void 0!==t?t:[]);let a=e.get("id")||e.get("select");if(a){let e=n.templates.find(e=>e.id===a);if(e)h(e);else try{let e=await (0,c.SC)("/api/properties/templates/".concat(a));e.template&&h(e.template)}catch(e){}}b(null)}catch(e){b(e instanceof Error?e.message:"Impossible de charger les immeubles")}finally{f(!1)}},[g,e]);(0,a.useEffect)(()=>{I()},[I]);let D=()=>{if(!x)return{downPayment:0,loanAmount:0,monthlyPayment:0,totalCost:0};let e=x.price,t=w/100*e,s=e-t,n=P/100/12,a=12*A,r=n*Math.pow(1+n,a)*s/(Math.pow(1+n,a)-1);return{downPayment:t,loanAmount:s,monthlyPayment:r,totalCost:r*a+t}},q=async()=>{if(x&&g&&y)try{E(!0),D(),await (0,c.SC)("/api/games/".concat(g,"/properties/purchase"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerId:y,templateId:x.id,mortgageRate:P/100,downPaymentPercent:w,mortgageYears:A})}),t.push("/immobilier/parc?success=true")}catch(e){b(e instanceof Error?e.message:"\xc9chec de l'achat"),E(!1)}},L=D(),R=x?x.baseRent*(x.units||1):0,B=x?x.taxes+x.insurance+x.maintenance:0,O=R-(L.monthlyPayment+B/12);return(0,n.jsx)("main",{className:"min-h-screen p-4 bg-neutral-950",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(r.default,{href:"/immobilier",className:"flex items-center gap-2 text-neutral-400 hover:text-neutral-200 transition-colors",children:[(0,n.jsx)(i.Z,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:"Retour aux opportunit\xe9s"})]}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-neutral-100",children:"\uD83C\uDFE6 Hypoth\xe8ques et Financement"})]}),(0,n.jsx)(d,{}),p&&(0,n.jsx)("div",{className:"text-center py-12 text-neutral-400",children:"Chargement des options de financement..."}),j&&(0,n.jsx)("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-4 text-red-300",children:j}),!p&&!x&&(0,n.jsxs)("div",{className:"bg-amber-900/20 border border-amber-500/50 rounded-lg p-4 text-amber-300",children:["Aucun immeuble s\xe9lectionn\xe9. ",(0,n.jsx)(r.default,{href:"/immobilier",className:"underline",children:"Recherchez un immeuble"})," pour commencer."]}),!p&&x&&(0,n.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"border border-neutral-800 rounded-lg bg-neutral-900 p-6 space-y-4",children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-neutral-100",children:"\uD83C\uDFE2 Immeuble s\xe9lectionn\xe9"}),x.imageUrl&&(0,n.jsx)("div",{className:"aspect-video w-full bg-neutral-800 rounded overflow-hidden",children:(0,n.jsx)("img",{src:x.imageUrl,alt:x.name,className:"w-full h-full object-cover"})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h4",{className:"font-semibold text-lg text-neutral-100",children:x.name}),(0,n.jsx)("p",{className:"text-sm text-neutral-400",children:x.city}),x.description&&(0,n.jsx)("p",{className:"text-sm text-neutral-300",children:x.description})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,n.jsxs)("div",{className:"bg-neutral-800/50 rounded p-3",children:[(0,n.jsx)("p",{className:"text-neutral-400",children:"Prix"}),(0,n.jsx)("p",{className:"font-semibold text-neutral-100",children:(0,o.l)(x.price)})]}),(0,n.jsxs)("div",{className:"bg-neutral-800/50 rounded p-3",children:[(0,n.jsx)("p",{className:"text-neutral-400",children:"Loyer/mois"}),(0,n.jsx)("p",{className:"font-semibold text-emerald-400",children:(0,o.l)(x.baseRent*(x.units||1))})]}),(0,n.jsxs)("div",{className:"bg-neutral-800/50 rounded p-3",children:[(0,n.jsx)("p",{className:"text-neutral-400",children:"Taxes/an"}),(0,n.jsx)("p",{className:"font-semibold text-neutral-100",children:(0,o.l)(x.taxes)})]}),(0,n.jsxs)("div",{className:"bg-neutral-800/50 rounded p-3",children:[(0,n.jsx)("p",{className:"text-neutral-400",children:"Assurance/an"}),(0,n.jsx)("p",{className:"font-semibold text-neutral-100",children:(0,o.l)(x.insurance)})]}),(0,n.jsxs)("div",{className:"bg-neutral-800/50 rounded p-3",children:[(0,n.jsx)("p",{className:"text-neutral-400",children:"Entretien/an"}),(0,n.jsx)("p",{className:"font-semibold text-neutral-100",children:(0,o.l)(x.maintenance)})]}),(0,n.jsxs)("div",{className:"bg-neutral-800/50 rounded p-3",children:[(0,n.jsx)("p",{className:"text-neutral-400",children:"Logements"}),(0,n.jsx)("p",{className:"font-semibold text-neutral-100",children:x.units||1})]})]}),(0,n.jsx)(r.default,{href:"/immobilier",className:"block w-full text-center px-4 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-white transition-colors",children:"Choisir un autre immeuble"})]})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"border border-emerald-800 rounded-lg bg-emerald-900/20 p-6 space-y-4",children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-emerald-200",children:"\uD83D\uDCB0 Calcul du financement"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:["Mise de fonds: ",w,"%"]}),(0,n.jsx)("input",{type:"range",min:"10",max:"50",step:"5",value:w,onChange:e=>C(parseInt(e.target.value)),className:"w-full"}),(0,n.jsxs)("div",{className:"flex justify-between text-xs text-neutral-400 mt-1",children:[(0,n.jsx)("span",{children:"10%"}),(0,n.jsx)("span",{children:"50%"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:["Taux d'int\xe9r\xeat: ",P.toFixed(2),"%"]}),(0,n.jsx)("input",{type:"range",min:"3",max:"10",step:"0.25",value:P,onChange:e=>k(parseFloat(e.target.value)),className:"w-full"}),(0,n.jsxs)("div",{className:"flex justify-between text-xs text-neutral-400 mt-1",children:[(0,n.jsx)("span",{children:"3%"}),(0,n.jsx)("span",{children:"10%"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:["Amortissement: ",A," ans"]}),(0,n.jsx)("input",{type:"range",min:"15",max:"30",step:"5",value:A,onChange:e=>S(parseInt(e.target.value)),className:"w-full"}),(0,n.jsxs)("div",{className:"flex justify-between text-xs text-neutral-400 mt-1",children:[(0,n.jsx)("span",{children:"15 ans"}),(0,n.jsx)("span",{children:"30 ans"})]})]})]}),(0,n.jsxs)("div",{className:"border-t border-emerald-800/50 pt-4 space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-neutral-300",children:"Prix total"}),(0,n.jsx)("span",{className:"font-semibold text-white",children:(0,o.l)(x.price)})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-neutral-300",children:"Mise de fonds"}),(0,n.jsx)("span",{className:"font-semibold text-emerald-400",children:(0,o.l)(L.downPayment)})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-neutral-300",children:"Montant hypoth\xe8que"}),(0,n.jsx)("span",{className:"font-semibold text-amber-400",children:(0,o.l)(L.loanAmount)})]}),(0,n.jsxs)("div",{className:"flex justify-between font-bold text-base pt-2 border-t border-emerald-800/50",children:[(0,n.jsx)("span",{className:"text-neutral-200",children:"Paiement mensuel"}),(0,n.jsx)("span",{className:"text-white",children:(0,o.l)(L.monthlyPayment)})]})]}),(0,n.jsxs)("div",{className:"bg-sky-900/30 border border-sky-700/50 rounded p-4 space-y-2 text-sm",children:[(0,n.jsx)("h4",{className:"font-semibold text-sky-200",children:"\uD83D\uDCCA Cashflow mensuel estim\xe9"}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-neutral-300",children:"Revenus de loyers"}),(0,n.jsxs)("span",{className:"text-emerald-400",children:["+",(0,o.l)(R)]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-neutral-300",children:"Paiement hypoth\xe8que"}),(0,n.jsxs)("span",{className:"text-red-400",children:["-",(0,o.l)(L.monthlyPayment)]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-neutral-300",children:"D\xe9penses (taxes, ass., entr.)"}),(0,n.jsxs)("span",{className:"text-red-400",children:["-",(0,o.l)(B/12)]})]}),(0,n.jsxs)("div",{className:"flex justify-between font-bold pt-2 border-t border-sky-700/50",children:[(0,n.jsx)("span",{className:"text-neutral-200",children:"Cashflow net"}),(0,n.jsx)("span",{className:O>=0?"text-emerald-400":"text-red-400",children:(0,o.l)(O)})]})]}),(0,n.jsx)("button",{onClick:q,disabled:T||L.downPayment>0&&(!g||!y),className:"w-full px-6 py-3 rounded-lg bg-emerald-600 hover:bg-emerald-500 disabled:bg-neutral-700 disabled:cursor-not-allowed font-bold text-lg transition-colors",children:T?"Achat en cours...":"Acheter avec hypoth\xe8que (".concat((0,o.l)(L.downPayment)," requis)")}),(0,n.jsxs)("p",{className:"text-xs text-neutral-400 text-center",children:["Co\xfbt total sur ",A," ans: ",(0,o.l)(L.totalCost)]})]}),L.loanAmount>0&&(0,n.jsx)(u,{loanAmount:L.loanAmount,interestRate:P,amortizationYears:A,monthlyPayment:L.monthlyPayment})]})]})]})})}function x(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)("p",{className:"text-neutral-400",children:"Chargement..."})}),children:(0,n.jsx)(m,{})})}},9513:function(e,t,s){"use strict";s.d(t,{MS:function(){return o},SC:function(){return x},Sg:function(){return c}});var n=s(5050);let a="https://server-jeux-millionnaire.onrender.com",r=!!window.Capacitor,l=/localhost:3000$/.test(window.location.host),i="1"===n.env.NEXT_PUBLIC_FORCE_ABS,c=r||i||!l?a:"";console.log("[API] ABS_BACKEND:",a),console.log("[API] isCapacitor:",r),console.log("[API] isLocalDev:",l),console.log("[API] forceAbs:",i),console.log("[API] API_BASE:",c);class o extends Error{constructor(e,t){super(t),this.name="ApiError",this.status=e,Object.setPrototypeOf(this,o.prototype)}}let d=null,u="HM_TOKEN";async function m(){try{var e;if(d)return d;let t=await fetch("".concat(c,"/api/auth/csrf"),{credentials:"include"});if(!t.ok)return null;let s=await t.json();return d=null!==(e=null==s?void 0:s.csrf)&&void 0!==e?e:null}catch(e){return null}}async function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(t.method||"GET").toUpperCase(),n={...t.headers};if(console.log("[API] ".concat(s," ").concat(c).concat(e)),["POST","PUT","PATCH","DELETE"].includes(s)){let e=await m();e&&(n["x-csrf-token"]=e)}let a=function(){try{return window.localStorage.getItem(u)}catch(e){return null}}();a&&(n.Authorization="Bearer ".concat(a));let r=function(){try{let e=window.localStorage.getItem("hm-session");if(!e)return null;return JSON.parse(e).playerId||null}catch(e){return null}}();r&&(n["X-Player-ID"]=r);try{let s=await fetch("".concat(c).concat(e),{credentials:"include",...t,headers:n});if(console.log("[API] Response ".concat(s.status," ").concat(s.statusText)),401===s.status)try{if(a){let s=await fetch("".concat(c,"/api/auth/refresh"),{credentials:"include",headers:{Authorization:"Bearer ".concat(a)}});if(s.ok){let a=await s.json().catch(()=>({}));if(null==a?void 0:a.token){try{window.localStorage.setItem(u,a.token)}catch(e){}n.Authorization="Bearer ".concat(a.token)}let r=await fetch("".concat(c).concat(e),{credentials:"include",...t,headers:n});if(!r.ok)throw new o(r.status,r.statusText);if(204===r.status)return;return await r.json()}}}catch(e){}if(!s.ok)try{if((s.headers.get("content-type")||"").includes("application/json")){let e=await s.json(),t=e&&(e.error||e.message)?String(e.error||e.message):"Erreur ".concat(s.status);throw new o(s.status,t)}{let e=(await s.text()||"").trim(),t=e.length?e:s.statusText?"".concat(s.status," ").concat(s.statusText):"Erreur ".concat(s.status);throw new o(s.status,t)}}catch(t){let e=s.statusText?"".concat(s.status," ").concat(s.statusText):"Erreur ".concat(s.status);if(t instanceof o)throw t;throw new o(s.status,e)}if(204===s.status)return;return await s.json()}catch(e){throw console.error("[API] Fetch error:",e),new o(0,"Erreur r\xe9seau: ".concat(e.message||"Failed to fetch"))}}},2044:function(e,t,s){"use strict";function n(e){let t=Number(e);return isFinite(t)?"$".concat(Math.round(t).toLocaleString()):"$0"}function a(e){return 52*Number(e||0)/12}s.d(t,{P:function(){return a},l:function(){return n}})},3175:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var n=s(8078);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),l=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,n.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:d="",children:u,iconNode:m,...x}=e;return(0,n.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:s,strokeWidth:l?24*Number(r)/Number(a):r,className:i("lucide",d),...!u&&!c(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let s=(0,n.forwardRef)((s,r)=>{let{className:c,...o}=s;return(0,n.createElement)(d,{ref:r,iconNode:t,className:i("lucide-".concat(a(l(e))),"lucide-".concat(e),c),...o})});return s.displayName=l(e),s}},5343:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(3175).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},168:function(e,t,s){"use strict";var n=s(7462);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},5050:function(e,t,s){"use strict";var n,a;e.exports=(null==(n=s.g.process)?void 0:n.env)&&"object"==typeof(null==(a=s.g.process)?void 0:a.env)?s.g.process:s(9295)},9295:function(e){!function(){var t={229:function(e){var t,s,n,a=e.exports={};function r(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{s="function"==typeof clearTimeout?clearTimeout:l}catch(e){s=l}}();var c=[],o=!1,d=-1;function u(){o&&n&&(o=!1,n.length?c=n.concat(c):d=-1,c.length&&m())}function m(){if(!o){var e=i(u);o=!0;for(var t=c.length;t;){for(n=c,c=[];++d<t;)n&&n[d].run();d=-1,t=c.length}n=null,o=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function x(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new x(e,t)),1!==c.length||o||i(m)},x.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},s={};function n(e){var a=s[e];if(void 0!==a)return a.exports;var r=s[e]={exports:{}},l=!0;try{t[e](r,r.exports,n),l=!1}finally{l&&delete s[e]}return r.exports}n.ab="//";var a=n(229);e.exports=a}()}},function(e){e.O(0,[233,115,205,744],function(){return e(e.s=3897)}),_N_E=e.O()}]);