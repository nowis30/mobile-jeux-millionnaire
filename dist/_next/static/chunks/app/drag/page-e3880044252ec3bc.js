(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{7280:function(e,n,t){Promise.resolve().then(t.bind(t,3615))},3615:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return s}});var r=t(7821),l=t(8078);function a(){let e=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let n=e.current;if(!n)return;let t=()=>{setTimeout(()=>{let e=localStorage.getItem("HM_TOKEN");e&&n.contentWindow?(console.log("[DragIframeWrapper] Envoi du token \xe0 l'iframe:",e.substring(0,20)+"..."),n.contentWindow.postMessage({type:"AUTH_TOKEN",token:e,source:"parent"},window.location.origin)):console.warn("[DragIframeWrapper] Pas de token HM_TOKEN trouv\xe9 dans localStorage")},100)};return n.addEventListener("load",t),()=>{n.removeEventListener("load",t)}},[]),(0,r.jsx)("iframe",{ref:e,title:"Drag Shift Duel",src:"/drag/iframe.html",className:"w-full h-full bg-black",allow:"fullscreen"})}function i(e){let{onNativeDetected:n}=e,[t,a]=(0,l.useState)(!1),[i,s]=(0,l.useState)(!1);(0,l.useEffect)(()=>{var e;let t=window.Capacitor,r=!!(null==t?void 0:null===(e=t.Plugins)||void 0===e?void 0:e.DragLauncher),l=!!(null==t?void 0:t.isNative)||!!(null==t?void 0:t.isNativePlatform),u=r||l;a(u),n&&n(u),u&&!i&&(s(!0),setTimeout(()=>{o()},300))},[i,n]);let o=async()=>{try{var e;let n=window.Capacitor,t=null==n?void 0:null===(e=n.Plugins)||void 0===e?void 0:e.DragLauncher;if(!t)return;"function"==typeof t.race?await t.race():"function"==typeof t.open&&await t.open()}catch(e){console.warn("DragLauncher natif indisponible:",e)}};return t?(0,r.jsx)("div",{className:"px-2 pb-2",children:(0,r.jsx)("button",{onClick:o,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white text-sm py-2 rounded",children:"\uD83C\uDFC1 Lancer une course native (avec pub)"})}):null}function s(){let[e,n]=(0,l.useState)(!1);return(0,r.jsxs)("main",{className:"w-full h-[calc(100vh-4rem)] flex flex-col",children:[!e&&(0,r.jsxs)("div",{className:"p-2 text-xs text-neutral-400",children:[(0,r.jsx)("p",{children:"Miniâ€‘jeu int\xe9gr\xe9. Si l'affichage ne se charge pas, essayez la version plein \xe9cran ou rafra\xeechissez."}),(0,r.jsx)("p",{children:"Les gains et meilleurs temps seront synchronis\xe9s avec votre session Millionnaire (impl\xe9mentation prochaine)."})]}),(0,r.jsx)(i,{onNativeDetected:n}),!e&&(0,r.jsx)("div",{className:"flex-1 border-t border-neutral-800",children:(0,r.jsx)(a,{})}),e&&(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center text-neutral-400 text-sm",children:(0,r.jsx)("p",{children:"\uD83C\uDFC1 Version native Android - Appuyez sur le bouton pour lancer une course"})})]})}}},function(e){e.O(0,[115,205,744],function(){return e(e.s=7280)}),_N_E=e.O()}]);