(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931,468],{3657:function(e,t,a){Promise.resolve().then(a.bind(a,4359))},4359:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(7821),l=a(4233),s=a(4328),r=a(8078),i=a(168),c=a(2705),o=a(1468),u=a(3175);let d=(0,u.Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),m=(0,u.Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);function x(e){let{title:t,children:a,defaultOpen:l=!1,maxHeight:s="500px",itemCount:i}=e,[c,o]=(0,r.useState)(l);return(0,n.jsxs)("div",{className:"w-full mb-6",children:[(0,n.jsxs)("button",{onClick:()=>o(!c),className:"w-full flex items-center justify-between p-4 bg-gradient-to-r from-purple-900/50 to-blue-900/50 rounded-t-lg hover:from-purple-800/60 hover:to-blue-800/60 transition-all duration-200","aria-expanded":c,children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-white",children:t}),void 0!==i&&(0,n.jsx)("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm text-white/90 font-semibold",children:i})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-white/70",children:c?"Masquer":"Afficher"}),c?(0,n.jsx)(d,{className:"w-6 h-6 text-white"}):(0,n.jsx)(m,{className:"w-6 h-6 text-white"})]})]}),(0,n.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(c?"max-h-screen opacity-100":"max-h-0 opacity-0"),children:(0,n.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-b-lg border-t-0 overflow-y-auto custom-scrollbar",style:{maxHeight:c?s:"0"},children:a})})]})}var h=a(9513),p=a(2044),f=a(6325);let b="lobby";function g(){let e=(0,i.useRouter)(),[t,a]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[m,g]=(0,r.useState)(""),[N,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{console.log("[Auth] Tentative /api/auth/me ...");let t=await (0,h.SC)("/api/auth/me");console.log("[Auth] Succ\xe8s /api/auth/me",t),e&&(a(!0),d(!!t.isAdmin),g(t.email),y(null));try{window.dispatchEvent(new Event("hm-music/resume")),window.dispatchEvent(new Event("hm-music/play-now"))}catch(e){}}catch(t){e&&(a(!1),d(!1),g(""),y("Non connect\xe9."))}})(),()=>{e=!1}},[e]);let[w,S]=(0,r.useState)([]),[k,C]=(0,r.useState)(""),[P,A]=(0,r.useState)(""),[I,M]=(0,r.useState)(""),[E,T]=(0,r.useState)(b),[D,R]=(0,r.useState)([]),[q,L]=(0,r.useState)(null),[O,z]=(0,r.useState)(null),[B,F]=(0,r.useState)(""),[Q,V]=(0,r.useState)([]),[G,U]=(0,r.useState)(""),[$,J]=(0,r.useState)(null),[W,_]=(0,r.useState)(null),[H,X]=(0,r.useState)([]),[Z,Y]=(0,r.useState)([]),[K,ee]=(0,r.useState)({}),[et,ea]=(0,r.useState)(null),[en,el]=(0,r.useState)([]),[es,er]=(0,r.useState)(!1),[ei,ec]=(0,r.useState)(!1),[eo,eu]=(0,r.useState)(!1),[ed,em]=(0,r.useState)(null),[ex,eh]=(0,r.useState)(!1),[ep,ef]=(0,r.useState)(null),[eb,eg]=(0,r.useState)([]),[ev,ej]=(0,r.useState)(null),[eN,ey]=(0,r.useState)(1e6),[ew,eS]=(0,r.useState)(0),[ek,eC]=(0,r.useState)(!1),[eP,eA]=(0,r.useState)(!1),[eI,eM]=(0,r.useState)(null),[eE,eT]=(0,r.useState)(null),[eD,eR]=(0,r.useState)(!1),[eq,eL]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=(0,c.dF)();if(e){var t;C(e.gameId),A(null!==(t=e.playerId)&&void 0!==t?t:""),e.nickname&&U(e.nickname)}},[]),(0,r.useEffect)(()=>{try{var e,t;eL(!!(null===(t=window.Capacitor)||void 0===t?void 0:null===(e=t.isNativePlatform)||void 0===e?void 0:e.call(t)))}catch(e){eL(!1)}},[]),(0,r.useEffect)(()=>{try{localStorage.getItem("hm-tutorial-home")||eh(!0)}catch(e){}},[]),(0,r.useEffect)(()=>{if(k&&P)try{let e=new URLSearchParams(window.location.search).get("invite");if(!e||localStorage.getItem("hm-invite-accepted-".concat(e)))return;(async()=>{try{await (0,h.SC)("/api/games/".concat(k,"/referrals/accept"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})}),localStorage.setItem("hm-invite-accepted-".concat(e),"1"),ef(e)}catch(e){}})()}catch(e){}},[k,P]);let eO=(0,r.useCallback)(e=>{var t,a,n;let l={gameId:null!==(t=null==e?void 0:e.gameId)&&void 0!==t?t:k,playerId:null!==(a=null==e?void 0:e.playerId)&&void 0!==a?a:P,nickname:null!==(n=null==e?void 0:e.nickname)&&void 0!==n?n:G};l.gameId&&(0,c.Aj)(l)},[k,P,G]),ez=(0,r.useCallback)(async()=>{if(k)try{var e,t;console.log("[Home] Fetch state gameId=",k);let a=await (0,h.SC)("/api/games/".concat(k,"/state"));console.log("[Home] State re\xe7u:",a),T(a.status),R(null!==(e=a.players)&&void 0!==e?e:[]),M(null!==(t=a.code)&&void 0!==t?t:""),L(null)}catch(e){console.warn("[Home] \xc9chec state",e),L(e instanceof Error?e.message:"\xc9chec de r\xe9cup\xe9ration de l'\xe9tat")}},[k]),eB=(0,r.useCallback)(async()=>{if(k&&P)try{var e;let t=await (0,h.SC)("/api/games/".concat(k,"/bonus/status"));eC(!!t.available),eS(Math.max(0,Number(null!==(e=t.secondsUntilAvailable)&&void 0!==e?e:0))),"number"!=typeof t.rewardAmount||Number.isNaN(t.rewardAmount)||ey(t.rewardAmount),eT(null)}catch(e){if((null==e?void 0:e.status)===404)return;(null==e?void 0:e.message)?eT(e.message):eT("Impossible de r\xe9cup\xe9rer le bonus.")}},[k,P]),eF=(0,r.useCallback)(e=>{let t=Math.max(0,Math.floor(e)),a=Math.floor(t/60),n=t%60;return a>0?"".concat(a,"min ").concat(n,"s"):"".concat(n,"s")},[]),eQ=(0,r.useCallback)(async()=>{if(!eo&&t&&!k){eu(!0),console.log("[Home] AutoJoin d\xe9clench\xe9 isLoggedIn=",t,"gameId=",k);try{var e;let t=await (0,h.SC)("/api/games");console.log("[Home] Liste des games:",t);let a=null===(e=t.games)||void 0===e?void 0:e[0];if(!a)throw Error("Partie introuvable");let n=await (0,h.SC)("/api/games/".concat(a.id,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});console.log("[Home] Join OK:",n),C(a.id),A(n.playerId),M(a.code),U(m),eO({gameId:a.id,playerId:n.playerId,nickname:m}),L(null),z("Vous avez rejoint la partie mondiale en tant que ".concat(m)),ez()}catch(e){console.error("[AutoJoin] Erreur join:",(null==e?void 0:e.message)||e)}}},[eo,t,k,m,eO,ez]),eV=(0,r.useCallback)(async()=>{if(!k||!P){eT("Rejoignez la partie mondiale pour d\xe9bloquer le bonus.");return}if(!eP){eA(!0),eT(null),eM(null);try{var e,t;if(!await (0,f.fL)((e,t)=>{console.log("[Bonus] Reward callback ".concat(e," ").concat(t))})){eT("La publicit\xe9 n'est pas pr\xeate. R\xe9essayez dans quelques instants.");return}let a=await (0,h.SC)("/api/games/".concat(k,"/bonus/redeem"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),n=Number(null!==(e=null==a?void 0:a.rewardAmount)&&void 0!==e?e:eN);ey(n),eM("+".concat((0,p.l)(n)));let l=Number(null!==(t=null==a?void 0:a.secondsUntilNext)&&void 0!==t?t:0),s=(0,f.Ie)();eS(Math.max(l,s)),eC(!1),eB(),ez()}catch(e){(null==e?void 0:e.status)===429&&eB(),eT((null==e?void 0:e.message)||"Impossible de cr\xe9diter le bonus.")}finally{eA(!1)}}},[k,P,eP,eN,eB,ez]);(0,r.useEffect)(()=>{eQ()},[eQ]),(0,r.useEffect)(()=>{if(k&&m)try{let e=(0,s.io)(h.Sg,{path:"/socket.io",transports:["websocket"],withCredentials:!0,query:{gameId:k,nickname:m}});ej(e);let t=async()=>{try{let e=await fetch("".concat(h.Sg,"/api/games/").concat(k,"/online"),{credentials:"include"});if(!e.ok)return;let t=await e.json();eg(Array.isArray(t.users)?t.users:[])}catch(e){}};t();let a=setInterval(t,15e3);return()=>{try{clearInterval(a)}catch(e){}e.close(),ej(null)}}catch(e){}},[k,m]);let eG=(0,r.useCallback)(async e=>{if(k){_(e);try{var t,a,n,l,s,r;let[i,c,o,u,d]=await Promise.all([fetch("".concat(h.Sg,"/api/games/").concat(k,"/properties/holdings/").concat(e.id),{credentials:"include"}),fetch("".concat(h.Sg,"/api/games/").concat(k,"/markets/holdings/").concat(e.id),{credentials:"include"}),fetch("".concat(h.Sg,"/api/games/").concat(k,"/markets/latest"),{credentials:"include"}),fetch("".concat(h.Sg,"/api/games/").concat(k,"/economy"),{credentials:"include"}),fetch("".concat(h.Sg,"/api/quiz/public-stats"),{credentials:"include"})]),m=i.ok?await i.json():{holdings:[]},x=c.ok?await c.json():{holdings:[]},p=o.ok?await o.json():{prices:[]},f=u.ok?await u.json():null,b=d.ok?await d.json():null;X(null!==(t=m.holdings)&&void 0!==t?t:[]),Y(null!==(a=x.holdings)&&void 0!==a?a:[]);let g={};for(let e of null!==(n=p.prices)&&void 0!==n?n:[])g[e.symbol]=e.price;if(ee(g),f&&ea({baseMortgageRate:Number(null!==(l=f.baseMortgageRate)&&void 0!==l?l:.05),appreciationAnnual:Number(null!==(s=f.appreciationAnnual)&&void 0!==s?s:.02),schedule:Array.isArray(f.schedule)?f.schedule:[]}),b){let e=Array.isArray(b.categories)?b.categories.map(e=>{var t,a,n,l;return{category:String(null!==(t=e.category)&&void 0!==t?t:"autre"),total:Number(null!==(a=e.total)&&void 0!==a?a:0),used:Number(null!==(n=e.used)&&void 0!==n?n:0),remaining:Number(null!==(l=e.remaining)&&void 0!==l?l:0)}}):void 0;em({remaining:Number(null!==(r=b.remaining)&&void 0!==r?r:0),remainingByDifficulty:b.remainingByDifficulty,remainingByCategory:b.remainingByCategory,categories:e})}}catch(e){}}},[k]),eU=(0,r.useCallback)(()=>{var e,t,a;if(!W){el([]);return}let n=((null==et?void 0:et.schedule)&&et.schedule.length?et.schedule:Array.from({length:10},()=>.02)).slice(0,10),l=null!==(e=null==et?void 0:et.baseMortgageRate)&&void 0!==e?e:.05,s=(H||[]).map(e=>{var t,a,n;let s=Number(null!==(t=e.currentValue)&&void 0!==t?t:0),r=Number(null!==(a=e.mortgageDebt)&&void 0!==a?a:0),i=Number(null!==(n=e.weeklyPayment)&&void 0!==n?n:0)||function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,n=Math.max(1,Math.round(52*a)),l=t/52;return e<=0?0:l<=0?e/n:l*e/(1-Math.pow(1+l,-n))}(r,l,25);return{value:s,debt:r,rate:l,payW:i}}),r=(Z||[]).map(e=>{var t,a,n;let l=null!==(a=K[e.symbol])&&void 0!==a?a:Number(null!==(t=e.avgPrice)&&void 0!==t?t:0);return{value:Number(null!==(n=e.quantity)&&void 0!==n?n:0)*Number(null!=l?l:0),er:function(e){switch(e){case"SP500":case"VFV":case"XLF":case"XLE":case"IWM":return .06;case"QQQ":case"AAPL":case"MSFT":case"AMZN":case"META":case"GOOGL":case"NVDA":case"TSLA":case"COST":return .08;case"TSX":case"VDY":default:return .05;case"UPRO":return .18;case"TQQQ":return .24;case"GLD":return .02;case"TLT":return .03}}(String(e.symbol))}}),i=Number(null!==(t=W.cash)&&void 0!==t?t:0),c=[],o=s.reduce((e,t)=>e+(t.value-t.debt),0)+r.reduce((e,t)=>e+t.value,0)+i;c.push({year:0,net:o});let u=s.map(e=>({...e})),d=r.map(e=>({...e}));for(let e=1;e<=10;e++){for(let t of u){let l=Math.max(0,52*t.payW-t.debt*t.rate);t.debt=Math.max(0,t.debt-l),t.value=t.value*(1+(null!==(a=n[e-1])&&void 0!==a?a:.02))}for(let e of d)e.value=e.value*(1+e.er);let t=u.reduce((e,t)=>e+(t.value-t.debt),0)+d.reduce((e,t)=>e+t.value,0)+i;c.push({year:e,net:t})}el(c)},[W,H,Z,K,et]);(0,r.useEffect)(()=>{if(!ei){el([]);return}er(!0);try{eU()}finally{er(!1)}},[ei,W,H,Z,K,et]),(0,r.useCallback)(async()=>{try{var e;let t=await (0,h.SC)("/api/games"),a=null===(e=t.games)||void 0===e?void 0:e[0];if(!a)throw Error("Partie introuvable");let n=await (0,h.SC)("/api/games/".concat(a.id,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});C(a.id),A(n.playerId),M(a.code),eO({gameId:a.id,playerId:n.playerId}),L(null),z("Rejoint la partie ".concat(a.code)),ez()}catch(e){z(null),L(e instanceof Error?e.message:"Impossible de rejoindre la partie")}},[eO,ez]);let e$=(0,r.useCallback)(async()=>{try{let n=k;if(!n){var e,t,a;let l=await (0,h.SC)("/api/games");if(!(n=null!==(a=null===(t=l.games)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id)&&void 0!==a?a:""))throw Error("Partie introuvable");C(n)}await (0,h.SC)("/api/games/".concat(n,"/start"),{method:"POST"}),z("Partie d\xe9marr\xe9e"),ez()}catch(e){L(e instanceof Error?e.message:"\xc9chec du d\xe9marrage")}},[k,ez]),eJ=(0,r.useCallback)(async()=>{try{if(!window.confirm("Red\xe9marrer la partie effacera joueurs, annonces, positions et historique. Continuer ?"))return;let n=k;if(!n){var e,t,a;let l=await (0,h.SC)("/api/games");if(!(n=null!==(a=null===(t=l.games)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id)&&void 0!==a?a:""))throw Error("Partie introuvable");C(n)}console.log("[DEBUG] Calling restart for game ".concat(n)),await (0,h.SC)("/api/games/".concat(n,"/restart"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})}),console.log("[DEBUG] Restart successful"),z("Partie red\xe9marr\xe9e avec succ\xe8s!"),L(null),(0,c.Ov)(),C(""),A(""),U(""),ez()}catch(e){console.error("[DEBUG] Restart error:",e),L(e instanceof Error?e.message:"\xc9chec du red\xe9marrage")}},[k,ez]);(0,r.useCallback)(()=>{(0,c.Ov)(),C(""),A(""),U(""),M(""),R([]),S([]),T(b),z("Session effac\xe9e")},[]);let eW=window.location.origin,[e_,eH]=(0,r.useState)(""),[eX,eZ]=(0,r.useState)(null),eY=(0,r.useCallback)(async()=>{try{navigator.share?(await navigator.share({title:"Rejoins le jeu du Millionnaire",text:"Clique pour te connecter et rejoindre la partie globale.",url:eW}),J("Lien partag\xe9")):navigator.clipboard?(await navigator.clipboard.writeText(eW),J("Lien copi\xe9 dans le presse-papiers")):J("Partage non support\xe9. Copiez l'URL du navigateur.")}catch(e){J("Partage annul\xe9")}},[eW]),eK=(0,r.useCallback)(async()=>{try{if(!k)throw Error("Partie introuvable");let e=await (0,h.SC)("/api/games/".concat(k,"/referrals/create"),{method:"POST"});eH(e.url),eZ("Lien g\xe9n\xe9r\xe9. R\xe9compense: ".concat((0,p.l)(e.reward||1e6))),navigator.share?await navigator.share({title:"Rejoins le Millionnaire",text:"Accepte mon invitation et commen\xe7ons !",url:e.url}):navigator.clipboard&&(await navigator.clipboard.writeText(e.url),eZ(e=>e?e+" — Lien copi\xe9":"Lien copi\xe9"))}catch(e){eZ((null==e?void 0:e.message)||"\xc9chec de cr\xe9ation du lien")}},[k]);(0,r.useEffect)(()=>{k&&ez()},[k,ez]),(0,r.useEffect)(()=>{eB()},[eB]),(0,r.useEffect)(()=>{if(ew<=0)return;let e=setTimeout(()=>{eS(e=>Math.max(0,e-1))},1e3);return()=>clearTimeout(e)},[ew]),(0,r.useEffect)(()=>{let e=!0,t=async()=>{try{let t=await (0,f.yk)();e&&eR(t)}catch(t){e&&eR(!1)}};t();let a=setInterval(t,5e3);return()=>{e=!1,clearInterval(a)}},[]),(0,r.useEffect)(()=>{if(!eq)return;let e=()=>{let e=(0,f.Ie)();e>0&&eS(t=>e>t?e:t)};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[eq]),(0,r.useEffect)(()=>{k&&!P&&(async()=>{try{try{let e=await (0,h.SC)("/api/games/".concat(k,"/me"));A(e.player.id),e.player.nickname&&U(e.player.nickname),eO({gameId:k,playerId:e.player.id,nickname:e.player.nickname})}catch(e){}}catch(e){}})()},[k,P,eO]);let e0=(0,r.useMemo)(()=>w.length>0?w:D.map(e=>({playerId:e.id,nickname:e.nickname,netWorth:e.netWorth})).sort((e,t)=>t.netWorth-e.netWorth),[w,D]),e2=!k||!P||eP||ew>0||!eD,e1=k&&P?eP?"Chargement de la publicit\xe9...":ew>0?"Disponible dans ".concat(eF(ew)):eD?"Regarder la publicit\xe9 pour ".concat((0,p.l)(eN)):eq?"Chargement de la publicit\xe9...":"Disponible dans l'app mobile":"Connexion en cours...";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("main",{className:"space-y-6 overflow-x-hidden",children:[(0,n.jsxs)("div",{className:"text-xs opacity-60",children:["DEBUG API_BASE: ",h.Sg]}),(0,n.jsx)(()=>N?(0,n.jsxs)("div",{className:"p-3 mb-4 rounded bg-red-900/40 border border-red-700 text-sm",children:[(0,n.jsxs)("p",{className:"font-semibold",children:["Auth: ",N]}),(0,n.jsx)("p",{className:"mt-1 text-xs opacity-75",children:"Si cela persiste, ouvrez la page /debug-auth pour plus de d\xe9tails (token, cookies)."})]}):null,{}),(0,n.jsxs)("div",{className:"rounded-card border border-indigo-600 bg-gradient-to-r from-indigo-700/60 to-purple-700/50 p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2 shadow-elev-1",children:[(0,n.jsx)("div",{className:"text-sm md:text-base font-semibold text-indigo-100 flex items-center gap-2",children:(0,n.jsx)("span",{children:"✨ Nouveaut\xe9s: Difficult\xe9 Quiz r\xe9\xe9quilibr\xe9e, cat\xe9gorie Anatomy (biologie), tutoriel complet."})}),(0,n.jsxs)("div",{className:"text-xs flex items-center gap-3",children:[(0,n.jsx)(l.default,{href:"/tutoriel",className:"px-3 py-1 rounded bg-indigo-500 hover:bg-indigo-400 text-black font-medium text-xs",children:"Voir le tutoriel"}),(0,n.jsx)(l.default,{href:"/quiz",className:"px-3 py-1 rounded bg-purple-500 hover:bg-purple-400 text-black font-medium text-xs",children:"Jouer au Quiz"}),(0,n.jsx)(l.default,{href:"/telecharger",className:"px-3 py-1 rounded bg-emerald-500 hover:bg-emerald-400 text-black font-medium text-xs",children:"T\xe9l\xe9charger l'app"})]})]}),(0,n.jsx)(j,{}),t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("section",{className:"rounded-card border border-emerald-600/60 bg-gradient-to-r from-emerald-900/70 to-green-800/60 p-4 shadow-elev-2 space-y-3",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,n.jsxs)("div",{className:"space-y-1 text-sm text-emerald-100",children:[(0,n.jsxs)("p",{className:"text-lg md:text-xl font-semibold text-white",children:["Bonus pub : ",(0,p.l)(eN)]}),(0,n.jsxs)("p",{className:"text-emerald-100/80 text-sm",children:["Regardez une publicit\xe9 pour cr\xe9diter instantan\xe9ment ",(0,p.l)(eN)," sur votre compte."]})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full md:w-auto",children:[(0,n.jsx)("button",{onClick:eV,disabled:e2,className:"ui-btn w-full sm:w-auto ".concat(e2?"bg-emerald-700/40 text-emerald-200/70 cursor-not-allowed":"ui-btn--primary"),children:e1}),(0,n.jsx)(l.default,{href:"/bonus",className:"text-xs text-emerald-100/80 underline text-center",children:"En savoir plus"})]})]}),!eq&&(0,n.jsx)("p",{className:"text-xs text-emerald-100/70 text-center md:text-right",children:"Disponible dans l'application mobile. T\xe9l\xe9chargez-la via l'onglet T\xe9l\xe9charger."}),eI&&(0,n.jsxs)("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/15 px-3 py-2 text-sm text-emerald-100 text-center",children:[eI," cr\xe9dit\xe9 sur votre compte !"]}),eE&&(0,n.jsx)("div",{className:"rounded-lg border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-100 text-center",children:eE})]}),(0,n.jsxs)("section",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Partie Mondiale du Millionnaire"}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[m&&(0,n.jsxs)("p",{className:"text-sm text-neutral-400 flex items-center gap-2",children:["Connect\xe9: ",(0,n.jsxs)("span",{className:"text-emerald-400 flex items-center gap-1",children:[eb.includes(m)&&(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),m]})]}),u&&(0,n.jsx)("span",{className:"px-2 py-1 rounded bg-red-700 text-xs font-semibold",children:"ADMIN"})]})]}),k&&P&&(0,n.jsxs)("div",{className:"ui-card p-3 border-emerald-700/50 bg-emerald-900/30",children:[(0,n.jsx)("p",{className:"text-emerald-300 text-sm",children:"✅ Vous \xeates automatiquement inscrit \xe0 la partie mondiale !"}),(0,n.jsxs)("p",{className:"text-neutral-400 text-xs mt-1",children:["Pseudo: ",G||m]})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full",children:[(0,n.jsx)("button",{onClick:async()=>{try{await (0,h.SC)("/api/auth/logout",{method:"POST"})}catch(e){}try{if("undefined"!=typeof document){let e="Thu, 01 Jan 1970 00:00:00 GMT";document.cookie="hm_auth=; expires="+e+"; path=/",document.cookie="hm_csrf=; expires="+e+"; path=/",document.cookie="hm_guest=; expires="+e+"; path=/"}}catch(e){}try{window.localStorage.removeItem("HM_TOKEN")}catch(e){}try{window.localStorage.removeItem("hm-session")}catch(e){}(0,c.Ov)(),a(!1),d(!1),g(""),e.replace("/login")},className:"ui-btn ui-btn--danger w-full sm:w-auto",children:"Se d\xe9connecter"}),(0,n.jsx)("button",{onClick:eK,className:"ui-btn ui-btn--primary w-full sm:w-auto",children:"Inviter un ami (gagne 1M$)"}),(0,n.jsx)("button",{onClick:eY,className:"ui-btn ui-btn--info w-full sm:w-auto",children:"Partager le jeu"}),(0,n.jsx)("a",{href:"mailto:?subject=".concat(encodeURIComponent("Rejoins le jeu du Millionnaire"),"&body=").concat(encodeURIComponent("Rejoins-moi: "+eW)),className:"ui-btn ui-btn--info text-center w-full sm:w-auto",children:"Inviter par email"})]}),e_&&(0,n.jsxs)("div",{className:"text-xs text-neutral-300",children:["Lien d'invitation: ",(0,n.jsx)("a",{href:e_,className:"underline break-all",children:e_})]}),(eX||$)&&(0,n.jsx)("p",{className:"text-xs text-neutral-400",children:eX||$}),ep&&(0,n.jsx)("p",{className:"text-xs text-emerald-400",children:"Invitation appliqu\xe9e. Merci !"}),O&&(0,n.jsx)("p",{className:"text-sm text-emerald-400",children:O}),q&&(0,n.jsx)("p",{className:"text-sm text-red-400",children:q})]})]}):(0,n.jsxs)("section",{className:"space-y-3",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Connexion requise"}),(0,n.jsx)("p",{className:"text-neutral-300",children:"Veuillez vous connecter pour cr\xe9er ou rejoindre une partie."}),(0,n.jsx)(l.default,{href:"/login",className:"ui-btn ui-btn--info inline-block",children:"Aller \xe0 la page de connexion"})]}),(0,n.jsx)(x,{title:"Tableau de bord",defaultOpen:!0,maxHeight:"500px",itemCount:e0.length,children:(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("p",{className:"text-sm text-neutral-300 mb-2",children:["Classement (rafra\xeechissement manuel) — statut: ",E]}),(0,n.jsx)("div",{className:"flex gap-2 mb-4",children:(0,n.jsx)("button",{onClick:ez,className:"ui-btn ui-btn--neutral text-sm",children:"Actualiser"})}),(0,n.jsx)("div",{className:"ui-card overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left",children:[(0,n.jsx)("th",{className:"p-2",children:"#"}),(0,n.jsx)("th",{className:"p-2",children:"Joueur"}),(0,n.jsx)("th",{className:"p-2",children:"Valeur nette"})]})}),(0,n.jsx)("tbody",{children:e0.map((e,t)=>(0,n.jsxs)("tr",{className:"border-t border-surface-divider",children:[(0,n.jsx)("td",{className:"p-2",children:t+1}),(0,n.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[eb.includes(e.nickname)&&(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),e.nickname]}),(0,n.jsx)("td",{className:"p-2",children:(0,p.l)(e.netWorth)})]},e.playerId))})]})})]})}),D.length>0&&(0,n.jsx)(x,{title:"Joueurs",defaultOpen:!1,maxHeight:"600px",itemCount:D.length,children:(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)("ul",{className:"space-y-2 text-sm text-neutral-300",children:D.map(e=>(0,n.jsxs)("li",{className:"ui-card px-3 py-2",children:[(0,n.jsxs)("div",{className:"text-base font-medium mb-2 flex items-center gap-2",children:[eb.includes(e.nickname)&&(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),e.nickname]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,n.jsxs)("span",{children:["Cash: ",(0,p.l)(e.cash)," | Net: ",(0,p.l)(e.netWorth)]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{title:"Voir le portefeuille",onClick:()=>eG(e),className:"ui-btn ui-btn--info text-xs",children:"Voir portefeuille"}),u&&(0,n.jsx)("button",{title:"Supprimer ce joueur",onClick:async()=>{if(k&&window.confirm("Supprimer ".concat(e.nickname," ? Tous ses biens, annonces et positions seront effac\xe9s.")))try{await (0,h.SC)("/api/games/".concat(k,"/players/").concat(e.id),{method:"DELETE"}),z("Joueur supprim\xe9: ".concat(e.nickname)),ez()}catch(e){L(e instanceof Error?e.message:"\xc9chec de suppression")}},className:"ui-btn ui-btn--danger text-xs",children:"Poubelle"})]})]})]},e.id))})})}),u&&(0,n.jsxs)("section",{className:"space-y-2 border border-red-900/40 bg-red-950/20 rounded-card p-3",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-red-300",children:"Admin"}),(0,n.jsx)("p",{className:"text-sm text-red-200/80",children:"Contr\xf4les r\xe9serv\xe9s \xe0 l'administrateur. Le red\xe9marrage efface toutes les donn\xe9es de la partie."}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:e$,className:"ui-btn ui-btn--warning text-sm",children:"D\xe9marrer"}),(0,n.jsx)("button",{onClick:eJ,className:"ui-btn ui-btn--danger text-sm",children:"Red\xe9marrer (destructif)"})]}),(0,n.jsx)(v,{gameId:k,onAdvanced:()=>{ez()}})]}),(0,n.jsxs)("section",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 w-full",children:[(0,n.jsx)(l.default,{href:"/immobilier",className:"ui-btn ui-btn--info text-center w-full",children:"Immobilier"}),(0,n.jsx)(l.default,{href:"/bourse",className:"ui-btn ui-btn--primary text-center w-full",children:"Bourse"}),(0,n.jsx)(l.default,{href:"/listings",className:"ui-btn ui-btn--info text-center w-full",children:"Annonces"}),(0,n.jsx)(l.default,{href:"/summary",className:"ui-btn ui-btn--warning text-center w-full",children:"R\xe9sum\xe9"}),(0,n.jsx)(l.default,{href:"/drag",className:"ui-btn ui-btn--danger text-center w-full",children:"\uD83C\uDFC1 Drag Racing"}),(0,n.jsx)(l.default,{href:"/quiz",className:"ui-btn bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 font-bold text-center w-full",children:"\uD83D\uDCB0 Quiz"})]}),(0,n.jsxs)("section",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3 w-full",children:[(0,n.jsx)(l.default,{href:"/confidentialite",className:"ui-btn ui-btn--neutral text-center w-full",children:"Politique de confidentialit\xe9"}),(0,n.jsx)(l.default,{href:"/suppression-compte",className:"ui-btn ui-btn--neutral text-center w-full",children:"Suppression de compte"})]}),(0,n.jsx)("section",{className:"mt-4 w-full",children:(0,n.jsx)(l.default,{href:"/parametres",className:"ui-btn ui-btn--neutral block text-center w-full",children:"Param\xe8tres"})}),(0,n.jsx)("section",{className:"w-full",children:(0,n.jsx)(l.default,{href:"/bonus",className:"ui-btn ui-btn--primary block font-bold text-center w-full text-lg shadow-elev-2 transition-all hover:scale-105",children:"\uD83D\uDCFA Bonus Gratuit - Gagnez $1,000,000 !"})}),W&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-start justify-center p-4",onClick:()=>_(null),children:(0,n.jsxs)("div",{className:"w-full max-w-4xl ui-card flex flex-col max-h-[85vh]",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-800",children:[(0,n.jsxs)("h4",{className:"font-semibold",children:["Portefeuille — ",W.nickname]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:["number"==typeof(null==ed?void 0:ed.remaining)&&(0,n.jsxs)("span",{className:"text-xs px-2 py-1 rounded bg-emerald-800/50 border border-emerald-700 text-emerald-200",children:["Questions en banque: ",ed.remaining]}),(null==ed?void 0:ed.categories)&&ed.categories.length>0?(0,n.jsxs)("div",{className:"flex items-center gap-1 flex-wrap max-w-[60vw]",children:[ed.categories.slice(0,5).map(e=>(0,n.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:[e.category," ",e.remaining]},e.category)),ed.categories.length>5&&(0,n.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:["+",ed.categories.length-5," autres"]})]}):(null==ed?void 0:ed.remainingByCategory)&&(0,n.jsx)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:"Finance ".concat(ed.remainingByCategory.finance," \xb7 \xc9conomie ").concat(ed.remainingByCategory.economy," \xb7 Immo ").concat(ed.remainingByCategory.realEstate)})]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,n.jsxs)("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h5",{className:"font-semibold mb-2",children:"Immobilier"}),0===H.length?(0,n.jsx)("p",{className:"text-sm text-neutral-400",children:"Aucun bien."}):(0,n.jsxs)("table",{className:"w-full text-sm bg-surface-0 border border-surface-divider rounded-card",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left",children:[(0,n.jsx)("th",{className:"p-2",children:"Bien"}),(0,n.jsx)("th",{className:"p-2",children:"Valeur"}),(0,n.jsx)("th",{className:"p-2",children:"Dette"})]})}),(0,n.jsx)("tbody",{children:H.map(e=>{var t,a,l,s,r,i;return(0,n.jsxs)("tr",{className:"border-t border-surface-divider",children:[(0,n.jsxs)("td",{className:"p-2",children:[null!==(l=null===(t=e.template)||void 0===t?void 0:t.name)&&void 0!==l?l:"Bien",(0,n.jsx)("div",{className:"text-xs text-neutral-500",children:null!==(s=null===(a=e.template)||void 0===a?void 0:a.city)&&void 0!==s?s:""})]}),(0,n.jsx)("td",{className:"p-2",children:(0,p.l)(Number(null!==(r=e.currentValue)&&void 0!==r?r:0))}),(0,n.jsx)("td",{className:"p-2",children:(0,p.l)(Number(null!==(i=e.mortgageDebt)&&void 0!==i?i:0))})]},e.id)})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h5",{className:"font-semibold mb-2",children:"Bourse"}),0===Z.length?(0,n.jsx)("p",{className:"text-sm text-neutral-400",children:"Aucune position."}):(0,n.jsxs)("table",{className:"w-full text-sm bg-surface-0 border border-surface-divider rounded-card",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left",children:[(0,n.jsx)("th",{className:"p-2",children:"Actif"}),(0,n.jsx)("th",{className:"p-2",children:"Qt\xe9"}),(0,n.jsx)("th",{className:"p-2",children:"Prix moy."}),(0,n.jsx)("th",{className:"p-2",children:"Valeur"}),(0,n.jsx)("th",{className:"p-2",children:"Gain %"})]})}),(0,n.jsx)("tbody",{children:Z.map(e=>{var t,a,l,s,r;let i=null!==(t=K[e.symbol])&&void 0!==t?t:e.avgPrice,c=Number(null!==(a=e.quantity)&&void 0!==a?a:0)*Number(null!=i?i:0),o=Number(null!==(l=e.avgPrice)&&void 0!==l?l:0)||0,u=o>0?(Number(null!=i?i:0)-o)/o*100:0;return(0,n.jsxs)("tr",{className:"border-t border-surface-divider",children:[(0,n.jsx)("td",{className:"p-2",children:e.symbol}),(0,n.jsx)("td",{className:"p-2",children:Number(null!==(s=e.quantity)&&void 0!==s?s:0).toFixed(2)}),(0,n.jsxs)("td",{className:"p-2",children:["$",Number(null!==(r=e.avgPrice)&&void 0!==r?r:0).toFixed(2)]}),(0,n.jsxs)("td",{className:"p-2",children:["$",c.toFixed(2)]}),(0,n.jsx)("td",{className:"p-2",children:(0,n.jsxs)("span",{className:u>=0?"text-emerald-400":"text-red-400",children:[u.toFixed(2),"%"]})})]},e.id)})})]})]})]}),(0,n.jsx)("div",{className:"px-4 pb-4",children:(0,n.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,n.jsx)("button",{className:"ui-btn ui-btn--neutral text-sm",onClick:()=>ec(!0),disabled:ei&&es,children:ei?es?"Calcul en cours…":"Recalculer la projection":"Afficher la projection 10 ans"}),ei&&en.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,n.jsx)("h5",{className:"font-semibold",children:"Projection 10 ans (valeur nette totale)"}),(0,n.jsxs)("span",{className:"text-xs text-neutral-400",children:["de ",(0,p.l)(Math.round(en[0].net))," \xe0 ",(0,p.l)(Math.round(en[en.length-1].net))]})]}),(0,n.jsx)(function(e){let{data:t}=e;if(!t||0===t.length)return null;let a=Math.min(...t.map(e=>e.net)),l=Math.max(...t.map(e=>e.net)),s=a===l?.95*a:.98*a,r=a===l?1.05*l:1.02*l,i=e=>28+744*e/Math.max(1,t.length-1),c=e=>172-(e-s)*144/Math.max(1,r-s),o=t.map((e,t)=>"".concat(i(t),",").concat(c(e.net))).join(" "),u=e=>e>=1e6?"".concat((e/1e6).toFixed(2)," M$"):e>=1e3?"".concat((e/1e3).toFixed(1)," k$"):"$".concat(Math.round(e));return(0,n.jsx)("div",{className:"w-full overflow-x-auto",children:(0,n.jsxs)("svg",{viewBox:"0 0 ".concat(800," ").concat(200),className:"w-full h-48 bg-neutral-950 border border-neutral-800 rounded",children:[(0,n.jsx)("line",{x1:28,y1:172,x2:772,y2:172,stroke:"#333"}),(0,n.jsx)("line",{x1:28,y1:28,x2:28,y2:172,stroke:"#333"}),(0,n.jsx)("text",{x:28,y:20,fill:"#9ca3af",fontSize:"10",textAnchor:"start",children:u(r)}),(0,n.jsx)("text",{x:28,y:184,fill:"#9ca3af",fontSize:"10",textAnchor:"start",children:u(s)}),(0,n.jsx)("polyline",{fill:"none",stroke:"#22c55e",strokeWidth:2,points:o})]})})},{data:en})]})]})})]}),(0,n.jsx)("div",{className:"px-4 py-3 border-t border-surface-divider flex justify-center",children:(0,n.jsx)("button",{onClick:()=>_(null),className:"ui-btn ui-btn--neutral text-sm",children:"Fermer"})})]})})]}),ex&&(0,n.jsx)(o.default,{onClose:()=>eh(!1)})]})}function v(e){let{gameId:t,onAdvanced:a}=e,[l,s]=(0,r.useState)(4),[i,c]=(0,r.useState)(!1),[o,u]=(0,r.useState)(null),d=(0,r.useCallback)(async()=>{if(!t){u("GameId manquant");return}c(!0),u(null);try{let e=Math.max(1,Math.min(520,l)),n=await (0,h.SC)("/api/games/".concat(t,"/advance-weeks?weeks=").concat(e),{method:"POST"});u("Avanc\xe9 de ".concat(n.weeksApplied," semaines en ").concat(n.durationMs,"ms.")),a&&a()}catch(e){u((null==e?void 0:e.message)||"\xc9chec avance")}finally{c(!1)}},[t,l,a]);return(0,n.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,n.jsx)("div",{className:"text-xs text-neutral-400",children:"Avancer le temps de jeu (ticks hebdomadaires). 1h serveur = 1 semaine simul\xe9e."}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"number",min:1,max:520,value:l,onChange:e=>s(Number(e.target.value)||1),className:"w-20 px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-sm"}),(0,n.jsx)("button",{disabled:i,onClick:d,className:"px-3 py-1.5 rounded bg-purple-700 hover:bg-purple-600 disabled:opacity-50 text-sm",children:i?"Avance…":"Avancer ".concat(l," semaine").concat(l>1?"s":"")})]}),o&&(0,n.jsx)("p",{className:"text-xs text-neutral-300",children:o})]})}function j(){let e=new Date("2025-12-31T23:00:00-05:00"),[t,a]=(0,r.useState)(()=>new Date);if((0,r.useEffect)(()=>{let e=setInterval(()=>a(new Date),6e4);return()=>clearInterval(e)},[]),t>e)return null;let s=Math.max(0,Math.floor((e.getTime()-t.getTime())/864e5));return(0,n.jsxs)("div",{className:"rounded-lg border border-amber-600 bg-gradient-to-r from-amber-700/60 to-yellow-700/50 p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2 shadow",children:[(0,n.jsx)("div",{className:"text-sm md:text-base font-semibold text-amber-100 flex items-center gap-2",children:(0,n.jsx)("span",{children:"\uD83C\uDFC6 Prix sp\xe9cial: Carte cadeau Amazon 20$ attribu\xe9e le 31 d\xe9cembre 2025 au joueur #1 (valeur nette)."})}),(0,n.jsxs)("div",{className:"text-xs text-amber-200 flex items-center gap-3",children:[(0,n.jsxs)("span",{children:["Compte \xe0 rebours: ",s," jour",1!==s?"s":""]}),(0,n.jsx)(l.default,{href:"/quiz",className:"px-3 py-1 rounded bg-amber-500 hover:bg-amber-400 text-black font-medium text-xs",children:"Booster ton net"})]})]})}},1468:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return s}});var n=a(7821),l=a(8078);function s(e){let{onClose:t,storageKey:a="hm-tutorial-home"}=e,s=[{title:"Objectif Global",content:"Fais cro\xeetre ta valeur nette en combinant 4 moteurs: Immobilier (cashflow & appr\xe9ciation), Bourse (diversification & dividendes), Quiz (acc\xe9l\xe9rateur de capital), Pari (risque contr\xf4l\xe9). Garde toujours un coussin de liquidit\xe9s pour saisir les opportunit\xe9s et \xe9viter de bloquer ton jeu."},{title:"Immobilier — Achat & Stocks",content:"Dans ‘Immobilier’, choisis un bien (ex: six‑plex, tour 50, tour 100). V\xe9rifie loyer, taux et charges. Les boutons ‘refill’ et ‘+10’ maintiennent l’offre (6‑plex→10, tours50→10, tours100→5). Diversifie entre flux de loyers et valeur pour refinancements futurs."},{title:"Bourse — Positions & Dividendes",content:"Dans ‘Bourse’, s\xe9lectionne un symbole (SP500, TSX, QQQ, TLT, GLD). Les dividendes tombent p\xe9riodiquement et renforcent ton cash. M\xe9lange actifs cycliques (croissance) et d\xe9fensifs (obligations/or) pour lisser la volatilit\xe9 immobili\xe8re."},{title:"Quiz — Session de 10 Questions",content:"Consomme 1 token pour lancer: Q1-2 faciles, Q3-5 moyennes, Q6-10 difficiles. Chaque bonne r\xe9ponse double ta somme de session (5k→10k→20k...). Tu peux encaisser \xe0 tout moment avant une erreur. Cat\xe9gories vari\xe9es (anatomy, finance, g\xe9n\xe9ral). Optimise en s\xe9curisant apr\xe8s une bonne s\xe9rie."},{title:"Pari — 3 D\xe9s \xe0 Risque",content:"Mise (≥5 000$) puis lance 3 d\xe9s: double = x2, triple ou suite = x3, sinon perte de la mise. Ne sur‑expose pas ton capital avant un achat immobilier cl\xe9. Le volet Pari est un acc\xe9l\xe9rateur ponctuel, pas un moteur principal durable."},{title:"Strat\xe9gies Rapides",content:"D\xe9marrage: 1–2 six‑plex + quiz pour booster le cash. Milieu: entr\xe9e en bourse, viser tour 50 pour masse critique. Fin: grandes structures + quiz difficile avec encaissement prudent. Toujours anticiper p\xe9nurie: utiliser refill avant manque de stock."},{title:"D\xe9pannage & V\xe9rifications",content:"Probl\xe8me quiz? V\xe9rifie: tokens >0, endpoint /api/games/<id>/quiz/status = 200 (console r\xe9seau). Proxy /api/* corrige CORS. Besoin d’aide: lien contact dans la page ‘Contact’. Garde tes logs propres avant de reporter un bug."},{title:"Invitations Bonus",content:"Utilise ‘Inviter un ami’ sur l’accueil: quand valid\xe9 tu re\xe7ois 1 000 000$. Profite-en pour cr\xe9er un mini r\xe9seau et comparer vos strat\xe9gies de portefeuille."}],[r,i]=(0,l.useState)(0),c=(0,l.useRef)(null),o=(0,l.useRef)(null),u=(0,l.useRef)(null),d=(0,l.useRef)(null),[m,x]=(0,l.useState)(!1);function h(e,t,a,n){if(null===a||null===n)return;let l=e-a;Math.abs(l)>Math.abs(t-n)&&Math.abs(l)>40&&(l<0&&r<s.length-1?i(e=>Math.min(s.length-1,e+1)):l>0&&r>0&&i(e=>Math.max(0,e-1)))}function p(e){if(0===e.changedTouches.length){c.current=null,o.current=null;return}let t=e.changedTouches[0];h(t.clientX,t.clientY,c.current,o.current),c.current=null,o.current=null}return(0,n.jsx)("div",{className:"fixed inset-0 z-[9999] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"max-w-xl w-full bg-white rounded-2xl shadow-2xl text-gray-900",onTouchStart:function(e){let t=e.touches[0];c.current=t.clientX,o.current=t.clientY},onTouchEnd:p,onTouchCancel:p,onPointerDown:function(e){"mouse"!==e.pointerType&&(u.current=e.clientX,d.current=e.clientY)},onPointerUp:function(e){"mouse"!==e.pointerType&&(h(e.clientX,e.clientY,u.current,d.current),u.current=null,d.current=null)},onPointerCancel:()=>{u.current=null,d.current=null},children:[(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("div",{className:"text-xl font-bold mb-2",children:s[r].title}),(0,n.jsx)("div",{className:"text-sm text-gray-700 mb-6",children:s[r].content}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("label",{className:"text-xs text-gray-600 flex items-center gap-2 select-none",children:[(0,n.jsx)("input",{type:"checkbox",checked:m,onChange:e=>x(e.target.checked)}),"Ne plus afficher automatiquement"]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[r>0&&(0,n.jsx)("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>i(e=>Math.max(0,e-1)),children:"← Pr\xe9c\xe9dent"}),r<s.length-1?(0,n.jsx)("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>i(e=>Math.min(s.length-1,e+1)),children:"Suivant →"}):(0,n.jsx)("button",{className:"px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:function(){try{m&&localStorage.setItem(a,"1")}catch(e){}t()},children:"C’est parti"})]})]})]}),(0,n.jsx)("div",{className:"px-6 pb-4 text-center",children:(0,n.jsx)("div",{className:"inline-flex gap-1",children:s.map((e,t)=>(0,n.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(t===r?"bg-indigo-600":"bg-gray-300")},t))})})]})})}},2044:function(e,t,a){"use strict";function n(e){let t=Number(e);return isFinite(t)?"$".concat(Math.round(t).toLocaleString()):"$0"}function l(e){return 52*Number(e||0)/12}a.d(t,{P:function(){return l},l:function(){return n}})},3175:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var n=a(8078);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),r=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,n.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:u="",children:d,iconNode:m,...x}=e;return(0,n.createElement)("svg",{ref:t,...o,width:l,height:l,stroke:a,strokeWidth:r?24*Number(s)/Number(l):s,className:i("lucide",u),...!d&&!c(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[t,a]=e;return(0,n.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let a=(0,n.forwardRef)((a,s)=>{let{className:c,...o}=a;return(0,n.createElement)(u,{ref:s,iconNode:t,className:i("lucide-".concat(l(r(e))),"lucide-".concat(e),c),...o})});return a.displayName=r(e),a}},168:function(e,t,a){"use strict";var n=a(7462);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[233,640,320,115,205,744],function(){return e(e.s=3657)}),_N_E=e.O()}]);