(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2407:function(e,t,r){Promise.resolve().then(r.bind(r,5743)),Promise.resolve().then(r.bind(r,1519)),Promise.resolve().then(r.bind(r,9404)),Promise.resolve().then(r.bind(r,5352)),Promise.resolve().then(r.bind(r,1449)),Promise.resolve().then(r.bind(r,1666)),Promise.resolve().then(r.t.bind(r,3812,23)),Promise.resolve().then(r.t.bind(r,7498,23)),Promise.resolve().then(r.bind(r,2209)),Promise.resolve().then(r.bind(r,3178))},5743:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(8078),a=r(6325);function l(){return(0,n.useEffect)(()=>{(0,a.YY)().catch(e=>{console.error("[AdInitializer] Failed to initialize ads:",e)})},[]),null}},1519:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var n=r(7821),a=r(8078);let l="hm-music-enabled",i="hm-music-volume";function s(){let e=(0,a.useRef)(null),[t,r]=(0,a.useState)(!0),[s,o]=(0,a.useState)(.35),[u,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),h=(0,a.useRef)(!1),f=(0,a.useRef)(null),b=(0,a.useRef)(null);(0,a.useEffect)(()=>{try{let e=localStorage.getItem(l),t=localStorage.getItem(i);if(null!=e&&r("1"===e),null!=t){let e=Number(t);Number.isNaN(e)||o(Math.min(1,Math.max(0,e)))}}catch(e){}},[]),(0,a.useEffect)(()=>{let t=!1,r=["/audio/theme.mp3","/audio/Theme.mp3","/audio/theme.MP3"],n=async a=>{if(t||a>=r.length){m(!0);return}let l=r[a];try{let e=await fetch(l,{method:"HEAD",cache:"no-store"});if(!e.ok)throw Error(String(e.status))}catch(e){return n(a+1)}let i=new Audio(l);i.loop=!0,i.preload="auto",i.volume=s,e.current=i;let o=()=>{t||(c(!0),m(!1))},u=()=>{t||(i.pause(),i.removeEventListener("canplay",o),i.removeEventListener("error",u),n(a+1))};i.addEventListener("canplay",o),i.addEventListener("error",u)};return n(0),()=>{t=!0;let r=e.current;r&&(r.pause(),r.removeAttribute("src"),e.current=null),x()}},[]),(0,a.useEffect)(()=>{e.current&&(e.current.volume=s);try{localStorage.setItem(i,String(s))}catch(e){}},[s]);let p=()=>{if(!b.current&&t&&!h.current)try{let e=new(window.AudioContext||window.webkitAudioContext);f.current=e;let t=e.createOscillator(),r=e.createGain();t.type="sine",t.frequency.value=220,r.gain.value=Math.min(1,Math.max(0,.3*s)),t.connect(r).connect(e.destination),"suspended"===e.state&&e.resume().catch(()=>{}),t.start(),b.current=t}catch(e){}},x=()=>{if(b.current){try{b.current.stop()}catch(e){}b.current.disconnect(),b.current=null}if(f.current){try{f.current.close()}catch(e){}f.current=null}};return(0,a.useEffect)(()=>{if(!e.current)return;if(!t||h.current){e.current.pause(),x();return}let r=()=>{if(!h.current){if(f.current&&"suspended"===f.current.state&&f.current.resume().catch(()=>{}),d){p(),n();return}e.current&&e.current.play().catch(()=>{})}},n=()=>{window.removeEventListener("touchend",r),window.removeEventListener("pointerdown",r),window.removeEventListener("click",r),window.removeEventListener("keydown",r)};return window.addEventListener("touchend",r,{once:!0}),window.addEventListener("pointerdown",r,{once:!0}),window.addEventListener("click",r,{once:!0}),window.addEventListener("keydown",r,{once:!0}),setTimeout(()=>{r()},350),n},[t,u,d]),(0,a.useEffect)(()=>{let r=()=>{let r=e.current;document.hidden?(r&&r.pause(),x()):t&&!h.current&&(d?(f.current&&"suspended"===f.current.state&&f.current.resume().catch(()=>{}),p()):r&&r.play().catch(()=>{}))};return document.addEventListener("visibilitychange",r),()=>document.removeEventListener("visibilitychange",r)},[t,d]),(0,a.useEffect)(()=>{let r=()=>{h.current=!0;let t=e.current;t&&t.pause(),x()},n=()=>{h.current=!1;let r=e.current;t&&!document.hidden&&(d?(f.current&&"suspended"===f.current.state&&f.current.resume().catch(()=>{}),p()):r&&r.play().catch(()=>{}))},a=()=>{h.current=!1;let r=e.current;f.current&&"suspended"===f.current.state&&f.current.resume().catch(()=>{}),t&&(d?p():r&&r.play().catch(()=>{}))};return window.addEventListener("hm-music/pause",r),window.addEventListener("hm-music/resume",n),window.addEventListener("hm-music/play-now",a),()=>{window.removeEventListener("hm-music/pause",r),window.removeEventListener("hm-music/resume",n),window.removeEventListener("hm-music/play-now",a)}},[t]),(0,n.jsxs)("div",{className:"fixed z-40 bottom-24 right-4 md:right-6 flex items-center gap-2 bg-neutral-900/80 backdrop-blur border border-neutral-800 rounded-full px-3 py-1.5",children:[(0,n.jsx)("button",{"aria-label":t?"Couper la musique":"Activer la musique",onClick:()=>{let n=!t;r(n);try{localStorage.setItem(l,n?"1":"0")}catch(e){}let a=e.current;a&&(n?(h.current=!1,d?p():a.play().catch(()=>{})):(a.pause(),x()))},className:"px-2 py-1 text-xs rounded bg-neutral-800 hover:bg-neutral-700 border border-neutral-700",children:t?"Musique: ON":"Musique: OFF"}),(0,n.jsx)("input",{"aria-label":"Volume musique",type:"range",min:0,max:1,step:.01,value:s,onChange:e=>o(parseFloat(e.target.value)),className:"w-28 accent-indigo-400"}),d&&(0,n.jsx)("span",{className:"text-[10px] text-amber-300",title:"Placez /public/audio/theme.mp3 pour musique compl\xe8te",children:"(fallback tonal)"})]})}},9404:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(7821),a=r(8078),l=r(6325);function i(){let[e,t]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{try{localStorage.getItem("hm-ad-consent")||t(!0)}catch(e){}i(!1)},[]),r||!e)?null:(0,n.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-neutral-900 border-t border-neutral-700 p-4 shadow-lg z-50 md:bottom-0",children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,n.jsxs)("div",{className:"text-sm text-neutral-300",children:[(0,n.jsx)("p",{className:"font-medium mb-1",children:"Cookies et publicit\xe9s"}),(0,n.jsxs)("p",{className:"text-xs text-neutral-400",children:["Nous utilisons des cookies et affichons des publicit\xe9s pour am\xe9liorer votre exp\xe9rience. En acceptant, vous consentez \xe0 l'utilisation de cookies publicitaires."," ",(0,n.jsx)("a",{href:"/confidentialite/",className:"text-emerald-400 hover:underline",children:"Politique de confidentialit\xe9"})]})]}),(0,n.jsxs)("div",{className:"flex gap-2 shrink-0",children:[(0,n.jsx)("button",{onClick:()=>{try{localStorage.setItem("hm-ad-consent","refused"),localStorage.setItem("hm-ad-consent-date",new Date().toISOString())}catch(e){}t(!1)},className:"px-4 py-2 rounded bg-neutral-800 hover:bg-neutral-700 text-sm text-neutral-300",children:"Refuser"}),(0,n.jsx)("button",{onClick:()=>{try{localStorage.setItem("hm-ad-consent","accepted"),localStorage.setItem("hm-ad-consent-date",new Date().toISOString())}catch(e){}t(!1),(0,l.YY)().catch(e=>{console.error("[ConsentBanner] initializeAds failed after accept:",e)})},className:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500 text-sm text-white font-medium",children:"Accepter"})]})]})})})}},5352:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(7821),a=r(4233),l=r(168),i=r(8078);let s=[{href:"/",label:"Accueil"},{href:"/immobilier",label:"Immobilier"},{href:"/bourse",label:"Bourse"},{href:"/portefeuille",label:"Portefeuille"},{href:"/drag",label:"Drag"},{href:"/quiz",label:"Quiz"},{href:"/pari",label:"Pari"},{href:"/tutoriel",label:"Tutoriel"},{href:"/telecharger",label:"T\xe9l\xe9charger"},{href:"/confidentialite",label:"Confidentialit\xe9"},{href:"/contact",label:"Contact"}];function o(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),[r,o]=(0,i.useState)(!1),u=(0,i.useCallback)(e=>{o(!1),t.push(e)},[t]);return(0,n.jsxs)("div",{className:"md:hidden",children:[(0,n.jsxs)("button",{type:"button","aria-label":"Ouvrir le menu",onClick:()=>o(!0),className:"fixed z-40 bottom-20 right-4 w-16 h-16 rounded-full bg-neutral-900 border border-neutral-800 shadow-xl text-white flex flex-col items-center justify-center gap-1 active:scale-95 transition-transform",children:[(0,n.jsx)("span",{className:"block w-8 h-[3px] bg-white rounded"}),(0,n.jsx)("span",{className:"block w-8 h-[3px] bg-white rounded"}),(0,n.jsx)("span",{className:"block w-8 h-[3px] bg-white rounded"}),(0,n.jsx)("span",{className:"text-[10px] font-medium tracking-wide",children:"Menu"})]}),(0,n.jsxs)("div",{className:"fixed z-40 bottom-4 right-4 flex gap-3",children:[(0,n.jsxs)(a.default,{href:"/quiz",className:["relative group flex flex-col items-center justify-center w-16 h-16 rounded-xl shadow-lg border",(null==e?void 0:e.startsWith("/quiz"))?"bg-sky-600 border-sky-500 text-white":"bg-sky-700 border-sky-600 text-white hover:bg-sky-600"].join(" "),prefetch:!1,children:[(0,n.jsx)("span",{className:"text-sm font-semibold",children:"Quiz"}),(0,n.jsx)("span",{className:"absolute -top-2 -right-2 bg-white text-sky-700 text-[10px] px-1.5 py-0.5 rounded-full shadow group-hover:scale-110 transition-transform",children:"â˜…"})]}),(0,n.jsx)(a.default,{href:"/pari",className:["flex flex-col items-center justify-center w-16 h-16 rounded-xl shadow-lg border",(null==e?void 0:e.startsWith("/pari"))?"bg-amber-600 border-amber-500 text-white":"bg-amber-700 border-amber-600 text-white hover:bg-amber-600"].join(" "),prefetch:!1,children:(0,n.jsx)("span",{className:"text-sm font-semibold",children:"Pari"})})]}),r&&(0,n.jsx)("div",{className:"fixed inset-0 z-50 bg-black/70",onClick:()=>o(!1),children:(0,n.jsxs)("nav",{className:"absolute inset-x-0 bottom-0 bg-neutral-900 border-t border-neutral-800 rounded-t-2xl p-5 pt-4 max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("div",{className:"text-sm font-semibold tracking-wide text-neutral-300",children:"Navigation"}),(0,n.jsx)("button",{type:"button","aria-label":"Fermer le menu",onClick:()=>o(!1),className:"px-3 py-1.5 rounded-md bg-neutral-800 border border-neutral-700 text-neutral-200 text-sm hover:bg-neutral-700",children:"Fermer"})]}),(0,n.jsx)("ul",{className:"grid grid-cols-2 gap-2 text-[15px]",children:s.map(t=>{let r="/"===t.href?"/":t.href.replace(/\/$/,""),a=e===r||(null==e?void 0:e.startsWith("".concat(r,"/")));return(0,n.jsx)("li",{children:(0,n.jsx)("button",{type:"button",onClick:()=>u(t.href),className:["block w-full rounded-lg px-4 py-3 border font-medium",a?"bg-neutral-800 border-neutral-700 text-white":"bg-neutral-900 border-neutral-800 text-neutral-300 hover:bg-neutral-800/70"].join(" "),children:t.label})},t.href)})}),(0,n.jsxs)("div",{className:"mt-5 grid grid-cols-2 gap-3",children:[(0,n.jsx)("button",{type:"button",onClick:()=>u("/quiz"),className:["block w-full text-center rounded-lg px-4 py-3 font-semibold shadow",(null==e?void 0:e.startsWith("/quiz"))?"bg-sky-600 text-white":"bg-sky-700 text-white hover:bg-sky-600"].join(" "),children:"D\xe9marrer Quiz"}),(0,n.jsx)("button",{type:"button",onClick:()=>u("/pari"),className:["block w-full text-center rounded-lg px-4 py-3 font-semibold shadow",(null==e?void 0:e.startsWith("/pari"))?"bg-amber-600 text-white":"bg-amber-700 text-white hover:bg-amber-600"].join(" "),children:"Lancer Pari"})]})]})})]})}},1449:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var n=r(8078),a=r(4328),l=r(2705),i=r(9513);function s(){let e=(0,n.useRef)(null),[t,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let t=!0;return(async()=>{try{let s=await (0,i.SC)("/api/auth/me").catch(()=>null);if(!t||!(null==s?void 0:s.email))return;let{gameId:o,playerId:u,nickname:c}=(0,l.dF)()||{gameId:"",playerId:"",nickname:""};if(!o||!u){var n;let e=await (0,i.SC)("/api/games").catch(()=>null),t=null==e?void 0:null===(n=e.games)||void 0===n?void 0:n[0];if(t){let e=await (0,i.SC)("/api/games/".concat(t.id,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).catch(()=>null);(null==e?void 0:e.playerId)&&(o=t.id,u=e.playerId,c=s.email,(0,l.Aj)({gameId:o,playerId:u,nickname:c}))}}if(!o)return;let d=(0,a.io)(i.Sg,{path:"/socket.io",transports:["websocket"],query:{gameId:o,nickname:s.email},withCredentials:!0});e.current=d,r(!0),d.emit("join-game",o,s.email)}catch(e){}})(),()=>{t=!1;try{var r;null===(r=e.current)||void 0===r||r.close()}catch(e){}e.current=null}},[]),null}},1666:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var n=r(7821),a=r(8078),l=r(168),i=r(9513);function s(){let e=(0,l.usePathname)(),[t,r]=(0,a.useState)(""),[s,o]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{(async()=>{try{let e=await (0,i.SC)("/api/auth/me");r(e.email),o(!!e.isAdmin)}catch(e){}})()},[]),"/login"===e||"/forgot"===e||"/reset"===e)?null:(0,n.jsx)("div",{className:"text-sm text-neutral-300 flex items-center gap-2",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"inline-flex h-2 w-2 rounded-full bg-emerald-500"}),(0,n.jsx)("span",{className:"font-medium",title:t,children:t}),s&&(0,n.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-amber-600/30 border border-amber-600/60",children:"Admin"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"inline-flex h-2 w-2 rounded-full bg-neutral-500"}),(0,n.jsx)("a",{href:"/login",className:"underline",children:"Se connecter"})]})})}},168:function(e,t,r){"use strict";var n=r(7462);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},2209:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=r(1905);function a(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},3178:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let n=r(7821),a=r(4116);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,a.getExpectedRequestStore)("next/dynamic css"),l=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,n.jsx)(n.Fragment,{children:l.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},3812:function(){}},function(e){e.O(0,[836,498,640,305,115,205,744],function(){return e(e.s=2407)}),_N_E=e.O()}]);