(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931,468],{3657:function(e,t,a){Promise.resolve().then(a.bind(a,3253))},3253:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n=a(7821),r=a(4233),l=a(4328),s=a(8078),i=a(168),o=a(2705),c=a(1468),d=a(9513),u=a(2044),m=a(6325),x=a(7588);let h="lobby";function p(){let e=(0,i.useRouter)(),[t,a]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),[v,j]=(0,s.useState)(""),[y,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=!0;return(async()=>{try{console.log("[Auth] Tentative /api/auth/me ...");let t=await (0,d.SC)("/api/auth/me");console.log("[Auth] Succ\xe8s /api/auth/me",t),e&&(a(!0),f(!!t.isAdmin),j(t.email),N(null));try{window.dispatchEvent(new Event("hm-music/resume")),window.dispatchEvent(new Event("hm-music/play-now"))}catch(e){}}catch(t){e&&(a(!1),f(!1),j(""),N("Non connect\xe9."))}})(),()=>{e=!1}},[e]);let[w,S]=(0,s.useState)([]),[k,C]=(0,s.useState)(""),[P,I]=(0,s.useState)(""),[M,A]=(0,s.useState)(""),[T,E]=(0,s.useState)(h),[D,R]=(0,s.useState)([]),[q,B]=(0,s.useState)(null),[O,z]=(0,s.useState)(null),[L,F]=(0,s.useState)(""),[Q,V]=(0,s.useState)([]),[G,U]=(0,s.useState)(""),[J,$]=(0,s.useState)(null),[_,W]=(0,s.useState)(null),[X,H]=(0,s.useState)([]),[Y,K]=(0,s.useState)([]),[Z,ee]=(0,s.useState)({}),[et,ea]=(0,s.useState)(null),[en,er]=(0,s.useState)([]),[el,es]=(0,s.useState)(!1),[ei,eo]=(0,s.useState)(!1),[ec,ed]=(0,s.useState)(!1),[eu,em]=(0,s.useState)(null),[ex,eh]=(0,s.useState)(!1),[ep,eg]=(0,s.useState)(null),[eb,ef]=(0,s.useState)([]),[ev,ej]=(0,s.useState)(null),[ey,eN]=(0,s.useState)(1e6),[ew,eS]=(0,s.useState)(0),[ek,eC]=(0,s.useState)(!1),[eP,eI]=(0,s.useState)(!1),[eM,eA]=(0,s.useState)(null),[eT,eE]=(0,s.useState)(null),[eD,eR]=(0,s.useState)(!1),[eq,eB]=(0,s.useState)(!1),eO=(0,s.useCallback)(async()=>{var e,t,a,n;let r=window;try{let a=null==r?void 0:null===(t=r.Capacitor)||void 0===t?void 0:null===(e=t.Plugins)||void 0===e?void 0:e.Browser;if(null==a?void 0:a.open){await a.open({url:x.M});return}}catch(e){}try{let e=null==r?void 0:null===(n=r.Capacitor)||void 0===n?void 0:null===(a=n.Plugins)||void 0===a?void 0:a.App;if(null==e?void 0:e.openUrl){await e.openUrl({url:x.M});return}}catch(e){}try{window.open(x.M,"_blank","noopener,noreferrer")}catch(e){window.location.href=x.M}},[]);(0,s.useEffect)(()=>{let e=(0,o.dF)();if(e){var t;C(e.gameId),I(null!==(t=e.playerId)&&void 0!==t?t:""),e.nickname&&U(e.nickname)}},[]),(0,s.useEffect)(()=>{try{var e,t;eB(!!(null===(t=window.Capacitor)||void 0===t?void 0:null===(e=t.isNativePlatform)||void 0===e?void 0:e.call(t)))}catch(e){eB(!1)}},[]),(0,s.useEffect)(()=>{try{localStorage.getItem("hm-tutorial-home")||eh(!0)}catch(e){}},[]),(0,s.useEffect)(()=>{if(k&&P)try{let e=new URLSearchParams(window.location.search).get("invite");if(!e||localStorage.getItem("hm-invite-accepted-".concat(e)))return;(async()=>{try{await (0,d.SC)("/api/games/".concat(k,"/referrals/accept"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})}),localStorage.setItem("hm-invite-accepted-".concat(e),"1"),eg(e)}catch(e){}})()}catch(e){}},[k,P]);let ez=(0,s.useCallback)(e=>{var t,a,n;let r={gameId:null!==(t=null==e?void 0:e.gameId)&&void 0!==t?t:k,playerId:null!==(a=null==e?void 0:e.playerId)&&void 0!==a?a:P,nickname:null!==(n=null==e?void 0:e.nickname)&&void 0!==n?n:G};r.gameId&&(0,o.Aj)(r)},[k,P,G]),eL=(0,s.useCallback)(async()=>{if(k)try{var e,t;console.log("[Home] Fetch state gameId=",k);let a=await (0,d.SC)("/api/games/".concat(k,"/state"));console.log("[Home] State re\xe7u:",a),E(a.status),R(null!==(e=a.players)&&void 0!==e?e:[]),A(null!==(t=a.code)&&void 0!==t?t:""),B(null)}catch(e){console.warn("[Home] \xc9chec state",e),B(e instanceof Error?e.message:"\xc9chec de r\xe9cup\xe9ration de l'\xe9tat")}},[k]),eF=(0,s.useCallback)(async()=>{if(k&&P)try{var e;let t=await (0,d.SC)("/api/games/".concat(k,"/bonus/status"));eC(!!t.available),eS(Math.max(0,Number(null!==(e=t.secondsUntilAvailable)&&void 0!==e?e:0))),"number"!=typeof t.rewardAmount||Number.isNaN(t.rewardAmount)||eN(t.rewardAmount),eE(null)}catch(e){if((null==e?void 0:e.status)===404)return;(null==e?void 0:e.message)?eE(e.message):eE("Impossible de r\xe9cup\xe9rer le bonus.")}},[k,P]),eQ=(0,s.useCallback)(e=>{let t=Math.max(0,Math.floor(e)),a=Math.floor(t/60),n=t%60;return a>0?"".concat(a,"min ").concat(n,"s"):"".concat(n,"s")},[]),eV=(0,s.useCallback)(async()=>{if(!ec&&t&&!k){ed(!0),console.log("[Home] AutoJoin d\xe9clench\xe9 isLoggedIn=",t,"gameId=",k);try{var e;let t=await (0,d.SC)("/api/games");console.log("[Home] Liste des games:",t);let a=null===(e=t.games)||void 0===e?void 0:e[0];if(!a)throw Error("Partie introuvable");let n=await (0,d.SC)("/api/games/".concat(a.id,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});console.log("[Home] Join OK:",n),C(a.id),I(n.playerId),A(a.code),U(v),ez({gameId:a.id,playerId:n.playerId,nickname:v}),B(null),z("Vous avez rejoint la partie mondiale en tant que ".concat(v)),eL()}catch(e){console.error("[AutoJoin] Erreur join:",(null==e?void 0:e.message)||e)}}},[ec,t,k,v,ez,eL]),eG=(0,s.useCallback)(async()=>{if(!k||!P){eE("Rejoignez la partie mondiale pour d\xe9bloquer le bonus.");return}if(!eP){eI(!0),eE(null),eA(null);try{var e,t;if(!await (0,m.fL)((e,t)=>{console.log("[Bonus] Reward callback ".concat(e," ").concat(t))})){eE("La publicit\xe9 n'est pas pr\xeate. R\xe9essayez dans quelques instants.");return}let a=await (0,d.SC)("/api/games/".concat(k,"/bonus/redeem"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),n=Number(null!==(e=null==a?void 0:a.rewardAmount)&&void 0!==e?e:ey);eN(n),eA("+".concat((0,u.l)(n)));let r=Number(null!==(t=null==a?void 0:a.secondsUntilNext)&&void 0!==t?t:0),l=(0,m.Ie)();eS(Math.max(r,l)),eC(!1),eF(),eL()}catch(e){(null==e?void 0:e.status)===429&&eF(),eE((null==e?void 0:e.message)||"Impossible de cr\xe9diter le bonus.")}finally{eI(!1)}}},[k,P,eP,ey,eF,eL]);(0,s.useEffect)(()=>{eV()},[eV]),(0,s.useEffect)(()=>{if(k&&v)try{let e=(0,l.io)(d.Sg,{path:"/socket.io",transports:["websocket"],withCredentials:!0,query:{gameId:k,nickname:v}});ej(e);let t=async()=>{try{let e=await fetch("".concat(d.Sg,"/api/games/").concat(k,"/online"),{credentials:"include"});if(!e.ok)return;let t=await e.json();ef(Array.isArray(t.users)?t.users:[])}catch(e){}};t();let a=setInterval(t,15e3);return()=>{try{clearInterval(a)}catch(e){}e.close(),ej(null)}}catch(e){}},[k,v]);let eU=(0,s.useCallback)(async e=>{if(k){W(e);try{var t,a,n,r,l,s;let[i,o,c,u,m]=await Promise.all([fetch("".concat(d.Sg,"/api/games/").concat(k,"/properties/holdings/").concat(e.id),{credentials:"include"}),fetch("".concat(d.Sg,"/api/games/").concat(k,"/markets/holdings/").concat(e.id),{credentials:"include"}),fetch("".concat(d.Sg,"/api/games/").concat(k,"/markets/latest"),{credentials:"include"}),fetch("".concat(d.Sg,"/api/games/").concat(k,"/economy"),{credentials:"include"}),fetch("".concat(d.Sg,"/api/quiz/public-stats"),{credentials:"include"})]),x=i.ok?await i.json():{holdings:[]},h=o.ok?await o.json():{holdings:[]},p=c.ok?await c.json():{prices:[]},g=u.ok?await u.json():null,b=m.ok?await m.json():null;H(null!==(t=x.holdings)&&void 0!==t?t:[]),K(null!==(a=h.holdings)&&void 0!==a?a:[]);let f={};for(let e of null!==(n=p.prices)&&void 0!==n?n:[])f[e.symbol]=e.price;if(ee(f),g&&ea({baseMortgageRate:Number(null!==(r=g.baseMortgageRate)&&void 0!==r?r:.05),appreciationAnnual:Number(null!==(l=g.appreciationAnnual)&&void 0!==l?l:.02),schedule:Array.isArray(g.schedule)?g.schedule:[]}),b){let e=Array.isArray(b.categories)?b.categories.map(e=>{var t,a,n,r;return{category:String(null!==(t=e.category)&&void 0!==t?t:"autre"),total:Number(null!==(a=e.total)&&void 0!==a?a:0),used:Number(null!==(n=e.used)&&void 0!==n?n:0),remaining:Number(null!==(r=e.remaining)&&void 0!==r?r:0)}}):void 0;em({remaining:Number(null!==(s=b.remaining)&&void 0!==s?s:0),remainingByDifficulty:b.remainingByDifficulty,remainingByCategory:b.remainingByCategory,categories:e})}}catch(e){}}},[k]),eJ=(0,s.useCallback)(()=>{var e,t,a;if(!_){er([]);return}let n=((null==et?void 0:et.schedule)&&et.schedule.length?et.schedule:Array.from({length:10},()=>.02)).slice(0,10),r=null!==(e=null==et?void 0:et.baseMortgageRate)&&void 0!==e?e:.05,l=(X||[]).map(e=>{var t,a,n;let l=Number(null!==(t=e.currentValue)&&void 0!==t?t:0),s=Number(null!==(a=e.mortgageDebt)&&void 0!==a?a:0),i=Number(null!==(n=e.weeklyPayment)&&void 0!==n?n:0)||function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,n=Math.max(1,Math.round(52*a)),r=t/52;return e<=0?0:r<=0?e/n:r*e/(1-Math.pow(1+r,-n))}(s,r,25);return{value:l,debt:s,rate:r,payW:i}}),s=(Y||[]).map(e=>{var t,a,n;let r=null!==(a=Z[e.symbol])&&void 0!==a?a:Number(null!==(t=e.avgPrice)&&void 0!==t?t:0);return{value:Number(null!==(n=e.quantity)&&void 0!==n?n:0)*Number(null!=r?r:0),er:function(e){switch(e){case"SP500":case"VFV":case"XLF":case"XLE":case"IWM":return .06;case"QQQ":case"AAPL":case"MSFT":case"AMZN":case"META":case"GOOGL":case"NVDA":case"TSLA":case"COST":return .08;case"TSX":case"VDY":default:return .05;case"UPRO":return .18;case"TQQQ":return .24;case"GLD":return .02;case"TLT":return .03}}(String(e.symbol))}}),i=Number(null!==(t=_.cash)&&void 0!==t?t:0),o=[],c=l.reduce((e,t)=>e+(t.value-t.debt),0)+s.reduce((e,t)=>e+t.value,0)+i;o.push({year:0,net:c});let d=l.map(e=>({...e})),u=s.map(e=>({...e}));for(let e=1;e<=10;e++){for(let t of d){let r=Math.max(0,52*t.payW-t.debt*t.rate);t.debt=Math.max(0,t.debt-r),t.value=t.value*(1+(null!==(a=n[e-1])&&void 0!==a?a:.02))}for(let e of u)e.value=e.value*(1+e.er);let t=d.reduce((e,t)=>e+(t.value-t.debt),0)+u.reduce((e,t)=>e+t.value,0)+i;o.push({year:e,net:t})}er(o)},[_,X,Y,Z,et]);(0,s.useEffect)(()=>{if(!ei){er([]);return}es(!0);try{eJ()}finally{es(!1)}},[ei,_,X,Y,Z,et]),(0,s.useCallback)(async()=>{try{var e;let t=await (0,d.SC)("/api/games"),a=null===(e=t.games)||void 0===e?void 0:e[0];if(!a)throw Error("Partie introuvable");let n=await (0,d.SC)("/api/games/".concat(a.id,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});C(a.id),I(n.playerId),A(a.code),ez({gameId:a.id,playerId:n.playerId}),B(null),z("Rejoint la partie ".concat(a.code)),eL()}catch(e){z(null),B(e instanceof Error?e.message:"Impossible de rejoindre la partie")}},[ez,eL]);let e$=(0,s.useCallback)(async()=>{try{let n=k;if(!n){var e,t,a;let r=await (0,d.SC)("/api/games");if(!(n=null!==(a=null===(t=r.games)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id)&&void 0!==a?a:""))throw Error("Partie introuvable");C(n)}await (0,d.SC)("/api/games/".concat(n,"/start"),{method:"POST"}),z("Partie d\xe9marr\xe9e"),eL()}catch(e){B(e instanceof Error?e.message:"\xc9chec du d\xe9marrage")}},[k,eL]),e_=(0,s.useCallback)(async()=>{try{if(!window.confirm("Red\xe9marrer la partie effacera joueurs, annonces, positions et historique. Continuer ?"))return;let n=k;if(!n){var e,t,a;let r=await (0,d.SC)("/api/games");if(!(n=null!==(a=null===(t=r.games)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id)&&void 0!==a?a:""))throw Error("Partie introuvable");C(n)}console.log("[DEBUG] Calling restart for game ".concat(n)),await (0,d.SC)("/api/games/".concat(n,"/restart"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})}),console.log("[DEBUG] Restart successful"),z("Partie red\xe9marr\xe9e avec succ\xe8s!"),B(null),(0,o.Ov)(),C(""),I(""),U(""),eL()}catch(e){console.error("[DEBUG] Restart error:",e),B(e instanceof Error?e.message:"\xc9chec du red\xe9marrage")}},[k,eL]);(0,s.useCallback)(()=>{(0,o.Ov)(),C(""),I(""),U(""),A(""),R([]),S([]),E(h),z("Session effac\xe9e")},[]);let eW=window.location.origin,[eX,eH]=(0,s.useState)(""),[eY,eK]=(0,s.useState)(null),eZ=(0,s.useCallback)(async()=>{try{navigator.share?(await navigator.share({title:"Rejoins le jeu du Millionnaire",text:"Clique pour te connecter et rejoindre la partie globale.",url:eW}),$("Lien partag\xe9")):navigator.clipboard?(await navigator.clipboard.writeText(eW),$("Lien copi\xe9 dans le presse-papiers")):$("Partage non support\xe9. Copiez l'URL du navigateur.")}catch(e){$("Partage annul\xe9")}},[eW]),e0=(0,s.useCallback)(async()=>{try{if(!k)throw Error("Partie introuvable");let e=await (0,d.SC)("/api/games/".concat(k,"/referrals/create"),{method:"POST"});eH(e.url),eK("Lien g\xe9n\xe9r\xe9. R\xe9compense: ".concat((0,u.l)(e.reward||1e6))),navigator.share?await navigator.share({title:"Rejoins le Millionnaire",text:"Accepte mon invitation et commen\xe7ons !",url:e.url}):navigator.clipboard&&(await navigator.clipboard.writeText(e.url),eK(e=>e?e+" — Lien copi\xe9":"Lien copi\xe9"))}catch(e){eK((null==e?void 0:e.message)||"\xc9chec de cr\xe9ation du lien")}},[k]);(0,s.useEffect)(()=>{k&&eL()},[k,eL]),(0,s.useEffect)(()=>{eF()},[eF]),(0,s.useEffect)(()=>{if(ew<=0)return;let e=setTimeout(()=>{eS(e=>Math.max(0,e-1))},1e3);return()=>clearTimeout(e)},[ew]),(0,s.useEffect)(()=>{let e=!0,t=async()=>{try{let t=await (0,m.yk)();e&&eR(t)}catch(t){e&&eR(!1)}};t();let a=setInterval(t,5e3);return()=>{e=!1,clearInterval(a)}},[]),(0,s.useEffect)(()=>{if(!eq)return;let e=()=>{let e=(0,m.Ie)();e>0&&eS(t=>e>t?e:t)};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[eq]),(0,s.useEffect)(()=>{k&&!P&&(async()=>{try{try{let e=await (0,d.SC)("/api/games/".concat(k,"/me"));I(e.player.id),e.player.nickname&&U(e.player.nickname),ez({gameId:k,playerId:e.player.id,nickname:e.player.nickname})}catch(e){}}catch(e){}})()},[k,P,ez]);let e2=(0,s.useMemo)(()=>w.length>0?w:D.map(e=>({playerId:e.id,nickname:e.nickname,netWorth:e.netWorth})).sort((e,t)=>t.netWorth-e.netWorth),[w,D]),e1=!k||!P||eP||ew>0||!eD,e5=k&&P?eP?"Chargement de la publicit\xe9...":ew>0?"Disponible dans ".concat(eQ(ew)):eD?"Regarder la publicit\xe9 pour ".concat((0,u.l)(ey)):eq?"Chargement de la publicit\xe9...":"Disponible dans l'app mobile":"Connexion en cours...";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("main",{className:"space-y-6 overflow-x-hidden",children:[(0,n.jsxs)("div",{className:"text-xs opacity-60",children:["DEBUG API_BASE: ",d.Sg]}),(0,n.jsx)(()=>y?(0,n.jsxs)("div",{className:"p-3 mb-4 rounded bg-red-900/40 border border-red-700 text-sm",children:[(0,n.jsxs)("p",{className:"font-semibold",children:["Auth: ",y]}),(0,n.jsx)("p",{className:"mt-1 text-xs opacity-75",children:"Si cela persiste, ouvrez la page /debug-auth pour plus de d\xe9tails (token, cookies)."})]}):null,{}),(0,n.jsxs)("div",{className:"rounded-lg border border-indigo-600 bg-gradient-to-r from-indigo-700/60 to-purple-700/50 p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2 shadow",children:[(0,n.jsx)("div",{className:"text-sm md:text-base font-semibold text-indigo-100 flex items-center gap-2",children:(0,n.jsx)("span",{children:"✨ Nouveaut\xe9s: Difficult\xe9 Quiz r\xe9\xe9quilibr\xe9e, cat\xe9gorie Anatomy (biologie), tutoriel complet."})}),(0,n.jsxs)("div",{className:"text-xs flex items-center gap-3",children:[(0,n.jsx)(r.default,{href:"/tutoriel",className:"px-3 py-1 rounded bg-indigo-500 hover:bg-indigo-400 text-black font-medium text-xs",children:"Voir le tutoriel"}),(0,n.jsx)(r.default,{href:"/quiz",className:"px-3 py-1 rounded bg-purple-500 hover:bg-purple-400 text-black font-medium text-xs",children:"Jouer au Quiz"}),(0,n.jsx)(r.default,{href:"/telecharger",className:"px-3 py-1 rounded bg-emerald-500 hover:bg-emerald-400 text-black font-medium text-xs",children:"T\xe9l\xe9charger l'app"})]})]}),(0,n.jsx)(b,{}),t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("section",{className:"rounded-xl border border-emerald-600/60 bg-gradient-to-r from-emerald-900/70 to-green-800/60 p-4 shadow-lg space-y-3",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,n.jsxs)("div",{className:"space-y-1 text-sm text-emerald-100",children:[(0,n.jsxs)("p",{className:"text-lg md:text-xl font-semibold text-white",children:["Bonus pub : ",(0,u.l)(ey)]}),(0,n.jsxs)("p",{className:"text-emerald-100/80 text-sm",children:["Regardez une publicit\xe9 pour cr\xe9diter instantan\xe9ment ",(0,u.l)(ey)," sur votre compte."]})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full md:w-auto",children:[(0,n.jsx)("button",{onClick:eG,disabled:e1,className:"px-4 py-2 rounded-lg font-semibold transition-all w-full sm:w-auto ".concat(e1?"bg-emerald-700/40 text-emerald-200/70 cursor-not-allowed":"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 text-black shadow-lg shadow-emerald-900/40"),children:e5}),(0,n.jsx)(r.default,{href:"/bonus",className:"text-xs text-emerald-100/80 underline text-center",children:"En savoir plus"})]})]}),!eq&&(0,n.jsx)("p",{className:"text-xs text-emerald-100/70 text-center md:text-right",children:"Disponible dans l'application mobile. T\xe9l\xe9chargez-la via l'onglet T\xe9l\xe9charger."}),eM&&(0,n.jsxs)("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/15 px-3 py-2 text-sm text-emerald-100 text-center",children:[eM," cr\xe9dit\xe9 sur votre compte !"]}),eT&&(0,n.jsx)("div",{className:"rounded-lg border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-100 text-center",children:eT})]}),(0,n.jsxs)("section",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Partie Mondiale du Millionnaire"}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[v&&(0,n.jsxs)("p",{className:"text-sm text-neutral-400 flex items-center gap-2",children:["Connect\xe9: ",(0,n.jsxs)("span",{className:"text-emerald-400 flex items-center gap-1",children:[eb.includes(v)&&(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),v]})]}),p&&(0,n.jsx)("span",{className:"px-2 py-1 rounded bg-red-700 text-xs font-semibold",children:"ADMIN"})]})]}),k&&P&&(0,n.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-700/50 rounded-lg p-3",children:[(0,n.jsx)("p",{className:"text-emerald-300 text-sm",children:"✅ Vous \xeates automatiquement inscrit \xe0 la partie mondiale !"}),(0,n.jsxs)("p",{className:"text-neutral-400 text-xs mt-1",children:["Pseudo: ",G||v]})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full",children:[(0,n.jsx)("button",{onClick:async()=>{try{await (0,d.SC)("/api/auth/logout",{method:"POST"})}catch(e){}try{if("undefined"!=typeof document){let e="Thu, 01 Jan 1970 00:00:00 GMT";document.cookie="hm_auth=; expires="+e+"; path=/",document.cookie="hm_csrf=; expires="+e+"; path=/",document.cookie="hm_guest=; expires="+e+"; path=/"}}catch(e){}try{window.localStorage.removeItem("HM_TOKEN")}catch(e){}try{window.localStorage.removeItem("hm-session")}catch(e){}(0,o.Ov)(),a(!1),f(!1),j(""),e.replace("/login")},className:"px-4 py-2 rounded bg-rose-700 hover:bg-rose-600 w-full sm:w-auto",children:"Se d\xe9connecter"}),(0,n.jsx)("button",{onClick:e0,className:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500 w-full sm:w-auto",children:"Inviter un ami (gagne 1M$)"}),(0,n.jsx)("button",{onClick:eZ,className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 w-full sm:w-auto",children:"Partager le jeu"}),(0,n.jsx)("a",{href:"mailto:?subject=".concat(encodeURIComponent("Rejoins le jeu du Millionnaire"),"&body=").concat(encodeURIComponent("Rejoins-moi: "+eW)),className:"px-4 py-2 rounded bg-indigo-700 hover:bg-indigo-600 text-center w-full sm:w-auto",children:"Inviter par email"})]}),eX&&(0,n.jsxs)("div",{className:"text-xs text-neutral-300",children:["Lien d'invitation: ",(0,n.jsx)("a",{href:eX,className:"underline break-all",children:eX})]}),(eY||J)&&(0,n.jsx)("p",{className:"text-xs text-neutral-400",children:eY||J}),ep&&(0,n.jsx)("p",{className:"text-xs text-emerald-400",children:"Invitation appliqu\xe9e. Merci !"}),O&&(0,n.jsx)("p",{className:"text-sm text-emerald-400",children:O}),q&&(0,n.jsx)("p",{className:"text-sm text-red-400",children:q})]})]}):(0,n.jsxs)("section",{className:"space-y-3",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Connexion requise"}),(0,n.jsx)("p",{className:"text-neutral-300",children:"Veuillez vous connecter pour cr\xe9er ou rejoindre une partie."}),(0,n.jsx)(r.default,{href:"/login",className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 inline-block",children:"Aller \xe0 la page de connexion"})]}),(0,n.jsxs)("section",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Tableau de bord"}),(0,n.jsxs)("p",{className:"text-sm text-neutral-300",children:["Classement (rafra\xeechissement manuel) — statut: ",T]}),(0,n.jsx)("div",{className:"mt-2 flex gap-2",children:(0,n.jsx)("button",{onClick:eL,className:"px-3 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-sm",children:"Actualiser"})}),(0,n.jsx)("div",{className:"mt-4 bg-neutral-900 rounded border border-neutral-800 overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left",children:[(0,n.jsx)("th",{className:"p-2",children:"#"}),(0,n.jsx)("th",{className:"p-2",children:"Joueur"}),(0,n.jsx)("th",{className:"p-2",children:"Valeur nette"})]})}),(0,n.jsx)("tbody",{children:e2.map((e,t)=>(0,n.jsxs)("tr",{className:"border-t border-neutral-800",children:[(0,n.jsx)("td",{className:"p-2",children:t+1}),(0,n.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[eb.includes(e.nickname)&&(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),e.nickname]}),(0,n.jsx)("td",{className:"p-2",children:(0,u.l)(e.netWorth)})]},e.playerId))})]})})]}),D.length>0&&(0,n.jsxs)("section",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Joueurs"}),(0,n.jsx)("ul",{className:"mt-2 space-y-2 text-sm text-neutral-300",children:D.map(e=>(0,n.jsxs)("li",{className:"border border-neutral-800 rounded px-3 py-2 bg-neutral-900",children:[(0,n.jsxs)("div",{className:"text-base font-medium mb-2 flex items-center gap-2",children:[eb.includes(e.nickname)&&(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),e.nickname]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,n.jsxs)("span",{children:["Cash: ",(0,u.l)(e.cash)," | Net: ",(0,u.l)(e.netWorth)]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{title:"Voir le portefeuille",onClick:()=>eU(e),className:"px-2 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-xs",children:"Voir portefeuille"}),p&&(0,n.jsx)("button",{title:"Supprimer ce joueur",onClick:async()=>{if(k&&window.confirm("Supprimer ".concat(e.nickname," ? Tous ses biens, annonces et positions seront effac\xe9s.")))try{await (0,d.SC)("/api/games/".concat(k,"/players/").concat(e.id),{method:"DELETE"}),z("Joueur supprim\xe9: ".concat(e.nickname)),eL()}catch(e){B(e instanceof Error?e.message:"\xc9chec de suppression")}},className:"px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Poubelle"})]})]})]},e.id))})]}),p&&(0,n.jsxs)("section",{className:"space-y-2 border border-red-900/40 bg-red-950/20 rounded p-3",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-red-300",children:"Admin"}),(0,n.jsx)("p",{className:"text-sm text-red-200/80",children:"Contr\xf4les r\xe9serv\xe9s \xe0 l'administrateur. Le red\xe9marrage efface toutes les donn\xe9es de la partie."}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:e$,className:"px-3 py-2 rounded bg-orange-600 hover:bg-orange-500 text-sm",children:"D\xe9marrer"}),(0,n.jsx)("button",{onClick:e_,className:"px-3 py-2 rounded bg-red-700 hover:bg-red-600 text-sm",children:"Red\xe9marrer (destructif)"})]}),(0,n.jsx)(g,{gameId:k,onAdvanced:()=>{eL()}})]}),(0,n.jsxs)("section",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 w-full",children:[(0,n.jsx)(r.default,{href:"/immobilier",className:"px-4 py-2 rounded bg-sky-600 hover:bg-sky-500 text-center w-full",children:"Immobilier"}),(0,n.jsx)(r.default,{href:"/bourse",className:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500 text-center w-full",children:"Bourse"}),(0,n.jsx)(r.default,{href:"/listings",className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-center w-full",children:"Annonces"}),(0,n.jsx)(r.default,{href:"/summary",className:"px-4 py-2 rounded bg-amber-600 hover:bg-amber-500 text-center w-full",children:"R\xe9sum\xe9"}),(0,n.jsx)("button",{onClick:eO,className:"px-4 py-2 rounded bg-rose-600 hover:bg-rose-500 text-center w-full",children:"\uD83C\uDFC1 Drag Racing"}),(0,n.jsx)(r.default,{href:"/quiz",className:"px-4 py-2 rounded bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 font-bold text-center w-full",children:"\uD83D\uDCB0 Quiz"})]}),(0,n.jsxs)("section",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3 w-full",children:[(0,n.jsx)(r.default,{href:"/confidentialite",className:"px-4 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-center w-full",children:"Politique de confidentialit\xe9"}),(0,n.jsx)(r.default,{href:"/suppression-compte",className:"px-4 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-center w-full",children:"Suppression de compte"})]}),(0,n.jsx)("section",{className:"mt-4 w-full",children:(0,n.jsx)(r.default,{href:"/parametres",className:"block px-4 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-center w-full",children:"Param\xe8tres"})}),(0,n.jsx)("section",{className:"w-full",children:(0,n.jsx)(r.default,{href:"/bonus",className:"block px-6 py-3 rounded-lg bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 font-bold text-center w-full text-lg shadow-lg transition-all hover:scale-105",children:"\uD83D\uDCFA Bonus Gratuit - Gagnez $1,000,000 !"})}),_&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-start justify-center p-4",onClick:()=>W(null),children:(0,n.jsxs)("div",{className:"w-full max-w-4xl bg-neutral-900 border border-neutral-800 rounded-lg flex flex-col max-h-[85vh]",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-800",children:[(0,n.jsxs)("h4",{className:"font-semibold",children:["Portefeuille — ",_.nickname]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:["number"==typeof(null==eu?void 0:eu.remaining)&&(0,n.jsxs)("span",{className:"text-xs px-2 py-1 rounded bg-emerald-800/50 border border-emerald-700 text-emerald-200",children:["Questions en banque: ",eu.remaining]}),(null==eu?void 0:eu.categories)&&eu.categories.length>0?(0,n.jsxs)("div",{className:"flex items-center gap-1 flex-wrap max-w-[60vw]",children:[eu.categories.slice(0,5).map(e=>(0,n.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:[e.category," ",e.remaining]},e.category)),eu.categories.length>5&&(0,n.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:["+",eu.categories.length-5," autres"]})]}):(null==eu?void 0:eu.remainingByCategory)&&(0,n.jsx)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:"Finance ".concat(eu.remainingByCategory.finance," \xb7 \xc9conomie ").concat(eu.remainingByCategory.economy," \xb7 Immo ").concat(eu.remainingByCategory.realEstate)})]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,n.jsxs)("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h5",{className:"font-semibold mb-2",children:"Immobilier"}),0===X.length?(0,n.jsx)("p",{className:"text-sm text-neutral-400",children:"Aucun bien."}):(0,n.jsxs)("table",{className:"w-full text-sm bg-neutral-950 border border-neutral-800 rounded",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left",children:[(0,n.jsx)("th",{className:"p-2",children:"Bien"}),(0,n.jsx)("th",{className:"p-2",children:"Valeur"}),(0,n.jsx)("th",{className:"p-2",children:"Dette"})]})}),(0,n.jsx)("tbody",{children:X.map(e=>{var t,a,r,l,s,i;return(0,n.jsxs)("tr",{className:"border-t border-neutral-800",children:[(0,n.jsxs)("td",{className:"p-2",children:[null!==(r=null===(t=e.template)||void 0===t?void 0:t.name)&&void 0!==r?r:"Bien",(0,n.jsx)("div",{className:"text-xs text-neutral-500",children:null!==(l=null===(a=e.template)||void 0===a?void 0:a.city)&&void 0!==l?l:""})]}),(0,n.jsx)("td",{className:"p-2",children:(0,u.l)(Number(null!==(s=e.currentValue)&&void 0!==s?s:0))}),(0,n.jsx)("td",{className:"p-2",children:(0,u.l)(Number(null!==(i=e.mortgageDebt)&&void 0!==i?i:0))})]},e.id)})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h5",{className:"font-semibold mb-2",children:"Bourse"}),0===Y.length?(0,n.jsx)("p",{className:"text-sm text-neutral-400",children:"Aucune position."}):(0,n.jsxs)("table",{className:"w-full text-sm bg-neutral-950 border border-neutral-800 rounded",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"text-left",children:[(0,n.jsx)("th",{className:"p-2",children:"Actif"}),(0,n.jsx)("th",{className:"p-2",children:"Qt\xe9"}),(0,n.jsx)("th",{className:"p-2",children:"Prix moy."}),(0,n.jsx)("th",{className:"p-2",children:"Valeur"}),(0,n.jsx)("th",{className:"p-2",children:"Gain %"})]})}),(0,n.jsx)("tbody",{children:Y.map(e=>{var t,a,r,l,s;let i=null!==(t=Z[e.symbol])&&void 0!==t?t:e.avgPrice,o=Number(null!==(a=e.quantity)&&void 0!==a?a:0)*Number(null!=i?i:0),c=Number(null!==(r=e.avgPrice)&&void 0!==r?r:0)||0,d=c>0?(Number(null!=i?i:0)-c)/c*100:0;return(0,n.jsxs)("tr",{className:"border-t border-neutral-800",children:[(0,n.jsx)("td",{className:"p-2",children:e.symbol}),(0,n.jsx)("td",{className:"p-2",children:Number(null!==(l=e.quantity)&&void 0!==l?l:0).toFixed(2)}),(0,n.jsxs)("td",{className:"p-2",children:["$",Number(null!==(s=e.avgPrice)&&void 0!==s?s:0).toFixed(2)]}),(0,n.jsxs)("td",{className:"p-2",children:["$",o.toFixed(2)]}),(0,n.jsx)("td",{className:"p-2",children:(0,n.jsxs)("span",{className:d>=0?"text-emerald-400":"text-red-400",children:[d.toFixed(2),"%"]})})]},e.id)})})]})]})]}),(0,n.jsx)("div",{className:"px-4 pb-4",children:(0,n.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,n.jsx)("button",{className:"px-3 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-sm",onClick:()=>eo(!0),disabled:ei&&el,children:ei?el?"Calcul en cours…":"Recalculer la projection":"Afficher la projection 10 ans"}),ei&&en.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,n.jsx)("h5",{className:"font-semibold",children:"Projection 10 ans (valeur nette totale)"}),(0,n.jsxs)("span",{className:"text-xs text-neutral-400",children:["de ",(0,u.l)(Math.round(en[0].net))," \xe0 ",(0,u.l)(Math.round(en[en.length-1].net))]})]}),(0,n.jsx)(function(e){let{data:t}=e;if(!t||0===t.length)return null;let a=Math.min(...t.map(e=>e.net)),r=Math.max(...t.map(e=>e.net)),l=a===r?.95*a:.98*a,s=a===r?1.05*r:1.02*r,i=e=>28+744*e/Math.max(1,t.length-1),o=e=>172-(e-l)*144/Math.max(1,s-l),c=t.map((e,t)=>"".concat(i(t),",").concat(o(e.net))).join(" "),d=e=>e>=1e6?"".concat((e/1e6).toFixed(2)," M$"):e>=1e3?"".concat((e/1e3).toFixed(1)," k$"):"$".concat(Math.round(e));return(0,n.jsx)("div",{className:"w-full overflow-x-auto",children:(0,n.jsxs)("svg",{viewBox:"0 0 ".concat(800," ").concat(200),className:"w-full h-48 bg-neutral-950 border border-neutral-800 rounded",children:[(0,n.jsx)("line",{x1:28,y1:172,x2:772,y2:172,stroke:"#333"}),(0,n.jsx)("line",{x1:28,y1:28,x2:28,y2:172,stroke:"#333"}),(0,n.jsx)("text",{x:28,y:20,fill:"#9ca3af",fontSize:"10",textAnchor:"start",children:d(s)}),(0,n.jsx)("text",{x:28,y:184,fill:"#9ca3af",fontSize:"10",textAnchor:"start",children:d(l)}),(0,n.jsx)("polyline",{fill:"none",stroke:"#22c55e",strokeWidth:2,points:c})]})})},{data:en})]})]})})]}),(0,n.jsx)("div",{className:"px-4 py-3 border-t border-neutral-800 flex justify-center",children:(0,n.jsx)("button",{onClick:()=>W(null),className:"px-4 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-sm",children:"Fermer"})})]})})]}),ex&&(0,n.jsx)(c.default,{onClose:()=>eh(!1)})]})}function g(e){let{gameId:t,onAdvanced:a}=e,[r,l]=(0,s.useState)(4),[i,o]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),m=(0,s.useCallback)(async()=>{if(!t){u("GameId manquant");return}o(!0),u(null);try{let e=Math.max(1,Math.min(520,r)),n=await (0,d.SC)("/api/games/".concat(t,"/advance-weeks?weeks=").concat(e),{method:"POST"});u("Avanc\xe9 de ".concat(n.weeksApplied," semaines en ").concat(n.durationMs,"ms.")),a&&a()}catch(e){u((null==e?void 0:e.message)||"\xc9chec avance")}finally{o(!1)}},[t,r,a]);return(0,n.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,n.jsx)("div",{className:"text-xs text-neutral-400",children:"Avancer le temps de jeu (ticks hebdomadaires). 1h serveur = 1 semaine simul\xe9e."}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"number",min:1,max:520,value:r,onChange:e=>l(Number(e.target.value)||1),className:"w-20 px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-sm"}),(0,n.jsx)("button",{disabled:i,onClick:m,className:"px-3 py-1.5 rounded bg-purple-700 hover:bg-purple-600 disabled:opacity-50 text-sm",children:i?"Avance…":"Avancer ".concat(r," semaine").concat(r>1?"s":"")})]}),c&&(0,n.jsx)("p",{className:"text-xs text-neutral-300",children:c})]})}function b(){let e=new Date("2025-12-31T23:00:00-05:00"),[t,a]=(0,s.useState)(()=>new Date);if((0,s.useEffect)(()=>{let e=setInterval(()=>a(new Date),6e4);return()=>clearInterval(e)},[]),t>e)return null;let l=Math.max(0,Math.floor((e.getTime()-t.getTime())/864e5));return(0,n.jsxs)("div",{className:"rounded-lg border border-amber-600 bg-gradient-to-r from-amber-700/60 to-yellow-700/50 p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2 shadow",children:[(0,n.jsx)("div",{className:"text-sm md:text-base font-semibold text-amber-100 flex items-center gap-2",children:(0,n.jsx)("span",{children:"\uD83C\uDFC6 Prix sp\xe9cial: Carte cadeau Amazon 20$ attribu\xe9e le 31 d\xe9cembre 2025 au joueur #1 (valeur nette)."})}),(0,n.jsxs)("div",{className:"text-xs text-amber-200 flex items-center gap-3",children:[(0,n.jsxs)("span",{children:["Compte \xe0 rebours: ",l," jour",1!==l?"s":""]}),(0,n.jsx)(r.default,{href:"/quiz",className:"px-3 py-1 rounded bg-amber-500 hover:bg-amber-400 text-black font-medium text-xs",children:"Booster ton net"})]})]})}},1468:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(7821),r=a(8078);function l(e){let{onClose:t,storageKey:a="hm-tutorial-home"}=e,l=[{title:"Objectif Global",content:"Fais cro\xeetre ta valeur nette en combinant 4 moteurs: Immobilier (cashflow & appr\xe9ciation), Bourse (diversification & dividendes), Quiz (acc\xe9l\xe9rateur de capital), Pari (risque contr\xf4l\xe9). Garde toujours un coussin de liquidit\xe9s pour saisir les opportunit\xe9s et \xe9viter de bloquer ton jeu."},{title:"Immobilier — Achat & Stocks",content:"Dans ‘Immobilier’, choisis un bien (ex: six‑plex, tour 50, tour 100). V\xe9rifie loyer, taux et charges. Les boutons ‘refill’ et ‘+10’ maintiennent l’offre (6‑plex→10, tours50→10, tours100→5). Diversifie entre flux de loyers et valeur pour refinancements futurs."},{title:"Bourse — Positions & Dividendes",content:"Dans ‘Bourse’, s\xe9lectionne un symbole (SP500, TSX, QQQ, TLT, GLD). Les dividendes tombent p\xe9riodiquement et renforcent ton cash. M\xe9lange actifs cycliques (croissance) et d\xe9fensifs (obligations/or) pour lisser la volatilit\xe9 immobili\xe8re."},{title:"Quiz — Session de 10 Questions",content:"Consomme 1 token pour lancer: Q1-2 faciles, Q3-5 moyennes, Q6-10 difficiles. Chaque bonne r\xe9ponse double ta somme de session (5k→10k→20k...). Tu peux encaisser \xe0 tout moment avant une erreur. Cat\xe9gories vari\xe9es (anatomy, finance, g\xe9n\xe9ral). Optimise en s\xe9curisant apr\xe8s une bonne s\xe9rie."},{title:"Pari — 3 D\xe9s \xe0 Risque",content:"Mise (≥5 000$) puis lance 3 d\xe9s: double = x2, triple ou suite = x3, sinon perte de la mise. Ne sur‑expose pas ton capital avant un achat immobilier cl\xe9. Le volet Pari est un acc\xe9l\xe9rateur ponctuel, pas un moteur principal durable."},{title:"Strat\xe9gies Rapides",content:"D\xe9marrage: 1–2 six‑plex + quiz pour booster le cash. Milieu: entr\xe9e en bourse, viser tour 50 pour masse critique. Fin: grandes structures + quiz difficile avec encaissement prudent. Toujours anticiper p\xe9nurie: utiliser refill avant manque de stock."},{title:"D\xe9pannage & V\xe9rifications",content:"Probl\xe8me quiz? V\xe9rifie: tokens >0, endpoint /api/games/<id>/quiz/status = 200 (console r\xe9seau). Proxy /api/* corrige CORS. Besoin d’aide: lien contact dans la page ‘Contact’. Garde tes logs propres avant de reporter un bug."},{title:"Invitations Bonus",content:"Utilise ‘Inviter un ami’ sur l’accueil: quand valid\xe9 tu re\xe7ois 1 000 000$. Profite-en pour cr\xe9er un mini r\xe9seau et comparer vos strat\xe9gies de portefeuille."}],[s,i]=(0,r.useState)(0),o=(0,r.useRef)(null),c=(0,r.useRef)(null),d=(0,r.useRef)(null),u=(0,r.useRef)(null),[m,x]=(0,r.useState)(!1);function h(e,t,a,n){if(null===a||null===n)return;let r=e-a;Math.abs(r)>Math.abs(t-n)&&Math.abs(r)>40&&(r<0&&s<l.length-1?i(e=>Math.min(l.length-1,e+1)):r>0&&s>0&&i(e=>Math.max(0,e-1)))}function p(e){if(0===e.changedTouches.length){o.current=null,c.current=null;return}let t=e.changedTouches[0];h(t.clientX,t.clientY,o.current,c.current),o.current=null,c.current=null}return(0,n.jsx)("div",{className:"fixed inset-0 z-[9999] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"max-w-xl w-full bg-white rounded-2xl shadow-2xl text-gray-900",onTouchStart:function(e){let t=e.touches[0];o.current=t.clientX,c.current=t.clientY},onTouchEnd:p,onTouchCancel:p,onPointerDown:function(e){"mouse"!==e.pointerType&&(d.current=e.clientX,u.current=e.clientY)},onPointerUp:function(e){"mouse"!==e.pointerType&&(h(e.clientX,e.clientY,d.current,u.current),d.current=null,u.current=null)},onPointerCancel:()=>{d.current=null,u.current=null},children:[(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("div",{className:"text-xl font-bold mb-2",children:l[s].title}),(0,n.jsx)("div",{className:"text-sm text-gray-700 mb-6",children:l[s].content}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("label",{className:"text-xs text-gray-600 flex items-center gap-2 select-none",children:[(0,n.jsx)("input",{type:"checkbox",checked:m,onChange:e=>x(e.target.checked)}),"Ne plus afficher automatiquement"]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[s>0&&(0,n.jsx)("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>i(e=>Math.max(0,e-1)),children:"← Pr\xe9c\xe9dent"}),s<l.length-1?(0,n.jsx)("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>i(e=>Math.min(l.length-1,e+1)),children:"Suivant →"}):(0,n.jsx)("button",{className:"px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:function(){try{m&&localStorage.setItem(a,"1")}catch(e){}t()},children:"C’est parti"})]})]})]}),(0,n.jsx)("div",{className:"px-6 pb-4 text-center",children:(0,n.jsx)("div",{className:"inline-flex gap-1",children:l.map((e,t)=>(0,n.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(t===s?"bg-indigo-600":"bg-gray-300")},t))})})]})})}},7588:function(e,t,a){"use strict";a.d(t,{M:function(){return n}});let n="https://nowis30.github.io/drag/"},2044:function(e,t,a){"use strict";function n(e){let t=Number(e);return isFinite(t)?"$".concat(Math.round(t).toLocaleString()):"$0"}function r(e){return 52*Number(e||0)/12}a.d(t,{P:function(){return r},l:function(){return n}})},168:function(e,t,a){"use strict";var n=a(7462);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[233,640,320,115,205,744],function(){return e(e.s=3657)}),_N_E=e.O()}]);