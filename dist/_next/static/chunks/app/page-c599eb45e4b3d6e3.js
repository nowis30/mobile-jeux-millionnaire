(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931,468],{3657:function(e,t,a){Promise.resolve().then(a.bind(a,3253))},3253:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(7821),n=a(4233),l=a(4328),s=a(8078),i=a(168),o=a(2705),c=a(1468),d=a(9513),u=a(2044),m=a(6325);let x="lobby";function h(){let e=(0,i.useRouter)(),[t,a]=(0,s.useState)(!1),[h,b]=(0,s.useState)(!1),[f,v]=(0,s.useState)(""),[j,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=!0;return(async()=>{try{console.log("[Auth] Tentative /api/auth/me ...");let t=await (0,d.SC)("/api/auth/me");console.log("[Auth] Succ\xe8s /api/auth/me",t),e&&(a(!0),b(!!t.isAdmin),v(t.email),y(null));try{window.dispatchEvent(new Event("hm-music/resume")),window.dispatchEvent(new Event("hm-music/play-now"))}catch(e){}}catch(t){e&&(a(!1),b(!1),v(""),y("Non connect\xe9."))}})(),()=>{e=!1}},[e]);let[N,w]=(0,s.useState)([]),[S,k]=(0,s.useState)(""),[C,I]=(0,s.useState)(""),[P,M]=(0,s.useState)(""),[A,T]=(0,s.useState)(x),[E,D]=(0,s.useState)([]),[q,R]=(0,s.useState)(null),[B,O]=(0,s.useState)(null),[z,L]=(0,s.useState)(""),[F,Q]=(0,s.useState)([]),[V,G]=(0,s.useState)(""),[J,U]=(0,s.useState)(null),[$,_]=(0,s.useState)(null),[W,X]=(0,s.useState)([]),[H,Y]=(0,s.useState)([]),[K,Z]=(0,s.useState)({}),[ee,et]=(0,s.useState)(null),[ea,er]=(0,s.useState)([]),[en,el]=(0,s.useState)(!1),[es,ei]=(0,s.useState)(!1),[eo,ec]=(0,s.useState)(!1),[ed,eu]=(0,s.useState)(null),[em,ex]=(0,s.useState)(!1),[eh,ep]=(0,s.useState)(null),[eg,eb]=(0,s.useState)([]),[ef,ev]=(0,s.useState)(null),[ej,ey]=(0,s.useState)(1e6),[eN,ew]=(0,s.useState)(0),[eS,ek]=(0,s.useState)(!1),[eC,eI]=(0,s.useState)(!1),[eP,eM]=(0,s.useState)(null),[eA,eT]=(0,s.useState)(null),[eE,eD]=(0,s.useState)(!1),[eq,eR]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=(0,o.dF)();if(e){var t;k(e.gameId),I(null!==(t=e.playerId)&&void 0!==t?t:""),e.nickname&&G(e.nickname)}},[]),(0,s.useEffect)(()=>{try{var e,t;eR(!!(null===(t=window.Capacitor)||void 0===t?void 0:null===(e=t.isNativePlatform)||void 0===e?void 0:e.call(t)))}catch(e){eR(!1)}},[]),(0,s.useEffect)(()=>{try{localStorage.getItem("hm-tutorial-home")||ex(!0)}catch(e){}},[]),(0,s.useEffect)(()=>{if(S&&C)try{let e=new URLSearchParams(window.location.search).get("invite");if(!e||localStorage.getItem("hm-invite-accepted-".concat(e)))return;(async()=>{try{await (0,d.SC)("/api/games/".concat(S,"/referrals/accept"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e})}),localStorage.setItem("hm-invite-accepted-".concat(e),"1"),ep(e)}catch(e){}})()}catch(e){}},[S,C]);let eB=(0,s.useCallback)(e=>{var t,a,r;let n={gameId:null!==(t=null==e?void 0:e.gameId)&&void 0!==t?t:S,playerId:null!==(a=null==e?void 0:e.playerId)&&void 0!==a?a:C,nickname:null!==(r=null==e?void 0:e.nickname)&&void 0!==r?r:V};n.gameId&&(0,o.Aj)(n)},[S,C,V]),eO=(0,s.useCallback)(async()=>{if(S)try{var e,t;console.log("[Home] Fetch state gameId=",S);let a=await (0,d.SC)("/api/games/".concat(S,"/state"));console.log("[Home] State re\xe7u:",a),T(a.status),D(null!==(e=a.players)&&void 0!==e?e:[]),M(null!==(t=a.code)&&void 0!==t?t:""),R(null)}catch(e){console.warn("[Home] \xc9chec state",e),R(e instanceof Error?e.message:"\xc9chec de r\xe9cup\xe9ration de l'\xe9tat")}},[S]),ez=(0,s.useCallback)(async()=>{if(S&&C)try{var e;let t=await (0,d.SC)("/api/games/".concat(S,"/bonus/status"));ek(!!t.available),ew(Math.max(0,Number(null!==(e=t.secondsUntilAvailable)&&void 0!==e?e:0))),"number"!=typeof t.rewardAmount||Number.isNaN(t.rewardAmount)||ey(t.rewardAmount),eT(null)}catch(e){if((null==e?void 0:e.status)===404)return;(null==e?void 0:e.message)?eT(e.message):eT("Impossible de r\xe9cup\xe9rer le bonus.")}},[S,C]),eL=(0,s.useCallback)(e=>{let t=Math.max(0,Math.floor(e)),a=Math.floor(t/60),r=t%60;return a>0?"".concat(a,"min ").concat(r,"s"):"".concat(r,"s")},[]),eF=(0,s.useCallback)(async()=>{if(!eo&&t&&!S){ec(!0),console.log("[Home] AutoJoin d\xe9clench\xe9 isLoggedIn=",t,"gameId=",S);try{var e;let t=await (0,d.SC)("/api/games");console.log("[Home] Liste des games:",t);let a=null===(e=t.games)||void 0===e?void 0:e[0];if(!a)throw Error("Partie introuvable");let r=await (0,d.SC)("/api/games/".concat(a.id,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});console.log("[Home] Join OK:",r),k(a.id),I(r.playerId),M(a.code),G(f),eB({gameId:a.id,playerId:r.playerId,nickname:f}),R(null),O("Vous avez rejoint la partie mondiale en tant que ".concat(f)),eO()}catch(e){console.error("[AutoJoin] Erreur join:",(null==e?void 0:e.message)||e)}}},[eo,t,S,f,eB,eO]),eQ=(0,s.useCallback)(async()=>{if(!S||!C){eT("Rejoignez la partie mondiale pour d\xe9bloquer le bonus.");return}if(!eC){eI(!0),eT(null),eM(null);try{var e,t;if(!await (0,m.fL)((e,t)=>{console.log("[Bonus] Reward callback ".concat(e," ").concat(t))})){eT("La publicit\xe9 n'est pas pr\xeate. R\xe9essayez dans quelques instants.");return}let a=await (0,d.SC)("/api/games/".concat(S,"/bonus/redeem"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),r=Number(null!==(e=null==a?void 0:a.rewardAmount)&&void 0!==e?e:ej);ey(r),eM("+".concat((0,u.l)(r)));let n=Number(null!==(t=null==a?void 0:a.secondsUntilNext)&&void 0!==t?t:0),l=(0,m.Ie)();ew(Math.max(n,l)),ek(!1),ez(),eO()}catch(e){(null==e?void 0:e.status)===429&&ez(),eT((null==e?void 0:e.message)||"Impossible de cr\xe9diter le bonus.")}finally{eI(!1)}}},[S,C,eC,ej,ez,eO]);(0,s.useEffect)(()=>{eF()},[eF]),(0,s.useEffect)(()=>{if(S&&f)try{let e=(0,l.io)(d.Sg,{path:"/socket.io",transports:["websocket"],withCredentials:!0,query:{gameId:S,nickname:f}});ev(e);let t=async()=>{try{let e=await fetch("".concat(d.Sg,"/api/games/").concat(S,"/online"),{credentials:"include"});if(!e.ok)return;let t=await e.json();eb(Array.isArray(t.users)?t.users:[])}catch(e){}};t();let a=setInterval(t,15e3);return()=>{try{clearInterval(a)}catch(e){}e.close(),ev(null)}}catch(e){}},[S,f]);let eV=(0,s.useCallback)(async e=>{if(S){_(e);try{var t,a,r,n,l,s;let[i,o,c,u,m]=await Promise.all([fetch("".concat(d.Sg,"/api/games/").concat(S,"/properties/holdings/").concat(e.id),{credentials:"include"}),fetch("".concat(d.Sg,"/api/games/").concat(S,"/markets/holdings/").concat(e.id),{credentials:"include"}),fetch("".concat(d.Sg,"/api/games/").concat(S,"/markets/latest"),{credentials:"include"}),fetch("".concat(d.Sg,"/api/games/").concat(S,"/economy"),{credentials:"include"}),fetch("".concat(d.Sg,"/api/quiz/public-stats"),{credentials:"include"})]),x=i.ok?await i.json():{holdings:[]},h=o.ok?await o.json():{holdings:[]},p=c.ok?await c.json():{prices:[]},g=u.ok?await u.json():null,b=m.ok?await m.json():null;X(null!==(t=x.holdings)&&void 0!==t?t:[]),Y(null!==(a=h.holdings)&&void 0!==a?a:[]);let f={};for(let e of null!==(r=p.prices)&&void 0!==r?r:[])f[e.symbol]=e.price;if(Z(f),g&&et({baseMortgageRate:Number(null!==(n=g.baseMortgageRate)&&void 0!==n?n:.05),appreciationAnnual:Number(null!==(l=g.appreciationAnnual)&&void 0!==l?l:.02),schedule:Array.isArray(g.schedule)?g.schedule:[]}),b){let e=Array.isArray(b.categories)?b.categories.map(e=>{var t,a,r,n;return{category:String(null!==(t=e.category)&&void 0!==t?t:"autre"),total:Number(null!==(a=e.total)&&void 0!==a?a:0),used:Number(null!==(r=e.used)&&void 0!==r?r:0),remaining:Number(null!==(n=e.remaining)&&void 0!==n?n:0)}}):void 0;eu({remaining:Number(null!==(s=b.remaining)&&void 0!==s?s:0),remainingByDifficulty:b.remainingByDifficulty,remainingByCategory:b.remainingByCategory,categories:e})}}catch(e){}}},[S]),eG=(0,s.useCallback)(()=>{var e,t,a;if(!$){er([]);return}let r=((null==ee?void 0:ee.schedule)&&ee.schedule.length?ee.schedule:Array.from({length:10},()=>.02)).slice(0,10),n=null!==(e=null==ee?void 0:ee.baseMortgageRate)&&void 0!==e?e:.05,l=(W||[]).map(e=>{var t,a,r;let l=Number(null!==(t=e.currentValue)&&void 0!==t?t:0),s=Number(null!==(a=e.mortgageDebt)&&void 0!==a?a:0),i=Number(null!==(r=e.weeklyPayment)&&void 0!==r?r:0)||function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,r=Math.max(1,Math.round(52*a)),n=t/52;return e<=0?0:n<=0?e/r:n*e/(1-Math.pow(1+n,-r))}(s,n,25);return{value:l,debt:s,rate:n,payW:i}}),s=(H||[]).map(e=>{var t,a,r;let n=null!==(a=K[e.symbol])&&void 0!==a?a:Number(null!==(t=e.avgPrice)&&void 0!==t?t:0);return{value:Number(null!==(r=e.quantity)&&void 0!==r?r:0)*Number(null!=n?n:0),er:function(e){switch(e){case"SP500":case"VFV":case"XLF":case"XLE":case"IWM":return .06;case"QQQ":case"AAPL":case"MSFT":case"AMZN":case"META":case"GOOGL":case"NVDA":case"TSLA":case"COST":return .08;case"TSX":case"VDY":default:return .05;case"UPRO":return .18;case"TQQQ":return .24;case"GLD":return .02;case"TLT":return .03}}(String(e.symbol))}}),i=Number(null!==(t=$.cash)&&void 0!==t?t:0),o=[],c=l.reduce((e,t)=>e+(t.value-t.debt),0)+s.reduce((e,t)=>e+t.value,0)+i;o.push({year:0,net:c});let d=l.map(e=>({...e})),u=s.map(e=>({...e}));for(let e=1;e<=10;e++){for(let t of d){let n=Math.max(0,52*t.payW-t.debt*t.rate);t.debt=Math.max(0,t.debt-n),t.value=t.value*(1+(null!==(a=r[e-1])&&void 0!==a?a:.02))}for(let e of u)e.value=e.value*(1+e.er);let t=d.reduce((e,t)=>e+(t.value-t.debt),0)+u.reduce((e,t)=>e+t.value,0)+i;o.push({year:e,net:t})}er(o)},[$,W,H,K,ee]);(0,s.useEffect)(()=>{if(!es){er([]);return}el(!0);try{eG()}finally{el(!1)}},[es,$,W,H,K,ee]),(0,s.useCallback)(async()=>{try{var e;let t=await (0,d.SC)("/api/games"),a=null===(e=t.games)||void 0===e?void 0:e[0];if(!a)throw Error("Partie introuvable");let r=await (0,d.SC)("/api/games/".concat(a.id,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});k(a.id),I(r.playerId),M(a.code),eB({gameId:a.id,playerId:r.playerId}),R(null),O("Rejoint la partie ".concat(a.code)),eO()}catch(e){O(null),R(e instanceof Error?e.message:"Impossible de rejoindre la partie")}},[eB,eO]);let eJ=(0,s.useCallback)(async()=>{try{let r=S;if(!r){var e,t,a;let n=await (0,d.SC)("/api/games");if(!(r=null!==(a=null===(t=n.games)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id)&&void 0!==a?a:""))throw Error("Partie introuvable");k(r)}await (0,d.SC)("/api/games/".concat(r,"/start"),{method:"POST"}),O("Partie d\xe9marr\xe9e"),eO()}catch(e){R(e instanceof Error?e.message:"\xc9chec du d\xe9marrage")}},[S,eO]),eU=(0,s.useCallback)(async()=>{try{if(!window.confirm("Red\xe9marrer la partie effacera joueurs, annonces, positions et historique. Continuer ?"))return;let r=S;if(!r){var e,t,a;let n=await (0,d.SC)("/api/games");if(!(r=null!==(a=null===(t=n.games)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id)&&void 0!==a?a:""))throw Error("Partie introuvable");k(r)}console.log("[DEBUG] Calling restart for game ".concat(r)),await (0,d.SC)("/api/games/".concat(r,"/restart"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})}),console.log("[DEBUG] Restart successful"),O("Partie red\xe9marr\xe9e avec succ\xe8s!"),R(null),(0,o.Ov)(),k(""),I(""),G(""),eO()}catch(e){console.error("[DEBUG] Restart error:",e),R(e instanceof Error?e.message:"\xc9chec du red\xe9marrage")}},[S,eO]);(0,s.useCallback)(()=>{(0,o.Ov)(),k(""),I(""),G(""),M(""),D([]),w([]),T(x),O("Session effac\xe9e")},[]);let e$=window.location.origin,[e_,eW]=(0,s.useState)(""),[eX,eH]=(0,s.useState)(null),eY=(0,s.useCallback)(async()=>{try{navigator.share?(await navigator.share({title:"Rejoins le jeu du Millionnaire",text:"Clique pour te connecter et rejoindre la partie globale.",url:e$}),U("Lien partag\xe9")):navigator.clipboard?(await navigator.clipboard.writeText(e$),U("Lien copi\xe9 dans le presse-papiers")):U("Partage non support\xe9. Copiez l'URL du navigateur.")}catch(e){U("Partage annul\xe9")}},[e$]),eK=(0,s.useCallback)(async()=>{try{if(!S)throw Error("Partie introuvable");let e=await (0,d.SC)("/api/games/".concat(S,"/referrals/create"),{method:"POST"});eW(e.url),eH("Lien g\xe9n\xe9r\xe9. R\xe9compense: ".concat((0,u.l)(e.reward||1e6))),navigator.share?await navigator.share({title:"Rejoins le Millionnaire",text:"Accepte mon invitation et commen\xe7ons !",url:e.url}):navigator.clipboard&&(await navigator.clipboard.writeText(e.url),eH(e=>e?e+" — Lien copi\xe9":"Lien copi\xe9"))}catch(e){eH((null==e?void 0:e.message)||"\xc9chec de cr\xe9ation du lien")}},[S]);(0,s.useEffect)(()=>{S&&eO()},[S,eO]),(0,s.useEffect)(()=>{ez()},[ez]),(0,s.useEffect)(()=>{if(eN<=0)return;let e=setTimeout(()=>{ew(e=>Math.max(0,e-1))},1e3);return()=>clearTimeout(e)},[eN]),(0,s.useEffect)(()=>{let e=!0,t=async()=>{try{let t=await (0,m.yk)();e&&eD(t)}catch(t){e&&eD(!1)}};t();let a=setInterval(t,5e3);return()=>{e=!1,clearInterval(a)}},[]),(0,s.useEffect)(()=>{if(!eq)return;let e=()=>{let e=(0,m.Ie)();e>0&&ew(t=>e>t?e:t)};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[eq]),(0,s.useEffect)(()=>{S&&!C&&(async()=>{try{try{let e=await (0,d.SC)("/api/games/".concat(S,"/me"));I(e.player.id),e.player.nickname&&G(e.player.nickname),eB({gameId:S,playerId:e.player.id,nickname:e.player.nickname})}catch(e){}}catch(e){}})()},[S,C,eB]);let eZ=(0,s.useMemo)(()=>N.length>0?N:E.map(e=>({playerId:e.id,nickname:e.nickname,netWorth:e.netWorth})).sort((e,t)=>t.netWorth-e.netWorth),[N,E]),e0=!S||!C||eC||eN>0||!eE,e2=S&&C?eC?"Chargement de la publicit\xe9...":eN>0?"Disponible dans ".concat(eL(eN)):eE?"Regarder la publicit\xe9 pour ".concat((0,u.l)(ej)):eq?"Chargement de la publicit\xe9...":"Disponible dans l'app mobile":"Connexion en cours...";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("main",{className:"space-y-6 overflow-x-hidden",children:[(0,r.jsxs)("div",{className:"text-xs opacity-60",children:["DEBUG API_BASE: ",d.Sg]}),(0,r.jsx)(()=>j?(0,r.jsxs)("div",{className:"p-3 mb-4 rounded bg-red-900/40 border border-red-700 text-sm",children:[(0,r.jsxs)("p",{className:"font-semibold",children:["Auth: ",j]}),(0,r.jsx)("p",{className:"mt-1 text-xs opacity-75",children:"Si cela persiste, ouvrez la page /debug-auth pour plus de d\xe9tails (token, cookies)."})]}):null,{}),(0,r.jsxs)("div",{className:"rounded-lg border border-indigo-600 bg-gradient-to-r from-indigo-700/60 to-purple-700/50 p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2 shadow",children:[(0,r.jsx)("div",{className:"text-sm md:text-base font-semibold text-indigo-100 flex items-center gap-2",children:(0,r.jsx)("span",{children:"✨ Nouveaut\xe9s: Difficult\xe9 Quiz r\xe9\xe9quilibr\xe9e, cat\xe9gorie Anatomy (biologie), tutoriel complet."})}),(0,r.jsxs)("div",{className:"text-xs flex items-center gap-3",children:[(0,r.jsx)(n.default,{href:"/tutoriel",className:"px-3 py-1 rounded bg-indigo-500 hover:bg-indigo-400 text-black font-medium text-xs",children:"Voir le tutoriel"}),(0,r.jsx)(n.default,{href:"/quiz",className:"px-3 py-1 rounded bg-purple-500 hover:bg-purple-400 text-black font-medium text-xs",children:"Jouer au Quiz"}),(0,r.jsx)(n.default,{href:"/telecharger",className:"px-3 py-1 rounded bg-emerald-500 hover:bg-emerald-400 text-black font-medium text-xs",children:"T\xe9l\xe9charger l'app"})]})]}),(0,r.jsx)(g,{}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"rounded-xl border border-emerald-600/60 bg-gradient-to-r from-emerald-900/70 to-green-800/60 p-4 shadow-lg space-y-3",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1 text-sm text-emerald-100",children:[(0,r.jsxs)("p",{className:"text-lg md:text-xl font-semibold text-white",children:["Bonus pub : ",(0,u.l)(ej)]}),(0,r.jsxs)("p",{className:"text-emerald-100/80 text-sm",children:["Regardez une publicit\xe9 pour cr\xe9diter instantan\xe9ment ",(0,u.l)(ej)," sur votre compte."]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full md:w-auto",children:[(0,r.jsx)("button",{onClick:eQ,disabled:e0,className:"px-4 py-2 rounded-lg font-semibold transition-all w-full sm:w-auto ".concat(e0?"bg-emerald-700/40 text-emerald-200/70 cursor-not-allowed":"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 text-black shadow-lg shadow-emerald-900/40"),children:e2}),(0,r.jsx)(n.default,{href:"/bonus",className:"text-xs text-emerald-100/80 underline text-center",children:"En savoir plus"})]})]}),!eq&&(0,r.jsx)("p",{className:"text-xs text-emerald-100/70 text-center md:text-right",children:"Disponible dans l'application mobile. T\xe9l\xe9chargez-la via l'onglet T\xe9l\xe9charger."}),eP&&(0,r.jsxs)("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/15 px-3 py-2 text-sm text-emerald-100 text-center",children:[eP," cr\xe9dit\xe9 sur votre compte !"]}),eA&&(0,r.jsx)("div",{className:"rounded-lg border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-100 text-center",children:eA})]}),(0,r.jsxs)("section",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Partie Mondiale du Millionnaire"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[f&&(0,r.jsxs)("p",{className:"text-sm text-neutral-400 flex items-center gap-2",children:["Connect\xe9: ",(0,r.jsxs)("span",{className:"text-emerald-400 flex items-center gap-1",children:[eg.includes(f)&&(0,r.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),f]})]}),h&&(0,r.jsx)("span",{className:"px-2 py-1 rounded bg-red-700 text-xs font-semibold",children:"ADMIN"})]})]}),S&&C&&(0,r.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-700/50 rounded-lg p-3",children:[(0,r.jsx)("p",{className:"text-emerald-300 text-sm",children:"✅ Vous \xeates automatiquement inscrit \xe0 la partie mondiale !"}),(0,r.jsxs)("p",{className:"text-neutral-400 text-xs mt-1",children:["Pseudo: ",V||f]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full",children:[(0,r.jsx)("button",{onClick:async()=>{try{await (0,d.SC)("/api/auth/logout",{method:"POST"})}catch(e){}try{if("undefined"!=typeof document){let e="Thu, 01 Jan 1970 00:00:00 GMT";document.cookie="hm_auth=; expires="+e+"; path=/",document.cookie="hm_csrf=; expires="+e+"; path=/",document.cookie="hm_guest=; expires="+e+"; path=/"}}catch(e){}try{window.localStorage.removeItem("HM_TOKEN")}catch(e){}try{window.localStorage.removeItem("hm-session")}catch(e){}(0,o.Ov)(),a(!1),b(!1),v(""),e.replace("/login")},className:"px-4 py-2 rounded bg-rose-700 hover:bg-rose-600 w-full sm:w-auto",children:"Se d\xe9connecter"}),(0,r.jsx)("button",{onClick:eK,className:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500 w-full sm:w-auto",children:"Inviter un ami (gagne 1M$)"}),(0,r.jsx)("button",{onClick:eY,className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 w-full sm:w-auto",children:"Partager le jeu"}),(0,r.jsx)("a",{href:"mailto:?subject=".concat(encodeURIComponent("Rejoins le jeu du Millionnaire"),"&body=").concat(encodeURIComponent("Rejoins-moi: "+e$)),className:"px-4 py-2 rounded bg-indigo-700 hover:bg-indigo-600 text-center w-full sm:w-auto",children:"Inviter par email"})]}),e_&&(0,r.jsxs)("div",{className:"text-xs text-neutral-300",children:["Lien d'invitation: ",(0,r.jsx)("a",{href:e_,className:"underline break-all",children:e_})]}),(eX||J)&&(0,r.jsx)("p",{className:"text-xs text-neutral-400",children:eX||J}),eh&&(0,r.jsx)("p",{className:"text-xs text-emerald-400",children:"Invitation appliqu\xe9e. Merci !"}),B&&(0,r.jsx)("p",{className:"text-sm text-emerald-400",children:B}),q&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:q})]})]}):(0,r.jsxs)("section",{className:"space-y-3",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Connexion requise"}),(0,r.jsx)("p",{className:"text-neutral-300",children:"Veuillez vous connecter pour cr\xe9er ou rejoindre une partie."}),(0,r.jsx)("a",{href:"/login",className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 inline-block",children:"Aller \xe0 la page de connexion"})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Tableau de bord"}),(0,r.jsxs)("p",{className:"text-sm text-neutral-300",children:["Classement (rafra\xeechissement manuel) — statut: ",A]}),(0,r.jsx)("div",{className:"mt-2 flex gap-2",children:(0,r.jsx)("button",{onClick:eO,className:"px-3 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-sm",children:"Actualiser"})}),(0,r.jsx)("div",{className:"mt-4 bg-neutral-900 rounded border border-neutral-800 overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left",children:[(0,r.jsx)("th",{className:"p-2",children:"#"}),(0,r.jsx)("th",{className:"p-2",children:"Joueur"}),(0,r.jsx)("th",{className:"p-2",children:"Valeur nette"})]})}),(0,r.jsx)("tbody",{children:eZ.map((e,t)=>(0,r.jsxs)("tr",{className:"border-t border-neutral-800",children:[(0,r.jsx)("td",{className:"p-2",children:t+1}),(0,r.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[eg.includes(e.nickname)&&(0,r.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),e.nickname]}),(0,r.jsx)("td",{className:"p-2",children:(0,u.l)(e.netWorth)})]},e.playerId))})]})})]}),E.length>0&&(0,r.jsxs)("section",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Joueurs"}),(0,r.jsx)("ul",{className:"mt-2 space-y-2 text-sm text-neutral-300",children:E.map(e=>(0,r.jsxs)("li",{className:"border border-neutral-800 rounded px-3 py-2 bg-neutral-900",children:[(0,r.jsxs)("div",{className:"text-base font-medium mb-2 flex items-center gap-2",children:[eg.includes(e.nickname)&&(0,r.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500",title:"En ligne"}),e.nickname]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsxs)("span",{children:["Cash: ",(0,u.l)(e.cash)," | Net: ",(0,u.l)(e.netWorth)]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{title:"Voir le portefeuille",onClick:()=>eV(e),className:"px-2 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-xs",children:"Voir portefeuille"}),h&&(0,r.jsx)("button",{title:"Supprimer ce joueur",onClick:async()=>{if(S&&window.confirm("Supprimer ".concat(e.nickname," ? Tous ses biens, annonces et positions seront effac\xe9s.")))try{await (0,d.SC)("/api/games/".concat(S,"/players/").concat(e.id),{method:"DELETE"}),O("Joueur supprim\xe9: ".concat(e.nickname)),eO()}catch(e){R(e instanceof Error?e.message:"\xc9chec de suppression")}},className:"px-2 py-1 rounded bg-red-700 hover:bg-red-600 text-xs",children:"Poubelle"})]})]})]},e.id))})]}),h&&(0,r.jsxs)("section",{className:"space-y-2 border border-red-900/40 bg-red-950/20 rounded p-3",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-300",children:"Admin"}),(0,r.jsx)("p",{className:"text-sm text-red-200/80",children:"Contr\xf4les r\xe9serv\xe9s \xe0 l'administrateur. Le red\xe9marrage efface toutes les donn\xe9es de la partie."}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:eJ,className:"px-3 py-2 rounded bg-orange-600 hover:bg-orange-500 text-sm",children:"D\xe9marrer"}),(0,r.jsx)("button",{onClick:eU,className:"px-3 py-2 rounded bg-red-700 hover:bg-red-600 text-sm",children:"Red\xe9marrer (destructif)"})]}),(0,r.jsx)(p,{gameId:S,onAdvanced:()=>{eO()}})]}),(0,r.jsxs)("section",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 w-full",children:[(0,r.jsx)(n.default,{href:"/immobilier",className:"px-4 py-2 rounded bg-sky-600 hover:bg-sky-500 text-center w-full",children:"Immobilier"}),(0,r.jsx)(n.default,{href:"/bourse",className:"px-4 py-2 rounded bg-emerald-600 hover:bg-emerald-500 text-center w-full",children:"Bourse"}),(0,r.jsx)(n.default,{href:"/listings",className:"px-4 py-2 rounded bg-indigo-600 hover:bg-indigo-500 text-center w-full",children:"Annonces"}),(0,r.jsx)(n.default,{href:"/summary",className:"px-4 py-2 rounded bg-amber-600 hover:bg-amber-500 text-center w-full",children:"R\xe9sum\xe9"}),(0,r.jsx)(n.default,{href:"/drag",className:"px-4 py-2 rounded bg-rose-600 hover:bg-rose-500 text-center w-full",children:"Drag"}),(0,r.jsx)(n.default,{href:"/quiz",className:"px-4 py-2 rounded bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 font-bold text-center w-full",children:"\uD83D\uDCB0 Quiz"})]}),(0,r.jsxs)("section",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3 w-full",children:[(0,r.jsx)(n.default,{href:"/confidentialite",className:"px-4 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-center w-full",children:"Politique de confidentialit\xe9"}),(0,r.jsx)(n.default,{href:"/suppression-compte",className:"px-4 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-center w-full",children:"Suppression de compte"})]}),(0,r.jsx)("section",{className:"mt-4 w-full",children:(0,r.jsx)(n.default,{href:"/parametres",className:"block px-4 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-center w-full",children:"Param\xe8tres"})}),(0,r.jsx)("section",{className:"w-full",children:(0,r.jsx)(n.default,{href:"/bonus",className:"block px-6 py-3 rounded-lg bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 font-bold text-center w-full text-lg shadow-lg transition-all hover:scale-105",children:"\uD83D\uDCFA Bonus Gratuit - Gagnez $1,000,000 !"})}),$&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-start justify-center p-4",onClick:()=>_(null),children:(0,r.jsxs)("div",{className:"w-full max-w-4xl bg-neutral-900 border border-neutral-800 rounded-lg flex flex-col max-h-[85vh]",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-800",children:[(0,r.jsxs)("h4",{className:"font-semibold",children:["Portefeuille — ",$.nickname]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["number"==typeof(null==ed?void 0:ed.remaining)&&(0,r.jsxs)("span",{className:"text-xs px-2 py-1 rounded bg-emerald-800/50 border border-emerald-700 text-emerald-200",children:["Questions en banque: ",ed.remaining]}),(null==ed?void 0:ed.categories)&&ed.categories.length>0?(0,r.jsxs)("div",{className:"flex items-center gap-1 flex-wrap max-w-[60vw]",children:[ed.categories.slice(0,5).map(e=>(0,r.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:[e.category," ",e.remaining]},e.category)),ed.categories.length>5&&(0,r.jsxs)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:["+",ed.categories.length-5," autres"]})]}):(null==ed?void 0:ed.remainingByCategory)&&(0,r.jsx)("span",{className:"text-[10px] px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-neutral-300",children:"Finance ".concat(ed.remainingByCategory.finance," \xb7 \xc9conomie ").concat(ed.remainingByCategory.economy," \xb7 Immo ").concat(ed.remainingByCategory.realEstate)})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"p-4 grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-semibold mb-2",children:"Immobilier"}),0===W.length?(0,r.jsx)("p",{className:"text-sm text-neutral-400",children:"Aucun bien."}):(0,r.jsxs)("table",{className:"w-full text-sm bg-neutral-950 border border-neutral-800 rounded",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left",children:[(0,r.jsx)("th",{className:"p-2",children:"Bien"}),(0,r.jsx)("th",{className:"p-2",children:"Valeur"}),(0,r.jsx)("th",{className:"p-2",children:"Dette"})]})}),(0,r.jsx)("tbody",{children:W.map(e=>{var t,a,n,l,s,i;return(0,r.jsxs)("tr",{className:"border-t border-neutral-800",children:[(0,r.jsxs)("td",{className:"p-2",children:[null!==(n=null===(t=e.template)||void 0===t?void 0:t.name)&&void 0!==n?n:"Bien",(0,r.jsx)("div",{className:"text-xs text-neutral-500",children:null!==(l=null===(a=e.template)||void 0===a?void 0:a.city)&&void 0!==l?l:""})]}),(0,r.jsx)("td",{className:"p-2",children:(0,u.l)(Number(null!==(s=e.currentValue)&&void 0!==s?s:0))}),(0,r.jsx)("td",{className:"p-2",children:(0,u.l)(Number(null!==(i=e.mortgageDebt)&&void 0!==i?i:0))})]},e.id)})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-semibold mb-2",children:"Bourse"}),0===H.length?(0,r.jsx)("p",{className:"text-sm text-neutral-400",children:"Aucune position."}):(0,r.jsxs)("table",{className:"w-full text-sm bg-neutral-950 border border-neutral-800 rounded",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left",children:[(0,r.jsx)("th",{className:"p-2",children:"Actif"}),(0,r.jsx)("th",{className:"p-2",children:"Qt\xe9"}),(0,r.jsx)("th",{className:"p-2",children:"Prix moy."}),(0,r.jsx)("th",{className:"p-2",children:"Valeur"}),(0,r.jsx)("th",{className:"p-2",children:"Gain %"})]})}),(0,r.jsx)("tbody",{children:H.map(e=>{var t,a,n,l,s;let i=null!==(t=K[e.symbol])&&void 0!==t?t:e.avgPrice,o=Number(null!==(a=e.quantity)&&void 0!==a?a:0)*Number(null!=i?i:0),c=Number(null!==(n=e.avgPrice)&&void 0!==n?n:0)||0,d=c>0?(Number(null!=i?i:0)-c)/c*100:0;return(0,r.jsxs)("tr",{className:"border-t border-neutral-800",children:[(0,r.jsx)("td",{className:"p-2",children:e.symbol}),(0,r.jsx)("td",{className:"p-2",children:Number(null!==(l=e.quantity)&&void 0!==l?l:0).toFixed(2)}),(0,r.jsxs)("td",{className:"p-2",children:["$",Number(null!==(s=e.avgPrice)&&void 0!==s?s:0).toFixed(2)]}),(0,r.jsxs)("td",{className:"p-2",children:["$",o.toFixed(2)]}),(0,r.jsx)("td",{className:"p-2",children:(0,r.jsxs)("span",{className:d>=0?"text-emerald-400":"text-red-400",children:[d.toFixed(2),"%"]})})]},e.id)})})]})]})]}),(0,r.jsx)("div",{className:"px-4 pb-4",children:(0,r.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,r.jsx)("button",{className:"px-3 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-sm",onClick:()=>ei(!0),disabled:es&&en,children:es?en?"Calcul en cours…":"Recalculer la projection":"Afficher la projection 10 ans"}),es&&ea.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,r.jsx)("h5",{className:"font-semibold",children:"Projection 10 ans (valeur nette totale)"}),(0,r.jsxs)("span",{className:"text-xs text-neutral-400",children:["de ",(0,u.l)(Math.round(ea[0].net))," \xe0 ",(0,u.l)(Math.round(ea[ea.length-1].net))]})]}),(0,r.jsx)(function(e){let{data:t}=e;if(!t||0===t.length)return null;let a=Math.min(...t.map(e=>e.net)),n=Math.max(...t.map(e=>e.net)),l=a===n?.95*a:.98*a,s=a===n?1.05*n:1.02*n,i=e=>28+744*e/Math.max(1,t.length-1),o=e=>172-(e-l)*144/Math.max(1,s-l),c=t.map((e,t)=>"".concat(i(t),",").concat(o(e.net))).join(" "),d=e=>e>=1e6?"".concat((e/1e6).toFixed(2)," M$"):e>=1e3?"".concat((e/1e3).toFixed(1)," k$"):"$".concat(Math.round(e));return(0,r.jsx)("div",{className:"w-full overflow-x-auto",children:(0,r.jsxs)("svg",{viewBox:"0 0 ".concat(800," ").concat(200),className:"w-full h-48 bg-neutral-950 border border-neutral-800 rounded",children:[(0,r.jsx)("line",{x1:28,y1:172,x2:772,y2:172,stroke:"#333"}),(0,r.jsx)("line",{x1:28,y1:28,x2:28,y2:172,stroke:"#333"}),(0,r.jsx)("text",{x:28,y:20,fill:"#9ca3af",fontSize:"10",textAnchor:"start",children:d(s)}),(0,r.jsx)("text",{x:28,y:184,fill:"#9ca3af",fontSize:"10",textAnchor:"start",children:d(l)}),(0,r.jsx)("polyline",{fill:"none",stroke:"#22c55e",strokeWidth:2,points:c})]})})},{data:ea})]})]})})]}),(0,r.jsx)("div",{className:"px-4 py-3 border-t border-neutral-800 flex justify-center",children:(0,r.jsx)("button",{onClick:()=>_(null),className:"px-4 py-2 rounded bg-neutral-700 hover:bg-neutral-600 text-sm",children:"Fermer"})})]})})]}),em&&(0,r.jsx)(c.default,{onClose:()=>ex(!1)})]})}function p(e){let{gameId:t,onAdvanced:a}=e,[n,l]=(0,s.useState)(4),[i,o]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),m=(0,s.useCallback)(async()=>{if(!t){u("GameId manquant");return}o(!0),u(null);try{let e=Math.max(1,Math.min(520,n)),r=await (0,d.SC)("/api/games/".concat(t,"/advance-weeks?weeks=").concat(e),{method:"POST"});u("Avanc\xe9 de ".concat(r.weeksApplied," semaines en ").concat(r.durationMs,"ms.")),a&&a()}catch(e){u((null==e?void 0:e.message)||"\xc9chec avance")}finally{o(!1)}},[t,n,a]);return(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-neutral-400",children:"Avancer le temps de jeu (ticks hebdomadaires). 1h serveur = 1 semaine simul\xe9e."}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"number",min:1,max:520,value:n,onChange:e=>l(Number(e.target.value)||1),className:"w-20 px-2 py-1 rounded bg-neutral-800 border border-neutral-700 text-sm"}),(0,r.jsx)("button",{disabled:i,onClick:m,className:"px-3 py-1.5 rounded bg-purple-700 hover:bg-purple-600 disabled:opacity-50 text-sm",children:i?"Avance…":"Avancer ".concat(n," semaine").concat(n>1?"s":"")})]}),c&&(0,r.jsx)("p",{className:"text-xs text-neutral-300",children:c})]})}function g(){let e=new Date("2025-12-31T23:00:00-05:00"),[t,a]=(0,s.useState)(()=>new Date);if((0,s.useEffect)(()=>{let e=setInterval(()=>a(new Date),6e4);return()=>clearInterval(e)},[]),t>e)return null;let l=Math.max(0,Math.floor((e.getTime()-t.getTime())/864e5));return(0,r.jsxs)("div",{className:"rounded-lg border border-amber-600 bg-gradient-to-r from-amber-700/60 to-yellow-700/50 p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2 shadow",children:[(0,r.jsx)("div",{className:"text-sm md:text-base font-semibold text-amber-100 flex items-center gap-2",children:(0,r.jsx)("span",{children:"\uD83C\uDFC6 Prix sp\xe9cial: Carte cadeau Amazon 20$ attribu\xe9e le 31 d\xe9cembre 2025 au joueur #1 (valeur nette)."})}),(0,r.jsxs)("div",{className:"text-xs text-amber-200 flex items-center gap-3",children:[(0,r.jsxs)("span",{children:["Compte \xe0 rebours: ",l," jour",1!==l?"s":""]}),(0,r.jsx)(n.default,{href:"/quiz",className:"px-3 py-1 rounded bg-amber-500 hover:bg-amber-400 text-black font-medium text-xs",children:"Booster ton net"})]})]})}},1468:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var r=a(7821),n=a(8078);function l(e){let{onClose:t,storageKey:a="hm-tutorial-home"}=e,l=[{title:"Objectif Global",content:"Fais cro\xeetre ta valeur nette en combinant 4 moteurs: Immobilier (cashflow & appr\xe9ciation), Bourse (diversification & dividendes), Quiz (acc\xe9l\xe9rateur de capital), Pari (risque contr\xf4l\xe9). Garde toujours un coussin de liquidit\xe9s pour saisir les opportunit\xe9s et \xe9viter de bloquer ton jeu."},{title:"Immobilier — Achat & Stocks",content:"Dans ‘Immobilier’, choisis un bien (ex: six‑plex, tour 50, tour 100). V\xe9rifie loyer, taux et charges. Les boutons ‘refill’ et ‘+10’ maintiennent l’offre (6‑plex→10, tours50→10, tours100→5). Diversifie entre flux de loyers et valeur pour refinancements futurs."},{title:"Bourse — Positions & Dividendes",content:"Dans ‘Bourse’, s\xe9lectionne un symbole (SP500, TSX, QQQ, TLT, GLD). Les dividendes tombent p\xe9riodiquement et renforcent ton cash. M\xe9lange actifs cycliques (croissance) et d\xe9fensifs (obligations/or) pour lisser la volatilit\xe9 immobili\xe8re."},{title:"Quiz — Session de 10 Questions",content:"Consomme 1 token pour lancer: Q1-2 faciles, Q3-5 moyennes, Q6-10 difficiles. Chaque bonne r\xe9ponse double ta somme de session (5k→10k→20k...). Tu peux encaisser \xe0 tout moment avant une erreur. Cat\xe9gories vari\xe9es (anatomy, finance, g\xe9n\xe9ral). Optimise en s\xe9curisant apr\xe8s une bonne s\xe9rie."},{title:"Pari — 3 D\xe9s \xe0 Risque",content:"Mise (≥5 000$) puis lance 3 d\xe9s: double = x2, triple ou suite = x3, sinon perte de la mise. Ne sur‑expose pas ton capital avant un achat immobilier cl\xe9. Le volet Pari est un acc\xe9l\xe9rateur ponctuel, pas un moteur principal durable."},{title:"Strat\xe9gies Rapides",content:"D\xe9marrage: 1–2 six‑plex + quiz pour booster le cash. Milieu: entr\xe9e en bourse, viser tour 50 pour masse critique. Fin: grandes structures + quiz difficile avec encaissement prudent. Toujours anticiper p\xe9nurie: utiliser refill avant manque de stock."},{title:"D\xe9pannage & V\xe9rifications",content:"Probl\xe8me quiz? V\xe9rifie: tokens >0, endpoint /api/games/<id>/quiz/status = 200 (console r\xe9seau). Proxy /api/* corrige CORS. Besoin d’aide: lien contact dans la page ‘Contact’. Garde tes logs propres avant de reporter un bug."},{title:"Invitations Bonus",content:"Utilise ‘Inviter un ami’ sur l’accueil: quand valid\xe9 tu re\xe7ois 1 000 000$. Profite-en pour cr\xe9er un mini r\xe9seau et comparer vos strat\xe9gies de portefeuille."}],[s,i]=(0,n.useState)(0),o=(0,n.useRef)(null),c=(0,n.useRef)(null),d=(0,n.useRef)(null),u=(0,n.useRef)(null),[m,x]=(0,n.useState)(!1);function h(e,t,a,r){if(null===a||null===r)return;let n=e-a;Math.abs(n)>Math.abs(t-r)&&Math.abs(n)>40&&(n<0&&s<l.length-1?i(e=>Math.min(l.length-1,e+1)):n>0&&s>0&&i(e=>Math.max(0,e-1)))}function p(e){if(0===e.changedTouches.length){o.current=null,c.current=null;return}let t=e.changedTouches[0];h(t.clientX,t.clientY,o.current,c.current),o.current=null,c.current=null}return(0,r.jsx)("div",{className:"fixed inset-0 z-[9999] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-xl w-full bg-white rounded-2xl shadow-2xl text-gray-900",onTouchStart:function(e){let t=e.touches[0];o.current=t.clientX,c.current=t.clientY},onTouchEnd:p,onTouchCancel:p,onPointerDown:function(e){"mouse"!==e.pointerType&&(d.current=e.clientX,u.current=e.clientY)},onPointerUp:function(e){"mouse"!==e.pointerType&&(h(e.clientX,e.clientY,d.current,u.current),d.current=null,u.current=null)},onPointerCancel:()=>{d.current=null,u.current=null},children:[(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"text-xl font-bold mb-2",children:l[s].title}),(0,r.jsx)("div",{className:"text-sm text-gray-700 mb-6",children:l[s].content}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{className:"text-xs text-gray-600 flex items-center gap-2 select-none",children:[(0,r.jsx)("input",{type:"checkbox",checked:m,onChange:e=>x(e.target.checked)}),"Ne plus afficher automatiquement"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[s>0&&(0,r.jsx)("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>i(e=>Math.max(0,e-1)),children:"← Pr\xe9c\xe9dent"}),s<l.length-1?(0,r.jsx)("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>i(e=>Math.min(l.length-1,e+1)),children:"Suivant →"}):(0,r.jsx)("button",{className:"px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:function(){try{m&&localStorage.setItem(a,"1")}catch(e){}t()},children:"C’est parti"})]})]})]}),(0,r.jsx)("div",{className:"px-6 pb-4 text-center",children:(0,r.jsx)("div",{className:"inline-flex gap-1",children:l.map((e,t)=>(0,r.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(t===s?"bg-indigo-600":"bg-gray-300")},t))})})]})})}},2044:function(e,t,a){"use strict";function r(e){let t=Number(e);return isFinite(t)?"$".concat(Math.round(t).toLocaleString()):"$0"}function n(e){return 52*Number(e||0)/12}a.d(t,{P:function(){return n},l:function(){return r}})},168:function(e,t,a){"use strict";var r=a(7462);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[498,640,305,115,205,744],function(){return e(e.s=3657)}),_N_E=e.O()}]);