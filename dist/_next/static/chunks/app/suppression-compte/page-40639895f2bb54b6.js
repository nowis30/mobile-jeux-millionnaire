(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153],{3252:function(e,t,n){Promise.resolve().then(n.bind(n,1254))},1254:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(7821),o=n(4233),s=n(8078),a=n(9513);function i(){let[e,t]=(0,s.useState)(!1),[n,i]=(0,s.useState)(!1),[c,l]=(0,s.useState)(null),u=(0,s.useCallback)(async()=>{if(!e&&!n&&(l(null),window.confirm("Attention: cette action supprimera d\xe9finitivement votre compte et vos donn\xe9es principales (joueur, email). Continuer ?"))){t(!0);try{let e=await (0,a.SC)("/api/auth/delete-account",{method:"POST"});if(null==e?void 0:e.deleted){i(!0);try{localStorage.removeItem("HM_TOKEN")}catch(e){}try{localStorage.removeItem("hm-session")}catch(e){}}else l("Suppression non confirm\xe9e c\xf4t\xe9 serveur.")}catch(e){l((null==e?void 0:e.message)||"Erreur r\xe9seau")}finally{t(!1)}}},[e,n]);return(0,r.jsxs)("main",{className:"max-w-3xl mx-auto p-4 space-y-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Suppression du compte et des donn\xe9es"}),(0,r.jsxs)("div",{className:"rounded-xl border border-neutral-800 bg-neutral-900 p-4 space-y-3",children:[(0,r.jsx)("p",{children:"Vous pouvez demander la suppression de votre compte et de l’ensemble des donn\xe9es associ\xe9es. Cette demande est possible sans \xeatre connect\xe9."}),(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Comment proc\xe9der ?"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-neutral-200",children:[(0,r.jsxs)("li",{children:["Envoyez une demande via le bouton ci-dessous ou par email \xe0"," ",(0,r.jsx)("a",{className:"underline text-emerald-400",href:"mailto:contact@nowis.store?subject=Suppression%20compte%20H%C3%A9ritier%20Millionnaire",children:"contact@nowis.store"}),"."]}),(0,r.jsx)("li",{children:"Nous v\xe9rifierons votre identit\xe9 (adresse email / identifiant joueur) pour s\xe9curiser la suppression."}),(0,r.jsx)("li",{children:"Votre compte et vos donn\xe9es seront supprim\xe9s dans un d\xe9lai raisonnable (g\xe9n\xe9ralement sous 30 jours)."})]}),(0,r.jsxs)("div",{className:"pt-2 flex flex-col gap-2",children:[(0,r.jsx)("button",{disabled:e||n,onClick:u,className:"px-4 py-2 rounded font-semibold ".concat(n?"bg-neutral-700 text-neutral-300 cursor-default":e?"bg-emerald-700 text-neutral-200 cursor-wait":"bg-emerald-600 hover:bg-emerald-500 text-black"),children:n?"Compte supprim\xe9":e?"Suppression...":"Supprimer mon compte maintenant"}),(0,r.jsx)("a",{href:"mailto:contact@nowis.store?subject=Suppression%20de%20compte%20-%20H%C3%A9ritier%20Millionnaire&body=Bonjour%2C%0AJe%20souhaite%20supprimer%20mon%20compte%20et%20toutes%20mes%20donn%C3%A9es.%0AEmail%20associ%C3%A9%20au%20compte%3A%20_____%0AIdentifiant%20joueur%20(si%20connu)%3A%20_____%0AMerci.%0A",className:"inline-block px-4 py-2 rounded bg-neutral-800 border border-neutral-700 hover:bg-neutral-700 text-center text-sm",children:"Ou envoyer une demande par email"}),c&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:c}),n&&(0,r.jsx)("p",{className:"text-sm text-emerald-400",children:"Suppression effectu\xe9e. Vous pouvez fermer l’application."})]}),(0,r.jsxs)("p",{className:"text-sm text-neutral-400",children:["Si le bouton ne fonctionne pas, \xe9crivez-nous directement \xe0"," ",(0,r.jsx)("a",{className:"underline",href:"mailto:contact@nowis.store",children:"contact@nowis.store"})," ","en pr\xe9cisant l’email du compte et, si possible, votre identifiant joueur."]}),(0,r.jsxs)("p",{className:"text-sm text-neutral-400",children:["Politique de confidentialit\xe9: "," ",(0,r.jsx)(o.default,{className:"underline",href:"/confidentialite",children:"/confidentialite"})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-neutral-800 bg-neutral-900 p-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"English (summary)"}),(0,r.jsxs)("p",{className:"text-neutral-200",children:["You can request deletion of your account and associated data without being signed in. Send a request to"," ",(0,r.jsx)("a",{className:"underline text-emerald-400",href:"mailto:contact@nowis.store?subject=Account%20deletion%20request",children:"contact@nowis.store"}),". We will verify your identity and delete your data within a reasonable period (typically within 30 days)."]})]})]})}},9513:function(e,t,n){"use strict";n.d(t,{MS:function(){return l},SC:function(){return p},Sg:function(){return c}});var r=n(5050);let o="https://server-jeux-millionnaire.onrender.com",s=!!window.Capacitor,a=/localhost:3000$/.test(window.location.host),i="1"===r.env.NEXT_PUBLIC_FORCE_ABS,c=s||i||!a?o:"";console.log("[API] ABS_BACKEND:",o),console.log("[API] isCapacitor:",s),console.log("[API] isLocalDev:",a),console.log("[API] forceAbs:",i),console.log("[API] API_BASE:",c);class l extends Error{constructor(e,t){super(t),this.name="ApiError",this.status=e,Object.setPrototypeOf(this,l.prototype)}}let u=null,d="HM_TOKEN";async function m(){try{var e;if(u)return u;let t=await fetch("".concat(c,"/api/auth/csrf"),{credentials:"include"});if(!t.ok)return null;let n=await t.json();return u=null!==(e=null==n?void 0:n.csrf)&&void 0!==e?e:null}catch(e){return null}}async function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.method||"GET").toUpperCase(),r={...t.headers};if(console.log("[API] ".concat(n," ").concat(c).concat(e)),["POST","PUT","PATCH","DELETE"].includes(n)){let e=await m();e&&(r["x-csrf-token"]=e)}let o=function(){try{return window.localStorage.getItem(d)}catch(e){return null}}();o&&(r.Authorization="Bearer ".concat(o));let s=function(){try{let e=window.localStorage.getItem("hm-session");if(!e)return null;return JSON.parse(e).playerId||null}catch(e){return null}}();s&&(r["X-Player-ID"]=s);try{let n=await fetch("".concat(c).concat(e),{credentials:"include",...t,headers:r});if(console.log("[API] Response ".concat(n.status," ").concat(n.statusText)),401===n.status)try{if(o){let n=await fetch("".concat(c,"/api/auth/refresh"),{credentials:"include",headers:{Authorization:"Bearer ".concat(o)}});if(n.ok){let o=await n.json().catch(()=>({}));if(null==o?void 0:o.token){try{window.localStorage.setItem(d,o.token)}catch(e){}r.Authorization="Bearer ".concat(o.token)}let s=await fetch("".concat(c).concat(e),{credentials:"include",...t,headers:r});if(!s.ok)throw new l(s.status,s.statusText);if(204===s.status)return;return await s.json()}}}catch(e){}if(!n.ok)try{if((n.headers.get("content-type")||"").includes("application/json")){let e=await n.json(),t=e&&(e.error||e.message)?String(e.error||e.message):"Erreur ".concat(n.status);throw new l(n.status,t)}{let e=(await n.text()||"").trim(),t=e.length?e:n.statusText?"".concat(n.status," ").concat(n.statusText):"Erreur ".concat(n.status);throw new l(n.status,t)}}catch(t){let e=n.statusText?"".concat(n.status," ").concat(n.statusText):"Erreur ".concat(n.status);if(t instanceof l)throw t;throw new l(n.status,e)}if(204===n.status)return;return await n.json()}catch(e){throw console.error("[API] Fetch error:",e),new l(0,"Erreur r\xe9seau: ".concat(e.message||"Failed to fetch"))}}},5050:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(9295)},9295:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c=[],l=!1,u=-1;function d(){l&&r&&(l=!1,r.length?c=r.concat(c):u=-1,c.length&&m())}function m(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(r=c,c=[];++u<t;)r&&r[u].run();u=-1,t=c.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||i(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={exports:{}},a=!0;try{t[e](s,s.exports,r),a=!1}finally{a&&delete n[e]}return s.exports}r.ab="//";var o=r(229);e.exports=o}()}},function(e){e.O(0,[233,115,205,744],function(){return e(e.s=3252)}),_N_E=e.O()}]);